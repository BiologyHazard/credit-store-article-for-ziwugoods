<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>【子午谷工作室】信用交易所购买策略</title>
<!-- KaTeX -->
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.css" rel="stylesheet"/>
<script crossorigin="anonymous" defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.js"></script>
<script crossorigin="anonymous" defer="" onload="renderMathInElement(document.body);" src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.js"></script>
<!-- MathJax -->
<!-- <script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
<link href="styles/fonts.css" rel="stylesheet"/>
<link href="styles/style.css" rel="stylesheet"/>
<link href="styles/auto-numbering.css" rel="stylesheet"/>
<link href="styles/colors.css" rel="stylesheet"/>
</head>
<body>
<header>
<h1>信用交易所最优购买策略</h1>
</header>
<main class="page" id="JYQswCHz7ilaTykFqvOcWFc1nrg"><p class="text" id="SiKhdh0TQolPRdx96QUc4VsPngb"><strong><span lang="zh">作者</span></strong><span lang="zh">：</span><span lang="en">BioHazard</span></p><p class="text" id="GWhDdWpBqoJxmPx0n7YcbOfxnx1"><span lang="en">bilibili</span><span lang="zh">：</span><span lang="en">Bio</span><span lang="zh">-</span><span lang="en">Hazard</span><span lang="zh">，</span><a class="url" href="https://space.bilibili.com/37179776" target="_blank"><span lang="en">https://space.bilibili.com/37179776</span></a></p><p class="text" id="I3IWdHamGo5LAuxeLmOcYushngd"><span lang="zh">森空岛：</span><span lang="en">BioHazard</span><span lang="zh">，</span><a class="url" href="https://www.skland.com/profile?id=1138552273321" target="_blank"><span lang="en">https://www.skland.com/profile?id</span><span lang="zh">=</span><span lang="en">1138552273321</span></a></p><p class="text" id="MQfsd1o4Fo7WLIxiQWecWIjTnEh"><span lang="en">NGA</span><span lang="zh">：</span><span lang="en">Bio</span><span lang="zh">-</span><span lang="en">Hazard</span><span lang="zh">，</span><a class="url" href="https://bbs.nga.cn/thread.php?authorid=60824354" target="_blank"><span lang="en">https://bbs.nga.cn/thread.php?authorid</span><span lang="zh">=</span><span lang="en">60824354</span></a></p><p class="text" id="IlJedgT08oQOBtxm925cxt7Cnjg"><strong><span lang="zh">排版</span></strong><span lang="zh">：</span><span lang="en">BioHazard</span><span lang="zh">、欧洲鲫鱼</span></p><p class="text" id="F6ZDddnAaoITFWxgpHEcFgMOnyc"><strong><span lang="zh">封面</span></strong><span lang="zh">：好问题</span></p><p class="text" id="GUAed22yooLvWLxnEu0cNZYwn2d"><span lang="en">English</span><span lang="zh"> </span><span lang="en">ver.:</span><span lang="zh"> </span><a href="https://h089spg07ll.feishu.cn/docx/GyIndUxXso5511xeRcXcY4p0n4g" target="_blank"><span class="doc-logo"><svg data-icon="FileLinkWordOutlined" fill="none" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 3h12.595c.93 0 1.806.355 2.439.96A3.07 3.07 0 0 1 20 6.176V21H7.405a3.53 3.53 0 0 1-2.439-.96A3.068 3.068 0 0 1 4 17.823V3ZM3 1a1 1 0 0 0-1 1v15.823c0 1.373.57 2.69 1.583 3.66A5.529 5.529 0 0 0 7.405 23H21a1 1 0 0 0 1-1V6.176a5.07 5.07 0 0 0-1.583-3.66A5.53 5.53 0 0 0 16.595 1H3Z" fill="currentColor"></path><path d="M6.75 8a1 1 0 0 1 1-1h8.5a1 1 0 1 1 0 2h-8.5a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h8.5a1 1 0 1 1 0 2h-8.5a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h4.5a1 1 0 1 1 0 2h-4.5a1 1 0 0 1-1-1Z" fill="currentColor"></path></svg></span><span lang="en">Optimal</span><span lang="zh"> </span><span lang="en">Purchase</span><span lang="zh"> </span><span lang="en">Strategy</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">Credit</span><span lang="zh"> </span><span lang="en">Store,</span><span lang="zh"> </span><span lang="en">The</span><span lang="zh"> </span><span lang="en">Value</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">Credit</span></a></p><p class="text" id="BQfIdvF1ro3AH2x3HXRcYvXhnHh"><span lang="en">bilibili</span><span lang="zh">：</span><a class="url" href="https://www.bilibili.com/read/cv36832660" target="_blank"><span lang="en">https://www.bilibili.com/read/cv36832660</span></a></p><p class="text" id="KYHKdEHqsohn4Ox2MXHc5jmRnCh"><span lang="zh">森空岛：</span><a class="url" href="https://www.skland.com/article?id=2162530" target="_blank"><span lang="en">https://www.skland.com/article?id</span><span lang="zh">=</span><span lang="en">2162530</span></a></p><p class="text" id="BxHzdEr8Po5CUqxmvk6c9OjTnPf"><span lang="en">NGA</span><span lang="zh">：</span><a class="url" href="https://bbs.nga.cn/read.php?tid=41171729" target="_blank"><span lang="en">https://bbs.nga.cn/read.php?tid</span><span lang="zh">=</span><span lang="en">41171729</span></a></p><h1 class="h1 auto-numbering" id="SPBMdlOlYoDkGBx4cOScbhxTnue"><span lang="zh">说明</span></h1><p class="text" id="Q0cUdeszCo6V58x8K04c6leonUb"><span lang="zh">本文的主要内容写于 </span><span lang="en">2024</span><span lang="zh">-</span><span lang="en">07</span><span lang="zh"> ~ </span><span lang="en">2024</span><span lang="zh">-</span><span lang="en">08</span><span lang="zh">。</span></p><p class="text" id="FHPhdlPM7oaDYRxI8gpchs5Nnjg"><span lang="en">2025</span><span lang="zh">-</span><span lang="en">01</span><span lang="zh">-</span><span lang="en">22</span><span lang="zh">，明日方舟「相见欢」版本新增了一个信用的获取途径：通过会客室信息板获取信用。每日首次来访的好友会在信息板上带来 </span><span lang="en">30</span><span lang="zh"> 信用（每周上限 </span><span lang="en">300</span><span lang="zh"> 信用，周一 </span><span lang="en">04:00</span><span lang="zh"> 刷新）。可以在一周内的任何时间领取信息板上的全部信用，且每周首次打开信息板时会自动领取上周未领取的全部信用。</span></p><p class="text" id="NT73dAwnhoI1j6xluAjcme4Knnd"><span lang="zh">在本文的假设框架内，无法将这一改动纳入考虑。因此本文的过程和结论仅适用于「相见欢」以前的版本。请注意时效性。</span></p><h1 class="h1 auto-numbering" id="doxcnylffMr80paJDKI1XVnzWrc"><span lang="zh">摘要</span></h1><p class="text" id="doxcnxIViLYJQi8vgDajUBAYEud"><span lang="zh">本文推导了</span><span class="text-color-1"><span lang="zh">信用交易所最优购买策略</span></span><span lang="zh">，由此计算</span><span class="text-color-1"><span lang="zh">信用的价值</span></span><span lang="zh">和</span><span class="text-color-1"><span lang="zh">平均每日能够购买的物品数量</span></span><span lang="zh">。</span></p><p class="text" id="doxcnEIisJp00WFdwLYR5hfckZc"><span lang="zh">本文介绍了 </span><span lang="en">8</span><span lang="zh"> 种不同的购买策略，并比较了它们的优劣。其中，“按性价比从高到低购买，并设定性价比阈值策略”十分亮眼，不仅实施起来操作简单，且与最优策略的表现相差无几。</span></p><p class="text" id="doxcn84oXCD42IwTTXq0OGwKc2f"><span lang="zh">本文还讨论了使用 </span><a href="https://maa.plus/" target="_blank"><span lang="en">MAA</span></a><span lang="zh"> 购买时，</span><a href="https://maa.plus/" target="_blank"><span lang="en">MAA</span></a><span lang="zh"> 的最佳设置，以及讨论了考虑存线索时的最优购买策略和近似策略。</span></p><p class="text" id="doxcnxxV4rpYXB1gk51R9pb61fb"><strong><span lang="zh">本文的主要结论：</span></strong></p><ol><li class="ordered" id="doxcnSPerjNZBqmaffrr4wMTJHg"><span lang="en">3</span><span lang="zh"> 发电站基建布局比 </span><span lang="en">2</span><span lang="zh"> 发电站基建布局每日多获得的 </span><span lang="en">129</span><span lang="zh"> 信用大约相当于 </span><span lang="en">5.2206</span><span lang="zh"> 理智。</span></li><li class="ordered" id="doxcn2HfiaydNhlzOYcqYHByzed"><span lang="zh">“从左到右购买，直到不能购买为止”</span><span lang="zh">策略的表现只有最优策略的</span><span lang="zh"> </span><span lang="en">84.4615%</span><span lang="zh"> 左右。</span></li><li class="ordered" id="doxcnRFsOVV3KUAluEPOTAEuWFd"><span lang="zh">“按性价比从高到低购买，直到不能购买为止”策略的表现可以达到最优策略的 </span><span lang="en">98.6074%</span><span lang="zh"> 左右。</span></li><li class="ordered" id="doxcnkhnAFj7JaTYWW3m4ZEldYc"><span lang="zh">“按性价比从高到低购买，并设定性价比阈值”策略的表现可以进一步达到最优策略的 </span><span lang="en">99.9383%</span><span lang="zh"> 左右。</span></li><li class="ordered" id="doxcnIbW6x5Gyz63INlsh8g0etf"><span lang="zh">使用 </span><a href="https://maa.plus/" target="_blank"><span lang="en">MAA</span></a><span lang="zh"> 购买时，推荐的黑白名单填写方式：</span><ul><li class="bullet" id="doxcn0aIcZreJu9yGOggAeyUUig"><span lang="zh">优先购买：招聘许可；龙门币；技巧概要·卷</span><span lang="en">2</span></li><li class="bullet" id="doxcn2B9KhzvjuEUS2YlxJrKObe"><span lang="zh">黑名单：加急许可；家具零件；碳；碳素</span></li></ul><p class="text" id="doxcn57KSWsqWngyiBiYjcfEgJc"><span lang="zh">并且，不勾选“只购买打折的信用商品”，不勾选“信用点低于 </span><span lang="en">300</span><span lang="zh"> 时停止购买商品”，每日获得 </span><span lang="en">813</span><span lang="zh"> 信用时，不勾选“信用溢出时无视黑名单”；每日获得 </span><span lang="en">942</span><span lang="zh"> 信用时，勾选“信用溢出时无视黑名单”。</span></p></li></ol><h1 class="h1 auto-numbering" id="Ca4ndAf5AoGPDXxNcONc9tuHnrc"><span lang="zh">引言</span></h1><p class="text" id="ZaITdN1FEotGeyx2hqLcXRkNn0d"><span class="text-color-5"><span lang="zh">信用交易所</span></span><span lang="zh">是明日方舟中获取养成资源的途径之一。信用交易所共有 </span><span lang="en">10</span><span lang="zh"> 个栏位，每个栏位有且仅有 </span><span lang="en">1</span><span lang="zh"> 组物品（</span><span lang="en">1</span><span lang="zh"> 组物品包含若干个物品，可以不购买或者一次性购买 </span><span lang="en">1</span><span lang="zh"> 组中的全部物品），部分栏位的商品有折扣。</span></p><p class="text" id="Y8Ftdgc8PonXpxxmQk4cJQ8pnjd"><span lang="zh">购买信用交易所中的商品需要花费</span><span class="text-color-5"><span lang="zh">信用</span></span><span lang="zh">。玩家每日可以获取一定数量的信用。</span></p><p class="text" id="ZrW9dFZYwocC0Bx7CDucmOEgnmg"><span lang="zh">信用交易所每日 </span><span lang="en">04:00</span><span lang="zh"> 刷新，每个栏位都会刷新。并且，刷新时，未花完的信用</span><strong><span lang="zh">至多保留 </span><span lang="en">300</span><span lang="zh"> 信用到下一天</span></strong><span lang="zh">，超出 </span><span lang="en">300</span><span lang="zh"> 信用的部分在刷新时会被系统没收。</span></p><figure class="figure-image" id="CAITdmZR0oRPCxxEyI1ckoHwnKf" image-token="YJGrbyK9xos5Vox7uNncx2C3nxg"><img alt="图 1.　一个信用交易所。目前有 210 信用。" class="image" image-token="YJGrbyK9xos5Vox7uNncx2C3nxg" src="images/YJGrbyK9xos5Vox7uNncx2C3nxg.png"></img><figcaption><span lang="zh">图 </span><span lang="en">1.</span><span lang="zh">　一个信用交易所。目前有 </span><span lang="en">210</span><span lang="zh"> 信用。</span></figcaption></figure><table class="sheet" id="TnuBdIZJ2oK9cyx58OMc0WRonoe" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_I4ejXT"><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td><span lang="zh">现有信用</span></td><td><span lang="en">75</span><span lang="zh"> </span><span lang="en">/</span><span lang="zh"> </span><span lang="en">300</span></td></tr><tr><td colspan="2"><span lang="zh">栏位 </span><span lang="en">0</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">1</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">2</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">3</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">4</span></td></tr><tr><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">75%</span></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td><td><span lang="zh">-</span><span lang="en">75%</span></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">50%</span></td><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">50%</span></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">50%</span></td></tr><tr><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td></tr><tr><td><span lang="zh">原价 </span><span lang="en">160</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">40</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">160</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">40</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">100</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">80</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">40</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">240</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">120</span><span lang="zh"> 信用</span></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td colspan="2"><span lang="zh">栏位 </span><span lang="en">5</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">6</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">7</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">8</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">9</span></td></tr><tr><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td><td><span lang="zh">无折扣</span></td></tr><tr><td colspan="2"></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"></td><td colspan="2"></td><td colspan="2"><span lang="zh">售罄</span></td></tr><tr><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">160</span><span lang="zh"> 信用</span></td></tr></table><p class="text" id="QXhMdICwsobrz4xjgXNcR94Qnjh"></p><table class="sheet" id="RrDMds6CEoFxFZxFxDqcRbTSnIh" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_ZOd86z"><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td><span lang="zh">现有信用</span></td><td><span lang="en">75</span><span lang="zh"> </span><span lang="en">/</span><span lang="zh"> </span><span lang="en">300</span></td></tr><tr><td colspan="2"><span lang="zh">栏位 </span><span lang="en">0</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">1</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">2</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">3</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">4</span></td></tr><tr><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">75%</span></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td><td><span lang="zh">-</span><span lang="en">75%</span></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">50%</span></td><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">50%</span></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td><span lang="zh">-</span><span lang="en">50%</span></td></tr><tr><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"><span lang="zh">售罄</span></td></tr><tr><td><span lang="zh">原价 </span><span lang="en">160</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">40</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">160</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">40</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">100</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">80</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">40</span><span lang="zh"> 信用</span></td><td><span lang="zh">原价 </span><span lang="en">240</span><span lang="zh"> 信用</span></td><td><span lang="zh">现价 </span><span lang="en">120</span><span lang="zh"> 信用</span></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td colspan="2"><span lang="zh">栏位 </span><span lang="en">5</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">6</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">7</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">8</span></td><td colspan="2"><span lang="zh">栏位 </span><span lang="en">9</span></td></tr><tr><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">无折扣</span></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td><td><span lang="zh">无折扣</span></td></tr><tr><td colspan="2"></td><td colspan="2"><span lang="zh">售罄</span></td><td colspan="2"></td><td colspan="2"></td><td colspan="2"><span lang="zh">售罄</span></td></tr><tr><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">200</span><span lang="zh"> 信用</span></td><td colspan="2"><span lang="zh">现价 </span><span lang="en">160</span><span lang="zh"> 信用</span></td></tr></table><figure class="figure-image" id="JRIOd4VBpox5kLxz4QicbF0knYc" image-token="P23JbytcFok3BmxqsNPcuCAvnnh"><img alt="图 2.　信用交易所规则" class="image" image-token="P23JbytcFok3BmxqsNPcuCAvnnh" src="images/P23JbytcFok3BmxqsNPcuCAvnnh.png"></img><figcaption><span lang="zh">图 </span><span lang="en">2.</span><span lang="zh">　信用交易所规则</span></figcaption></figure><p class="text" id="BKAAddn3ko3omxxKHmOcdM2Nnr3"><span lang="zh">那么，一个自然的问题是：</span><strong><span lang="zh">为了尽可能多地获取资源，应该购买信用交易所中的哪些商品呢？</span></strong></p><p class="text" id="D34JdIxnEoqfLMx1PPvcYeONnsg"><span lang="zh">本文将推导信用交易所最优购买策略，还会介绍其他 </span><span lang="en">7</span><span lang="zh"> 种购买策略并比较它们的优劣，从而解决这一问题。</span></p><h1 class="h1 auto-numbering" id="RzqgdlJ3poWumyxzvC7c7Mudnnc"><span lang="zh">相关工作</span></h1><h2 class="h2 auto-numbering" id="KWgtdTUmloK2zUxzQLQcVaTGnCe"><span lang="zh">每日能获得的信用数量</span></h2><p class="text" id="ZiFJdx8gCoqRflxNNrlcaiO4n9e"><span lang="zh">每日可获得的信用包括</span></p><ol><li class="ordered" id="F3OadmaAhoeT2MxZayHcLtejnnb"><span lang="zh">宿舍氛围值总和换算获得的信用；</span><p class="text" id="HPlsdscVwoRSM1xoFhKcOm3Inlb"><span lang="zh">不同的基建布局，每日通过此途径能获得的信用数量不同。</span></p><p class="text" id="W8d3dNkzRoQUzzxQAGfc728JnRh"><span lang="zh">假设宿舍氛围值达到上限，</span></p><ul><li class="bullet" id="JepudBtPLo5L1xxokgMc4oUxnch"><span lang="en">3</span><span lang="zh"> 个 </span><span lang="en">1</span><span lang="zh"> 级宿舍，每日可通过此途径获得 </span><span lang="en">54</span><span lang="zh"> 信用；</span></li><li class="bullet" id="ROFidGFwVov0naxNR2KcgNRPnqc"><span lang="en">4</span><span lang="zh"> 个 </span><span lang="en">1</span><span lang="zh"> 级宿舍，每日可通过此途径获得 </span><span lang="en">72</span><span lang="zh"> 信用；</span></li><li class="bullet" id="FbD6d1z9CoF2M3xYfy9coHsWnTb"><span lang="en">1</span><span lang="zh"> 个 </span><span lang="en">2</span><span lang="zh"> 级宿舍、</span><span lang="en">3</span><span lang="zh"> 个 </span><span lang="en">1</span><span lang="zh"> 级宿舍，每日可通过此途径获得 </span><span lang="en">80</span><span lang="zh"> 信用；</span></li><li class="bullet" id="XeMwdHYJooxZMIx9gSvchUXrnvb"><span lang="en">4</span><span lang="zh"> 个 </span><span lang="en">5</span><span lang="zh"> 级宿舍，每日可通过此途径获得 </span><span lang="en">200</span><span lang="zh"> 信用。</span></li></ul></li><li class="ordered" id="WQO5djN6GohBQOx2wisc2TPGnIc"><span lang="zh">使用一次支援单位获得 </span><span lang="en">30</span><span lang="zh"> 信用；</span></li><li class="ordered" id="AYqqdu2bXok2Acxa3Tzcq5BjnBi"><span lang="zh">被他人使用一次支援单位获得 </span><span lang="en">20</span><span lang="zh"> 信用；</span></li><li class="ordered" id="N8vZdR90zoB0kgxgHwecS5jqnSg"><span lang="zh">开启线索交流，结束后获得 </span><span lang="en">210</span><span lang="zh"> 信用；</span></li><li class="ordered" id="NIoydJWIwoTxikx3MZSc44IRnfg"><span lang="zh">访问 </span><span lang="en">10</span><span lang="zh"> 名开启线索交流的好友，共获得 </span><span lang="en">300</span><span lang="zh"> 信用；</span></li><li class="ordered" id="OuoJdSSk5ofGGNxMicjciHhLnKg"><span lang="zh">会客室每日 </span><span lang="en">04:00</span><span lang="zh"> 获得线索并传递给好友，获得 </span><span lang="en">40</span><span lang="zh"> 信用；</span></li><li class="ordered" id="S9GMd7Eu4oTL9Wx3f45c0Okgn7b"><span lang="zh">收取好友传递的线索，共 </span><span lang="en">30</span><span lang="zh"> 信用；</span></li><li class="ordered" id="Dd6OdCPzKodvByxeqiwc5Lxdn1g"><span lang="zh">会客室干员搜集线索并传递给好友，每搜集 </span><span lang="en">1</span><span lang="zh"> 张线索获得 </span><span lang="en">20</span><span lang="zh"> 信用，每传递 </span><span lang="en">1</span><span lang="zh"> 张线索获得 </span><span lang="en">20</span><span lang="zh"> 信用。</span><p class="text" id="VAmId1dwtonRQcxQdcTc3El7nwf"><span lang="zh">线索的基础搜集时间为 </span><span lang="en">20</span><span lang="zh"> 小时。</span></p><p class="text" id="AnvEdtrtaoU82ux3BGrckxRYn9e"><span lang="zh">假设平均线索搜集速度为</span><span class="equation">\(x\)</span><span lang="zh">（其中包含 </span><span lang="en">1.0</span><span lang="zh"> 基础线索搜集速度），则每日可搜集到的线索数量为</span><span class="equation">\(24 / 20 \cdot x\)</span><span lang="zh">，相当于</span><span class="equation">\(24 / 20 \cdot x \cdot 40 = 48 \cdot x\)</span><span lang="zh">信用。</span></p></li></ol><table><thead><tr><td id="CC2jdK8C6oIfW0xLqIBciwyhnsc"><p class="text" id="OUf3da808oVxqexiYj5cUEtNnBd"><strong><span lang="zh">来源</span></strong></p></td><td id="QouIdFjEloi7hZxL1Ekcb4Rmnnh"><p class="text" id="OsZWdNkqEooDDIx3oRgcIUAZnKd"><strong><span lang="zh">信用数量</span></strong></p></td></tr></thead><tbody><tr><td id="RiE8diHgzolK7wx0MkFcynpUnu7"><p class="text" id="WrmBdngigofDH6xv7dzcZsL8nvh"><span lang="zh">宿舍氛围值总和换算</span></p></td><td id="BTe4dhnP5ozEYRxctBWcZ8tynke"><p class="text" id="WOyhdWN3zoMq7DxGIkrc0W6RnXe"><span lang="en">54</span><span lang="zh"> ~ </span><span lang="en">200</span><span lang="zh"> 不等</span></p></td></tr><tr><td id="TDUgdmbktoDGUixVfxhcdLL0nqe"><p class="text" id="LvP2dMd1uovyLlxeUvlcC0Zunbe"><span lang="zh">使用一次支援单位</span></p></td><td id="Nn0wdwvcoobJzgxU8qSc4Iaandb"><p class="text" id="FNvXdWSZgoVw03xHNrjcX6MAnOe"><span lang="en">30</span></p></td></tr><tr><td id="H5RXdSu0DondJixybdMcU0srnfe"><p class="text" id="VWxVd2Zoso4wKpx5EFzcKSAmnXb"><span lang="zh">被他人使用一次支援单位</span></p></td><td id="WhFOdYtZtoMaSZxicIwc6tLDn7f"><p class="text" id="Pcw0dbBNeoy5KDx7c9FcGf9LnLb"><span lang="en">20</span></p></td></tr><tr><td id="ZmQwdXQ5tocBwvx8bjCcVabnnAg"><p class="text" id="Ss0QdubXIoR8lSxiCWucjZULnTf"><span lang="zh">开启线索交流</span></p></td><td id="HIF5dTKl2oVhosxFak0cok62nlb"><p class="text" id="RqPtdGPq2o3FovxuTUocrenVnPf"><span lang="en">210</span></p></td></tr><tr><td id="IgyHdpHoXoXLDwxyVH0c3indn7f"><p class="text" id="SzhBdvW2homc22xWFjRcYfo3nYd"><span lang="zh">访问开启线索交流的好友</span></p></td><td id="Ut1ldxzbKohNjDxnILPc63VbnxN"><p class="text" id="V6TjdOuJlo0tgExxm78czeoCnbh"><span lang="en">300</span></p></td></tr><tr><td id="CCh2dcAQposDn5xwzcIcECwwnHc"><p class="text" id="WOE0dv5oKoOFNwx7UGncLJV9nOh"><span lang="zh">会客室初始线索并传递</span></p></td><td id="CAW7dIh23oWL4GxjKrrc0ttcn6e"><p class="text" id="UkU4dwEGjopSeqxUYadcgmsDnbh"><span lang="en">40</span></p></td></tr><tr><td id="GWDndKhAxoLpBDx2h6rcEce5nFc"><p class="text" id="ECRzd7cLCoZRn5xl5iJc1tmanVf"><span lang="zh">收取好友传递的线索</span></p></td><td id="SLchdEOoBoB9h4xoeTfcHajZnVb"><p class="text" id="TyeVdqANdoF0EmxqbEscHcjbnRc"><span lang="en">30</span></p></td></tr><tr><td id="HyugdQRGQoAT9bxJ3kUchHoRnKd"><p class="text" id="VEaid65aBoYjWfx30OYcyQXYn7g"><span lang="zh">会客室干员搜集线索并赠送</span></p></td><td id="TsRCdbTrtoN1grxGTDTcxAj1nSg"><p class="text" id="FbWRdDe2ho9eadxuWZKcABXknde"><span lang="en">48</span><span lang="zh"> * 平均线索搜集速度</span></p></td></tr><tr><td id="OQyvdrE4co9CbexL4U7cLyGsnvx"><p class="text" id="Hvn5dc0WOokmZaxAydkcS4uCntb"><strong><span lang="zh">总计</span></strong></p></td><td id="Yf9jdQpr1ooRD2xRXNFcGGUTn0c"><p class="text" id="KckldI8pMoHqXVxn5ojcl4Wynyh"><span lang="en">684</span><span lang="zh"> ~ </span><span lang="en">830</span><span lang="zh"> 不等 + </span><span lang="en">48</span><span lang="zh"> * 平均线索搜集速度</span></p></td></tr><tr></tr></tbody></table><ul><li class="bullet" id="YcEKdWSGqoLRJKxKLsgcd97Wnld"><span lang="en">2</span><span lang="zh"> 发电站基建布局下，每日能获得大约 </span><span lang="en">813</span><span lang="zh"> 信用；</span></li><li class="bullet" id="CuZ9dpzg0oeJ92x7ai5cFC99nxd"><span lang="en">3</span><span lang="zh"> 发电站基建布局下，每日能获得大约 </span><span lang="en">942</span><span lang="zh"> 信用。</span></li></ul><h2 class="h2 auto-numbering" id="doxcnrDMhRayvfPYH0BJSKuJ9he"><span lang="zh">信用交易所刷新统计</span></h2><h3 class="h3 auto-numbering" id="doxcnTHUipMQYc6bP7qBO5vaQGd"><span lang="zh">信用交易所商品分类</span></h3><figure class="figure-image" id="doxcnuDi8RiAzb4DneBcGz8czcv" image-token="B4E9blWbIoIyXVxh1JXcEHQpnxh"><img alt="图 3.　信用交易所所有可能出现的商品与原价
图片来源：PRTS Wiki" class="image" image-token="B4E9blWbIoIyXVxh1JXcEHQpnxh" src="images/B4E9blWbIoIyXVxh1JXcEHQpnxh.png"></img><figcaption><span lang="zh">图 </span><span lang="en">3.</span><span lang="zh">　信用交易所所有可能出现的商品与原价</span><br/><span lang="zh">图片来源：</span><span lang="en">PRTS</span><span lang="zh"> </span><span lang="en">Wiki</span></figcaption></figure><table class="sheet" id="XChXdo3h8o6ELoxtrzLc12JSnWg" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_tTzR4k"><tr><td><span lang="zh">商品名称</span></td><td><span lang="zh">物品</span></td><td><span lang="zh">数量</span></td><td><span lang="zh">原价（信用）</span></td></tr><tr><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td><span lang="zh">龙门币</span></td><td><span lang="en">1800</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="zh">龙门币</span></td><td><span lang="en">3600</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td><span lang="zh">家具零件</span></td><td><span lang="en">20</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td><span lang="zh">家具零件</span></td><td><span lang="en">25</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td><td><span lang="zh">招聘许可</span></td><td><span lang="en">1</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">加急许可×</span><span lang="en">1</span></td><td><span lang="zh">加急许可</span></td><td><span lang="en">1</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">赤金×</span><span lang="en">6</span></td><td><span lang="zh">赤金</span></td><td><span lang="en">6</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td><span lang="zh">基础作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">初级作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span></td><td><span lang="en">5</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span></td><td><span lang="en">3</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">碳×</span><span lang="en">5</span></td><td><span lang="zh">碳</span></td><td><span lang="en">5</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td><span lang="zh">碳素</span></td><td><span lang="en">3</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="zh">源岩</span></td><td><span lang="en">2</span></td><td><span lang="en">80</span></td></tr><tr><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td><span lang="zh">代糖</span></td><td><span lang="en">2</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td><span lang="zh">酯原料</span></td><td><span lang="en">2</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td><span lang="zh">异铁碎片</span></td><td><span lang="en">2</span></td><td><span lang="en">120</span></td></tr><tr><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td><span lang="zh">双酮</span></td><td><span lang="en">2</span></td><td><span lang="en">120</span></td></tr><tr><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td><span lang="zh">破损装置</span></td><td><span lang="en">2</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td><span lang="zh">固源岩</span></td><td><span lang="en">3</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="zh">糖</span></td><td><span lang="en">2</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td><span lang="zh">聚酸酯</span></td><td><span lang="en">2</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td><span lang="zh">异铁</span></td><td><span lang="en">2</span></td><td><span lang="en">240</span></td></tr><tr><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td><span lang="zh">酮凝集</span></td><td><span lang="en">2</span></td><td><span lang="en">240</span></td></tr><tr><td><span lang="zh">装置×</span><span lang="en">1</span></td><td><span lang="zh">装置</span></td><td><span lang="en">1</span></td><td><span lang="en">160</span></td></tr></table><table class="sheet" id="RKCXd8vx4owT0cxhVq1c5lFnnhd" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_3qqYsJ"><tr><td><span lang="zh">商品名称</span></td><td><span lang="zh">物品</span></td><td><span lang="zh">数量</span></td><td><span lang="zh">原价（信用）</span></td></tr><tr><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td><span lang="zh">龙门币</span></td><td><span lang="en">1800</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="zh">龙门币</span></td><td><span lang="en">3600</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td><span lang="zh">家具零件</span></td><td><span lang="en">20</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td><span lang="zh">家具零件</span></td><td><span lang="en">25</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td><td><span lang="zh">招聘许可</span></td><td><span lang="en">1</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">加急许可×</span><span lang="en">1</span></td><td><span lang="zh">加急许可</span></td><td><span lang="en">1</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">赤金×</span><span lang="en">6</span></td><td><span lang="zh">赤金</span></td><td><span lang="en">6</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td><span lang="zh">基础作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">初级作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span></td><td><span lang="en">5</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span></td><td><span lang="en">3</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">碳×</span><span lang="en">5</span></td><td><span lang="zh">碳</span></td><td><span lang="en">5</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td><span lang="zh">碳素</span></td><td><span lang="en">3</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="zh">源岩</span></td><td><span lang="en">2</span></td><td><span lang="en">80</span></td></tr><tr><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td><span lang="zh">代糖</span></td><td><span lang="en">2</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td><span lang="zh">酯原料</span></td><td><span lang="en">2</span></td><td><span lang="en">100</span></td></tr><tr><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td><span lang="zh">异铁碎片</span></td><td><span lang="en">2</span></td><td><span lang="en">120</span></td></tr><tr><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td><span lang="zh">双酮</span></td><td><span lang="en">2</span></td><td><span lang="en">120</span></td></tr><tr><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td><span lang="zh">破损装置</span></td><td><span lang="en">2</span></td><td><span lang="en">160</span></td></tr><tr><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td><span lang="zh">固源岩</span></td><td><span lang="en">3</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="zh">糖</span></td><td><span lang="en">2</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td><span lang="zh">聚酸酯</span></td><td><span lang="en">2</span></td><td><span lang="en">200</span></td></tr><tr><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td><span lang="zh">异铁</span></td><td><span lang="en">2</span></td><td><span lang="en">240</span></td></tr><tr><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td><span lang="zh">酮凝集</span></td><td><span lang="en">2</span></td><td><span lang="en">240</span></td></tr><tr><td><span lang="zh">装置×</span><span lang="en">1</span></td><td><span lang="zh">装置</span></td><td><span lang="en">1</span></td><td><span lang="en">160</span></td></tr></table><p class="text" id="doxcnUpbuqnHEiZ9RVisIZlvsfc"><span lang="zh">信用交易所中，除了干员讯使、嘉维尔、坚雷之外，共出售 </span><span lang="en">25</span><span lang="zh"> 种商品，其中龙门币和家具零件各有 </span><span lang="en">2</span><span lang="zh"> 种规格。</span></p><p class="text" id="doxcnJNtA9tDqrk1CyIoJyqshlf"><span lang="zh">在所有的 </span><span lang="en">25</span><span lang="zh"> 种商品中，有 </span><span lang="en">22</span><span lang="zh"> 种商品</span><span class="text-color-1"><span lang="zh">有明显的高低阶关系</span></span><span lang="zh">，将它们分为“</span><span class="text-color-1"><span lang="zh">低阶商品</span></span><span lang="zh">”和“</span><span class="text-color-1"><span lang="zh">高阶商品</span></span><span lang="zh">”两组，每组各 </span><span lang="en">11</span><span lang="zh"> 种商品。</span></p><p class="text" id="doxcnthg1bPGrAK4eFsaQSpdupe"><span lang="zh">“低阶商品”和“高阶商品”统称为“</span><span class="text-color-1"><span lang="zh">分等阶商品</span></span><span lang="zh">”。</span></p><p class="text" id="doxcndkZ7DYW0JKbyHogTUFMJUe"><span lang="zh">另外 </span><span lang="en">3</span><span lang="zh"> 种商品没有高低阶关系，将它们称为“</span><span class="text-color-1"><span lang="zh">不分等阶商品</span></span><span lang="zh">”。</span></p><table class="sheet" id="X6TId1L1nogkpXx1twtc76A3nFE" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_7hcdnX"><tr><td colspan="4"><span lang="zh">分等阶商品</span></td><td colspan="2" rowspan="2"><span lang="zh">不分等阶商品</span></td></tr><tr><td colspan="2"><span lang="zh">低阶商品</span></td><td colspan="2"><span lang="zh">高阶商品</span></td></tr><tr><td></td><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td></tr><tr><td></td><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td></td><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td></td><td><span lang="zh">加急许可×</span><span lang="en">1</span></td></tr><tr><td></td><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td></tr><tr><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">碳×</span><span lang="en">5</span></td><td></td><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td></td><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td></td><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td></td><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td></td><td><span lang="zh">装置×</span><span lang="en">1</span></td><td></td><td></td></tr></table><table class="sheet" id="YLRFdLbgToaF45x3GgrcYbCvnvb" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_KIgZeK"><tr><td colspan="2"><span lang="zh">分等阶商品</span></td><td rowspan="2"><span lang="zh">不分等阶商品</span></td></tr><tr><td><span lang="zh">低阶商品</span></td><td><span lang="zh">高阶商品</span></td></tr><tr><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td></tr><tr><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td><span lang="zh">加急许可×</span><span lang="en">1</span></td></tr><tr><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td></tr><tr><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td></td></tr><tr><td><span lang="zh">碳×</span><span lang="en">5</span></td><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td></td></tr><tr><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td></td></tr><tr><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td><span lang="zh">装置×</span><span lang="en">1</span></td><td></td></tr></table><table class="sheet" id="EQ9Ed1r9WoPnWLxQZCwckN8JnQf" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_UmdSLf"><tr><td colspan="2"><span lang="zh">分等阶商品</span></td><td rowspan="2"><span lang="zh">不分等阶商品</span></td></tr><tr><td><span lang="zh">低阶商品</span></td><td><span lang="zh">高阶商品</span></td></tr><tr><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td></tr><tr><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td><span lang="zh">加急许可×</span><span lang="en">1</span></td></tr><tr><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td></tr><tr><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td></td></tr><tr><td><span lang="zh">碳×</span><span lang="en">5</span></td><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td></td></tr><tr><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td></td></tr><tr><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td></td></tr><tr><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td><span lang="zh">装置×</span><span lang="en">1</span></td><td></td></tr></table><h3 class="h3 auto-numbering" id="doxcn36pKt8f4nWqQ78KcKeHE3f"><span lang="zh">数据来源</span></h3><p class="text" id="doxcnmXfGNROTKO6QBThHZTXGIb"><a href="https://space.bilibili.com/37179776" target="_blank"><span lang="en">BioHazard</span></a><span lang="zh">、</span><a href="https://space.bilibili.com/10057492" target="_blank"><span lang="en">Zirunwang</span></a><span lang="zh"> 等博士于 </span><span lang="en">2023</span><span lang="zh">-</span><span lang="en">11</span><span lang="zh">-</span><span lang="en">14</span><span lang="zh"> 至 </span><span lang="en">2024</span><span lang="zh">-</span><span lang="en">03</span><span lang="zh">-</span><span lang="en">12</span><span lang="zh"> 期间，收集了 </span><span lang="en">83</span><span lang="zh"> 个 </span><span lang="en">CN</span><span lang="zh"> 服务器账号的 </span><span lang="en">5879</span><span class="text-color-1"><span lang="zh"> </span></span><span lang="zh">张信用交易所截图。</span></p><figure class="figure-image" id="UaG9dYAy5o8KICxULsKcIR2UnYf" image-token="YA73b5v8doo4Yax15n3ccXAynAh"><img alt="图 4.　" class="image" image-token="YA73b5v8doo4Yax15n3ccXAynAh" src="images/YA73b5v8doo4Yax15n3ccXAynAh.png"></img><figcaption><span lang="zh">图 </span><span lang="en">4.</span><span lang="zh">　</span></figcaption></figure><div class="callout-outer" id="doxcn3HqnhP6ihkVbzdpmDwCQxg"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcn4uJveb9hczeicMtCLgX5jh"><span lang="zh">账号信息以及原始数据可以在 </span><a href="https://h089spg07ll.feishu.cn/sheets/PrFgsuzMzhUbQkt25kncDWW9nZb?sheet=3VEhf6" target="_blank"><span class="doc-logo"><svg data-icon="FileLinkWordOutlined" fill="none" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 3h12.595c.93 0 1.806.355 2.439.96A3.07 3.07 0 0 1 20 6.176V21H7.405a3.53 3.53 0 0 1-2.439-.96A3.068 3.068 0 0 1 4 17.823V3ZM3 1a1 1 0 0 0-1 1v15.823c0 1.373.57 2.69 1.583 3.66A5.529 5.529 0 0 0 7.405 23H21a1 1 0 0 0 1-1V6.176a5.07 5.07 0 0 0-1.583-3.66A5.53 5.53 0 0 0 16.595 1H3Z" fill="currentColor"></path><path d="M6.75 8a1 1 0 0 1 1-1h8.5a1 1 0 1 1 0 2h-8.5a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h8.5a1 1 0 1 1 0 2h-8.5a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h4.5a1 1 0 1 1 0 2h-4.5a1 1 0 0 1-1-1Z" fill="currentColor"></path></svg></span><span lang="zh">信用商店统计</span></a><span lang="zh"> 云文档中找到。感兴趣的博士可以下载文档，进行研究分析。</span></p></div></div><h3 class="h3 auto-numbering" id="doxcngGLyI6D0rGt8Kr2bCvwTyb"><span lang="zh">信用交易所的“质量”与账号的关系</span></h3><p class="text" id="doxcngkkZpfys90VQrnFL7mg5Rg"><span lang="zh">有小号的博士很容易发现，成熟的老账号与新创建的账号的信用交易所的“风格”截然不同。</span><span class="text-color-1"><span lang="zh">新账号</span></span><span lang="zh">的信用交易所中</span><span class="text-color-1"><span lang="zh">低阶商品</span></span><span lang="zh">的占比明显比老账号的</span><span class="text-color-1"><span lang="zh">更高</span></span><span lang="zh">；而</span><span class="text-color-1"><span lang="zh">老账号</span></span><span lang="zh">的</span><span class="text-color-1"><span lang="zh">高阶商品</span></span><span lang="zh">的占比明显比新账号的</span><span class="text-color-1"><span lang="zh">更高</span></span><span lang="zh">。</span></p><p class="text" id="doxcnSv5fRK1GvqGd15SfXcWwlb"><span lang="zh">我们把“高阶商品占比高，低阶商品占比低”称为信用交易所“质量高”，反过来则称为“质量低”。</span></p><p class="text" id="doxcnIdnWbWVhbbP4ISYaZgLgSR"><span lang="zh">什么因素影响了信用交易所的“质量”呢？</span></p><p class="text" id="doxcnnYoc6TzNTy7IxrzZoZDqG8"><a href="https://www.youtube.com/@PeterYR" target="_blank"><span lang="en">PeterYR</span></a><span lang="zh"> 于 </span><span lang="en">2020</span><span lang="zh"> 年秋在 </span><a href="https://docs.google.com/document/d/1KNvLXeAWxPvbqqrU-F7oZvNNiS7IERY-Yf8sRcDL0mY" target="_blank"><span lang="en">Calculating</span><span lang="zh"> </span><span lang="en">Friend</span><span lang="zh"> </span><span lang="en">Credits</span></a><span lang="zh"> 中</span><span class="text-color-1"><span lang="zh">猜测</span></span><span lang="zh">，控制中枢的等级影响信用交易所的“质量”。</span></p><blockquote id="doxcnZlfcB8XrvAF4dIv5BBncjg"><div class="grid-container" id="doxcnmqBEY8PWT1ofS2vjAtrSxg"><div class="grid-column" id="doxcnOu40uvK0bF0AuzC8UU0bGf" style="flex: 60%;"><p class="text" id="doxcn4pQRP2MWnSAgnzeABUijxS"><span lang="en">These</span><span lang="zh"> </span><span lang="en">simple</span><span lang="zh"> </span><span lang="en">averages</span><span lang="zh"> </span><span lang="en">are</span><span lang="zh"> </span><span lang="en">also</span><span lang="zh"> </span><span lang="en">unweighted.</span><span lang="zh"> </span><span lang="en">However,</span><span lang="zh"> </span><span lang="en">offers</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">shop</span><span lang="zh"> </span><span lang="en">have</span><span lang="zh"> </span><strong><span lang="en">varying</span><span lang="zh"> </span><span lang="en">rates</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">appearance</span></strong><span lang="en">.</span><span lang="zh"> </span><span lang="en">This</span><span lang="zh"> </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">very</span><span lang="zh"> </span><span lang="en">noticeable</span><span lang="zh"> </span><span lang="en">if</span><span lang="zh"> </span><span lang="en">you</span><span lang="zh"> </span><span lang="en">have</span><span lang="zh"> </span><span lang="en">alt</span><span lang="zh"> </span><span lang="en">accounts:</span><span lang="zh"> </span><span lang="en">new</span><span lang="zh"> </span><span lang="en">accounts</span><span lang="zh"> </span><span lang="en">will</span><span lang="zh"> </span><span lang="en">get</span><span lang="zh"> </span><span lang="en">many</span><span lang="zh"> </span><span lang="en">tier</span><span lang="zh"> </span><span lang="en">1</span><span lang="zh"> </span><span lang="en">materials</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">their</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">shops,</span><span lang="zh"> </span><span lang="en">while</span><span lang="zh"> </span><span lang="en">veteran</span><span lang="zh"> </span><span lang="en">accounts</span><span lang="zh"> </span><span lang="en">rarely</span><span lang="zh"> </span><span lang="en">see</span><span lang="zh"> </span><span lang="en">them</span><span lang="zh"> </span><span lang="en">at</span><span lang="zh"> </span><span lang="en">all.</span><span lang="zh"> </span><u><span lang="en">I</span><span lang="zh"> </span><span lang="en">suspect</span><span lang="zh"> </span><span lang="en">that</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">level</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">player</span><span lang="zh">'</span><span lang="en">s</span><span lang="zh"> </span><span lang="en">Control</span><span lang="zh"> </span><span lang="en">Center</span><span lang="zh"> </span><span lang="en">affects</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">offers</span><span lang="zh"> </span><span lang="en">that</span><span lang="zh"> </span><span lang="en">show</span><span lang="zh"> </span><span lang="en">up,</span><span lang="zh"> </span><span lang="en">though</span><span lang="zh"> </span><span lang="en">I</span><span lang="zh"> </span><span lang="en">don</span><span lang="zh">'</span><span lang="en">t</span><span lang="zh"> </span><span lang="en">have</span><span lang="zh"> </span><span lang="en">any</span><span lang="zh"> </span><span lang="en">concrete</span><span lang="zh"> </span><span lang="en">evidence.</span></u><span lang="zh"> </span><span lang="en">Regardless,</span><span lang="zh"> </span><span lang="en">by</span><span lang="zh"> </span><span lang="en">taking</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">simple</span><span lang="zh"> </span><span lang="en">average</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">all</span><span lang="zh"> </span><span lang="en">possible</span><span lang="zh"> </span><span lang="en">offers,</span><span lang="zh"> </span><span lang="en">these</span><span lang="zh"> </span><span lang="en">simple</span><span lang="zh"> </span><span lang="en">calculations</span><span lang="zh"> </span><span lang="en">assume</span><span lang="zh"> </span><span lang="en">all</span><span lang="zh"> </span><span lang="en">offers</span><span lang="zh"> </span><span lang="en">appear</span><span lang="zh"> </span><span lang="en">equally</span><span lang="zh"> </span><span lang="en">as</span><span lang="zh"> </span><span lang="en">often,</span><span lang="zh"> </span><span lang="en">resulting</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">more</span><span lang="zh"> </span><span lang="en">inaccuracy.</span></p></div><div class="grid-column" id="doxcnXRUrAOFArxlgrAFnNfe2Gf" style="flex: 40%;"><p class="text" id="doxcnL4XV7BLgstVy6ajow5wXjg"><span lang="zh">这些简单平均法也是未考虑权重的。然而，信用交易所中商品的出现频率各不相同。如果你有小号，这一点非常明显：新账号在信用交易所中会看到很多 </span><span lang="en">T1</span><span lang="zh"> 精英材料，而老账号几乎看不到这些材料。</span><u><span lang="zh">我怀疑玩家的控制中枢等级会影响出现的商品种类，尽管我没有确凿的证据。</span></u><span lang="zh">无论如何，通过简单地对所有可能的商品取平均值，这些简单的计算假设所有商品出现的频率相同，这导致了更大的不准确性。</span></p></div></div></blockquote><p class="text" id="doxcnUTQy5W56rSrBbRoatRjcEe"><span lang="zh">根据我们的统计数据，</span><a href="https://www.youtube.com/@PeterYR" target="_blank"><span lang="en">PeterYR</span></a><span lang="zh"> 的猜测是不对的。信用交易所的“质量”与控制中枢等级、会客室等级、加工站等级、宿舍总等级等基建的因素</span><span class="text-color-1"><span lang="zh">都不相关</span></span><span lang="zh">。在我们认为可能影响信用交易所“质量”的许多变量中，</span><strong><span class="text-color-1"><span lang="zh">主线进度</span></span></strong><strong><span lang="zh">这一变量与信用交易所的“质量”呈现出了</span></strong><strong><span class="text-color-1"><span lang="zh">最明显的相关性</span></span></strong><strong><span lang="zh">。</span></strong></p><p class="text" id="doxcnMspWDdsXo5haYOzF6BeBbg"><span lang="zh">具体地，使用我们的统计数据，绘制出散点图。</span></p><figure class="figure-image" id="Na8ddSLzsoxUbtxQOIlcBOBinPb" image-token="T19qb4fcWoVAL4xGFhocFcMDnWf"><img alt="图 5.　高阶商品占分等阶商品与控制中枢等级的关系" class="image" image-token="T19qb4fcWoVAL4xGFhocFcMDnWf" src="images/T19qb4fcWoVAL4xGFhocFcMDnWf.png"></img><figcaption><span lang="zh">图 </span><span lang="en">5.</span><span lang="zh">　高阶商品占分等阶商品与控制中枢等级的关系</span></figcaption></figure><figure class="figure-image" id="GAi5dY05hotc12xS1C1cTEvnnke" image-token="GaUibVocLonhLIxUXfMcXDgJnGf"><img alt="图 6.　高阶商品占分等阶商品与主题曲通关作战数量的关系" class="image" image-token="GaUibVocLonhLIxUXfMcXDgJnGf" src="images/GaUibVocLonhLIxUXfMcXDgJnGf.png"></img><figcaption><span lang="zh">图 </span><span lang="en">6.</span><span lang="zh">　高阶商品占分等阶商品与主题曲通关作战数量的关系</span></figcaption></figure><p class="text" id="doxcnCYWsgkldJEtsRIuNpgsNTc"><span lang="zh">根据我们的统计数据，</span></p><ol><li class="ordered" id="doxcngNcFlZyKFE3X3ZUjM8pIJO"><span lang="zh">未通关主题曲 </span><span lang="en">1</span><span lang="zh">-</span><span lang="en">7</span><span lang="zh"> 的的情况下，信用交易所中不会出现高阶商品；</span></li><li class="ordered" id="doxcnbjHToZRkdOxCLTQwmpTwhb"><span lang="zh">通关主题曲 </span><span lang="en">1</span><span lang="zh">-</span><span lang="en">7</span><span lang="zh">，但未通关 </span><span lang="en">3</span><span lang="zh">-</span><span lang="en">8</span><span lang="zh"> 的情况下，信用交易所中</span><span class="text-color-1"><span lang="zh">高阶商品占分等阶商品的比例</span></span><span lang="zh">随着</span><span class="text-color-1"><span lang="zh">主题曲通关的作战数量</span></span><span lang="zh">的增加呈现</span><span class="text-color-1"><span lang="zh">上升</span></span><span lang="zh">趋势。</span></li><li class="ordered" id="doxcntQN23Ou50rnWpqBmQznGac"><span lang="zh">通关主题曲 </span><span lang="en">3</span><span lang="zh">-</span><span lang="en">8</span><span lang="zh"> 之后，高阶商品占分等阶商品的比例不再呈现上升趋势。</span></li></ol><p class="text" id="doxcne0YOPQztDzlsP6SHTsyLGg"><span lang="zh">在统计到的的 </span><span lang="en">5879</span><span lang="zh"> 个商店中，有 </span><span class="text-color-1"><span lang="en">3977</span><span lang="zh"> </span></span><span lang="zh">个商店来自已通关主题曲 </span><span lang="en">3</span><span lang="zh">-</span><span lang="en">8</span><span lang="zh"> 的账号。</span></p><h3 class="h3 auto-numbering" id="doxcn73qZvWwA03XK74dO2nre1g"><span lang="zh">信用交易所商品的经验分布</span></h3><p class="text" id="doxcnZO1g0bsFZCZnBBeRjCPCTb"><span lang="zh">由于信用交易所有 </span><span lang="en">10</span><span lang="zh"> 个栏位，可能出现的商品有 </span><span lang="en">25</span><span lang="zh"> 种，折扣有 </span><span lang="en">5</span><span lang="zh"> 种，故至多有</span><span class="equation">\((25 \cdot 5)^{10}\)</span><span lang="zh">种可能的商店。</span></p><p class="text" id="doxcnBrZbV02GlFICc2JAV7CMJb"><span lang="zh">不管这个数有多大，我们只关心它是一个</span><span class="text-color-1"><span lang="zh">有限数</span></span><span lang="zh">。</span></p><p class="text" id="doxcnV2qV5O1mTXBbRDTE2nqBPe"><span lang="zh">我们</span><span class="text-color-1"><span lang="zh">假设</span></span><span lang="zh">通关主题曲 </span><span lang="en">3</span><span lang="zh">-</span><span lang="en">8</span><span lang="zh"> 之后，</span><span class="text-color-1"><span lang="zh">每日生成商店的时候</span></span><span lang="zh">，是从所有</span><span class="equation">\((25 \cdot 5)^{10}\)</span><span lang="zh">种可能里面，</span><span class="text-color-1"><span lang="zh">按照固定的概率抽取一个</span></span><span lang="zh">。</span></p><p class="text" id="doxcnsxcdXyDi0OGlxgUo6ovQZe"><span lang="zh">由于具体的生成算法不得而知，只能使用统计结果来估计总体。我们</span><span class="text-color-1"><span lang="zh">近似地认为</span></span><span lang="zh">通关主题曲 </span><span lang="en">3</span><span lang="zh">-</span><span lang="en">8</span><span lang="zh"> 之后商店的生成算法是从收集得到的 </span><span class="text-color-1"><span lang="en">3977</span><span lang="zh"> 个样本中</span></span><span lang="zh">，</span><span class="text-color-1"><span lang="zh">等概率</span></span><span lang="zh">地抽取一个。</span></p><h2 class="h2 auto-numbering" id="doxcnoRyqGrxwxLM30rhrZB2HVf"><span lang="zh">朴素的购买策略</span></h2><p class="text" id="A8dpdBXCvoYQ1ixSMBdchgebn7d"><span lang="zh">不同的博士可能有不同的方式来决定购买信用交易所中的哪些商品。这里列出几种“朴素”的购买策略。</span></p><ol><li class="ordered" id="doxcnxuYuZYeXv14hV24Me1KFNc"><strong><span lang="zh">啥都不买</span></strong></li><li class="ordered" id="doxcnkpWfqDGN1KwaMP5pKg5WBf"><strong><span lang="zh">随机购买</span></strong></li><li class="ordered" id="doxcnfubSgVEcgikVgUQRyf7gIf"><strong><span lang="zh">从左到右购买</span></strong><p class="text" id="doxcnCnTQeciu1SxEBULXi9Wpjf"><span lang="zh">一般来说，折扣力度较大的商品会更靠前，从左到右购买基本上相当于是</span><span class="text-color-1"><span lang="zh">按折扣顺序购买</span></span><span lang="zh">。</span></p></li><li class="ordered" id="doxcndhBC6G1tT1CP3iUtIXuatq"><strong><span lang="zh">设定黑白名单，先购买白名单中的物品，再从左到右购买，不购买黑名单中的物品</span></strong><p class="text" id="doxcnefsUXW1JkKRYF5CJHUrel2"><a href="https://maa.plus/" target="_blank"><span lang="en">MAA</span></a><span lang="zh"> 使用的是这个策略。</span></p><p class="text" id="doxcnzgqpJWmGmNO9txNaZj7Grd"><span lang="zh">这类“按某个顺序购买”的策略（包括下面的按性价比顺序购买的策略）都有一些变体。比如停止购买的时机可以是“直到不能购买为止”，也可以是“直到信用小于等于 </span><span lang="en">300</span><span lang="zh"> 为止”。</span></p><p class="text" id="doxcnYYCuwZsGVvkSyymJIPL76b"><span lang="zh">“设定黑白名单”的策略还有一种变体，即可以选择是否在信用大于 </span><span lang="en">300</span><span lang="zh"> 时无视黑名单继续购买。</span></p></li><li class="ordered" id="doxcnuprGOFZRkgsjgGgy7xULud"><strong><span lang="zh">按</span></strong><strong><span class="text-color-1"><span lang="zh">性价比</span></span></strong><strong><span lang="zh">从高到低购买</span></strong><p class="text" id="doxcnPqkxarUom7eCbtWQjrt4Xe"><span lang="zh">我们可以为每种物品赋予</span><span class="text-color-1"><span lang="zh">价值</span></span><span lang="zh">（通常而言是把物品折算成理智，即“</span><span class="text-color-1"><span lang="zh">理智价值</span></span><span lang="zh">”），把</span><span class="text-color-6"><span lang="zh">价值</span></span><span lang="zh">除以</span><span class="text-color-6"><span lang="zh">现价</span></span><span lang="zh">计算出每个商品的性价比，然后</span><span class="text-color-1"><span lang="zh">按性价比从高到低购买</span></span><span lang="zh">。</span></p><p class="text" id="doxcn5T5TYcSI0OLeOynHr9lYPd"><span lang="zh">物品的理智价值可以参考 </span><a href="https://ark.yituliu.cn/material/value" target="_blank"><span lang="zh">明日方舟一图流 − 物品价值表</span></a><span lang="zh">。信用交易所的商品性价比可以在 </span><a href="https://ark.yituliu.cn/material/store" target="_blank"><span lang="zh">明日方舟一图流 − 商店性价比</span></a><span lang="zh"> 中找到。</span></p><figure class="figure-image" id="TwJWdOLazoe1TRxy27Ucxg6xn8e" image-token="OMNnb1Hqao1NKWxQxOZcs7Zenfb"><img alt="图 7.　2025-01-15 明日方舟一图流 − 物品价值表" class="image" image-token="OMNnb1Hqao1NKWxQxOZcs7Zenfb" src="images/OMNnb1Hqao1NKWxQxOZcs7Zenfb.png"></img><figcaption><span lang="zh">图 </span><span lang="en">7.</span><span lang="zh">　</span><span lang="en">2025</span><span lang="zh">-</span><span lang="en">01</span><span lang="zh">-</span><span lang="en">15</span><span lang="zh"> 明日方舟一图流 − 物品价值表</span></figcaption></figure><figure class="figure-image" id="doxcnUMfymqdcwaGW1HO2Kjld5e" image-token="YYf3b13sToCtyTxfgdycqjcVnze"><img alt="图 8.　2024-07-25 明日方舟一图流 信用交易所性价比" class="image" image-token="YYf3b13sToCtyTxfgdycqjcVnze" src="images/YYf3b13sToCtyTxfgdycqjcVnze.png"></img><figcaption><span lang="zh">图 </span><span lang="en">8.</span><span lang="zh">　</span><span lang="en">2024</span><span lang="zh">-</span><span lang="en">07</span><span lang="zh">-</span><span lang="en">25</span><span lang="zh"> 明日方舟一图流 信用交易所性价比</span></figcaption></figure><div class="callout-outer" id="doxcndis7dNAlc9ojKgca2Jfz7d"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnp94ZPsBHreR6rv4GpxMTHf"><span lang="zh">一图流展示的性价比的计算公式为：性价比 = 理智价值 </span><span lang="en">/</span><span lang="zh"> 原价 * </span><span lang="en">100</span><span lang="zh">。</span></p><p class="text" id="EAcbdBRe1osTZexWKb6ce6llnHc"><span lang="zh">一图流展示的性价比是按商品的</span><span class="text-color-1"><span lang="zh">原价</span></span><span lang="zh">计算的，使用时只需根据折扣乘以一个系数即可。例如，若折扣为 -</span><span lang="en">75%</span><span lang="zh">，则把</span><span class="text-color-6"><span lang="zh">按原价计算的性价比</span></span><span class="text-color-1"><span lang="zh">乘 </span><span lang="en">4</span><span lang="zh"> </span></span><span lang="zh">即可得到</span><span class="text-color-6"><span lang="zh">按现价计算的性价比</span></span><span lang="zh">。</span></p></div></div></li></ol><p class="text" id="doxcnDvIRSeOtMDozwknUMYbaCg"><span lang="zh">相比于从左到右购买，按性价比从高到低购买的好处是显而易见的。对于许多博士来说，家具零件和加急许可的价值非常低，即使它们的折扣力度很大，也不愿意购买；而招聘许可的价值很高，即使不打折也倾向于购买。</span></p><p class="text" id="doxcnT0OVrspTbzBuPM25nIq2yg"><span lang="zh">“按性价比从高到低购买”的策略看上去已经比较好了，但是实际操作过程中可能会遇到这样的纠结情况：</span></p><ul><li class="bullet" id="doxcn3CEiPmOOIoG9yuIG1RlHwe"><span lang="zh">博士甲每日能获得的信用比较多，目前剩余 </span><span lang="en">350</span><span lang="zh"> 信用，未购买的商品中，性价比最高的商品是原价的碳素，不知道该不该购买。</span></li><li class="bullet" id="doxcnvtxRoixy4t3FBIzJOj5bkj"><span lang="zh">博士乙每日能获得的信用比较少，目前剩余 </span><span lang="en">280</span><span lang="zh"> 信用，未购买的商品中，性价比最高的商品是原价的双酮，不知道该不该购买。</span></li></ul><p class="text" id="doxcnokgf9SEhO1HA1Y5JxvzVpf"><span lang="zh">“按性价比从高到低购买”的策略并不能直接回答类似的问题，我们需要一个更加详尽的策略来决定到底应该购买信用交易所中的哪些商品。</span></p><h1 class="h1 auto-numbering" id="OIVydEXMloeDQ7xtUMMcyfopncc"><span lang="zh">新方法</span></h1><h2 class="h2 auto-numbering" id="doxcnOTzUBWJHHZp3bFKo162M3d"><span lang="zh">信用交易所最优购买策略</span></h2><p class="text" id="doxcnzF9MjI4PXSwW4PhUqk0rif"><span lang="zh">为了讨论信用交易所最优购买策略，我们</span><strong><span lang="zh">需要以下假设</span></strong><span lang="zh">：</span></p><ol><li class="ordered" id="doxcnPVFGBk8dnm2GdopLqQlhyd"><span lang="zh">假设每日生成商店的时候，是从若干种可能性中按照固定的概率抽取一个；</span></li><li class="ordered" id="doxcnzL51kfDYtkpGLjGgu23gHg"><span lang="zh">假设</span><span class="text-color-1"><span lang="zh">每日获得的信用数量固定</span></span><span lang="zh">，为</span><span class="equation">\(C\)</span><span lang="zh">；</span></li><li class="ordered" id="doxcnpqSomCYeOtxJL7Lu7PzQmg"><span lang="zh">假设</span><span class="text-color-1"><span lang="zh">每种物品被赋予了一个固定的价值</span></span><span lang="zh">。</span></li></ol><h3 class="h3 auto-numbering" id="doxcnckdgbvaAM0E30HXUiF2VFg"><span lang="zh">问题描述</span></h3><p class="text" id="doxcnuZcuBvaJ0eVHnH05ryB3sc"><span lang="zh">首先需要解释清楚什么是“最优策略”。</span></p><p class="text" id="doxcndyN2tEASq3jp5BY7s5qFof"><span lang="zh">直观地来说，</span><strong><span lang="zh">一个策略“</span></strong><strong><span class="text-color-1"><span lang="zh">优</span></span></strong><strong><span lang="zh">”指的是：按照这一策略，在未来很长一段时间内购买的物品的</span></strong><strong><span class="text-color-1"><span lang="zh">总价值高</span></span></strong><strong><span lang="zh">。</span></strong></p><p class="text" id="doxcnmab6BV4UfpYZfD7OMgOxRe"><span lang="zh">由于未来的商店是随机的，故上面说的“总价值高”通常在</span><span class="text-color-1"><span lang="zh">期望</span></span><span lang="zh">的意义下考虑。</span></p><hr id="doxcnNDx0nR3fYRPbjeM9SSoz1d"></hr><p class="text" id="doxcnTZSKtVcdgTP98r7uNVD0mh"><span lang="zh">先</span><strong><span lang="zh">定义“策略”</span></strong><span lang="zh">：</span><span class="text-color-1"><span lang="zh">策略</span></span><span class="equation text-color-1">\(F\)</span><span class="text-color-1"><span lang="zh">是一个函数</span></span><span lang="zh">，输入</span></p><ol><li class="ordered" id="doxcnhFHUpdqI6Td7lluMaHEKwe"><span lang="zh">当前是第几天，</span></li><li class="ordered" id="doxcnczEAipwAw3dXxr1DauG6tS"><span lang="zh">前一天继承下来的信用数量，</span></li><li class="ordered" id="doxcn2BK2LDqs36Zztc5RSXDkob"><span lang="zh">当天的 </span><span lang="en">10</span><span lang="zh"> 个商品的现价和价值，</span></li></ol><p class="text" id="doxcnmJDhfqkBznObOZrf6FLhRh"><span lang="zh">输出要购买哪些商品。</span></p><p class="text" id="doxcno6XYzfSZxGZTTemciD3Yxf"><span class="text-color-1"><span lang="zh">如果一个策略不会超支，则称为“可行策略”。</span></span></p><div class="callout-outer" id="doxcnY2LyTlj1SKsKRaPajmIEmh"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><ul><li class="bullet" id="HmafdqU2KonwAZxWVqAczEW6ncf"><span lang="zh">“不超支”指输出的要购买的</span><span class="text-color-5"><span lang="zh">商品总价</span></span><span class="text-color-6"><span lang="zh">小于等于</span></span><span class="text-color-5"><span lang="zh">前一天继承下来的信用数量</span></span><span lang="zh">加</span><span class="text-color-5"><span lang="zh">每日获得的信用数量</span></span></li><li class="bullet" id="doxcnY8Xh3C7IXJTmq6IthieJoe"><span lang="zh">“啥都不买”总是可行策略。</span></li><li class="bullet" id="RKjDdacjxoAYatxNVCFcaGvQnVg"><span lang="zh">我们定义的“策略”不具有随机性。固定一个输入，策略总是给出相同的输出。</span></li><li class="bullet" id="BPTYdowYKocU0YxosCqce1gHnAc"><span lang="zh">“当前是第几天”加入函数的输入是一个技术性的操作。我们暂时允许“天数”作为变量，以便于推导最优策略。</span></li></ul></div></div><div class="board" id="doxcnykEmG8BRSODo94G4AZVGZd"></div><hr id="doxcnxESeebMxEPKxBXbDI3c9bb"></hr><p class="text" id="doxcnXSVvRObkBPzpArQs6X4u4e"><strong><span lang="zh">如何评价策略的好坏？</span></strong></p><p class="text" id="doxcnllRkX7Ol1swIIs8wr2voHd"><span lang="zh">假设考虑的时间跨度是</span><span class="equation">\(N\)</span><span lang="zh">天。</span></p><p class="text" id="doxcnBSrDVzqCqX4Edp9KnIhZIb"><span class="equation">\(J_N(F)\)</span><span class="text-color-1"><span lang="zh">定义为</span></span><span lang="zh">：以策略</span><span class="equation">\(F\)</span><span lang="zh">运行</span><span class="equation">\(N\)</span><span lang="zh">天，购买的物品的</span><span class="text-color-1"><span lang="zh">总价值的期望</span></span><span lang="zh">。</span></p><p class="text" id="doxcnrS61D3M4lsfETDG6OGabCd"><span class="equation">\(J_N(F)\)</span><span class="text-color-1"><span lang="zh">越大，说明策略越好。</span></span></p><p class="text" id="doxcn5ofpKgnlnw36wW8glQpymb"><span lang="zh">具体地，设</span><span class="equation">\(X_n\)</span><span lang="zh">是在策略</span><span class="equation">\(F\)</span><span lang="zh">下第</span><span class="equation">\(n\)</span><span lang="zh">天购买的物品的总价值。</span><span class="equation">\(X_n\)</span><span lang="zh">是随机变量。</span></p><p class="text" id="doxcn5GjBT2TkEntmWNm7JkUNBf"><span class="equation">\(J_N(F)\)</span><span lang="zh">定义为</span><span class="equation">\(\mathbb E (X_1 + \cdots + X_N)\)</span><span lang="zh">。</span></p><hr id="doxcnQYtHbkJpvNFmiOlelM8t3c"></hr><p class="text" id="doxcnSTeRVZOmVZG5T1yYAPCZmb"><strong><span lang="zh">要找</span></strong><strong><span class="text-color-1"><span lang="zh">最优策略</span></span></strong><strong><span lang="zh">，也就是要找一个</span></strong><strong><span class="text-color-1"><span lang="zh">可行策略</span></span></strong><span class="equation text-color-1">\(F\)</span><strong><span lang="zh">使得</span></strong><span class="equation">\(J_N(F)\)</span><strong><span lang="zh">最大。</span></strong></p><div class="callout-outer" id="doxcniGo2VFCHdDrVEfB7LhSl9g"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcn26dgoqa69vADb8NYZbk7Mu"><span lang="zh">时间跨度</span><span class="equation">\(N\)</span><span lang="zh">有限时，</span><span class="equation">\(J_N(F)\)</span><span lang="zh">是良定的且有限，并且由于所有可能的输入与所有可能的输出的个数都是有限的，策略全体的个数也是有限的；又因为存在可行策略，因此</span><span class="text-color-1"><span lang="zh">最优策略总是存在的</span></span><span lang="zh">。</span></p></div></div><h3 class="h3 auto-numbering" id="doxcn6uo7TNnoV2w6Y5AWt7tGJb"><span lang="zh">推导最优策略</span></h3><p class="text" id="doxcn7ilrllO8zgjDZbSzFTa3Jf"><span lang="zh">仍然假设考虑的时间跨度是</span><span class="equation">\(N\)</span><span lang="zh">天。</span></p><p class="text" id="doxcnnYFtNV3CYSapsAToBubPog"><span lang="zh">设第</span><span class="equation">\(n-1\)</span><span lang="zh">天留给第</span><span class="equation">\(n\)</span><span lang="zh">天的信用数量为</span><span class="equation">\(c_n (0 \le c_n \le 300)\)</span><span lang="zh">。</span></p><hr id="doxcndUe21KcwCTE05W9qkxpa9f"></hr><p class="text" id="doxcnmTD6mAtIQPvqBym0NxFCyc"><span class="equation">\(N = 1\)</span><span lang="zh">时，问题变成简单的 </span><span class="text-color-1"><span lang="en">01</span><span lang="zh"> 背包</span></span><span lang="zh">问题。即，在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种</span><span class="text-color-1"><span lang="zh">不超支</span></span><span lang="zh">的，使得购买的物品的</span><span class="text-color-1"><span lang="zh">总价值最大</span></span><span lang="zh">。</span></p><p class="text" id="doxcnAQSPrzQmDIBl1nOawoyc5g"><span lang="zh">从直观上来理解：</span><span class="equation">\(N=1\)</span><span lang="zh">意味着只考虑 </span><span lang="en">1</span><span lang="zh"> 天，不考虑第 </span><span lang="en">2</span><span lang="zh"> 天了，所以不用考虑“留信用给第 </span><span lang="en">2</span><span lang="zh"> 天”这件事情，因此只需要在这唯一考虑的 </span><span lang="en">1</span><span lang="zh"> 天里面“竭泽而渔”购买就行。</span></p><div class="callout-outer" id="doxcn4wikvIoGxJqh4UkafcaGPb"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnpP5Pxoj2DzdZDdURTkqVsh"><span lang="zh">证明：</span></p><p class="text" id="doxcnIILvEYt8V74zlV7rtIXc7e"><span class="equation">\(J_1(F) = \mathbb E (X_1)\)</span><span lang="zh">，按 </span><span lang="en">01</span><span lang="zh"> 背包问题考虑可以使</span><span class="equation">\(X_1\)</span><span lang="zh">在每个基本事件上都达到最大，从而</span><span class="equation">\(J_1(F)\)</span><span lang="zh">最大。</span></p></div></div><hr id="doxcnHNCENtiXqqr2yRQmO9Kd2b"></hr><p class="text" id="doxcn4KfffUNrMK91OVEdI6Ggaf"><span class="equation">\(N = 2\)</span><span lang="zh">时，总共考虑 </span><span lang="en">2</span><span lang="zh"> 天。</span></p><p class="text" id="doxcnQnJgnXD3X7pc6zeuooh8vh"><span lang="zh">第 </span><span lang="en">2</span><span lang="zh"> 天由于是最后一天，无论第 </span><span lang="en">1</span><span lang="zh"> 天留了多少信用给第 </span><span lang="en">2</span><span lang="zh"> 天，</span><span class="text-color-1"><span lang="zh">第 </span><span lang="en">2</span><span lang="zh"> 天</span></span><span lang="zh">都只需要</span><span class="text-color-1"><span lang="zh">按 </span><span lang="en">01</span><span lang="zh"> 背包问题考虑即可</span></span><span lang="zh">。而第 </span><span lang="en">1</span><span lang="zh"> 天的策略会复杂一点，因为第 </span><span lang="en">1</span><span lang="zh"> 天可以留一部分信用给第 </span><span lang="en">2</span><span lang="zh"> 天。</span></p><p class="text" id="doxcnvSevpZ3ibIor3GHIGpWtSe"><span lang="zh">假设</span><span class="equation">\(c_2 = c\)</span><span lang="zh">，则第 </span><span lang="en">2</span><span lang="zh"> 天有</span><span class="equation">\(c + C\)</span><span lang="zh">信用。</span><span class="text-color-1"><span lang="zh">遍历第 </span><span lang="en">2</span><span lang="zh"> 天所有可能的商店</span></span><span lang="zh">，按 </span><span class="text-color-1"><span lang="en">01</span><span lang="zh"> 背包问题</span></span><span lang="zh">求出第 </span><span lang="en">2</span><span lang="zh"> 天能购买的物品的</span><span class="text-color-1"><span lang="zh">总价值的最大值</span></span><span lang="zh">，即可求出第 </span><span lang="en">2</span><span lang="zh"> 天手握</span><span class="equation">\(c + C\)</span><span lang="zh">信用的情况下，能购买的物品的</span><span class="text-color-1"><span lang="zh">总价值的最大值的期望</span></span><span lang="zh">，记为</span><span class="equation">\(K_C^1(c)\)</span><span lang="zh">。</span></p><p class="text" id="doxcnQONbCs1MgdNnipaIRtQyhf"><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天的商店共有</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案。对于每种可能的购买方案，在第 </span><span lang="en">1</span><span lang="zh"> 天的商店已知的情况下，可以计算</span><span class="equation">\(J_2(F) = \mathbb E (X_1 + X_2) = X_1 + K_C^1(c_2)\)</span><span lang="zh">。</span></p><div class="callout-outer" id="doxcnFsKA550TDG9a2LTeQKxDDf"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnan3H1s7BjQ2w78pvwYGwOb"><span lang="zh">回忆</span><span class="equation">\(X_n\)</span><span lang="zh">是第</span><span class="equation">\(n\)</span><span lang="zh">天购买的物品的总价值，而在第 </span><span lang="en">2</span><span lang="zh"> 天用最优策略的情况下，</span><span class="equation">\(\mathbb E(X_2|c_2=c) = K_C^1(c)\)</span><span lang="zh">。</span></p></div></div><p class="text" id="doxcnMwQx5Rqp0xtWniDzntn8yh"><span lang="zh">因此，第 </span><span lang="en">1</span><span lang="zh"> 天只要在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中</span><span class="text-color-1"><span lang="zh">选一种不超支的，使得</span></span><span class="equation text-color-1">\(X_1 + K_C^1(c_2)\)</span><span class="text-color-1"><span lang="zh">最大</span></span><span lang="zh">即可。</span></p><hr id="doxcn9QzypspqgSoAfg0Vgmr6hg"></hr><p class="text" id="doxcnTVfpkBwwI1zP3P95Vp9lmd"><span class="equation">\(N = 3\)</span><span lang="zh">时，类似地，无论第 </span><span lang="en">2</span><span lang="zh"> 天留给第 </span><span lang="en">3</span><span lang="zh"> 天多少信用，</span><span class="text-color-1"><span lang="zh">第 </span><span lang="en">3</span><span lang="zh"> 天的最优策略一定是按 </span><span lang="en">01</span><span lang="zh"> 背包问题考虑</span></span><span lang="zh">。</span></p><p class="text" id="doxcn5mgEJYP3P52mAYogcJwNme"><span lang="zh">第 </span><span lang="en">2</span><span lang="zh"> 天的最优策略是什么呢？其实和</span><span class="equation">\(N=2\)</span><span lang="zh">时第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略一样（因为都是倒数第 </span><span lang="en">2</span><span lang="zh"> 天）。</span></p><p class="text" id="doxcn0zSIz3SQqQkBXnEGLKBEmh"><span lang="zh">仍沿用之前的符号</span><span class="equation">\(K_C^1(c)\)</span><span lang="zh">，但此时</span><span class="equation">\(K_C^1(c)\)</span><span lang="zh">表示的是</span><span class="text-color-1"><span lang="zh">第 </span><span lang="en">3</span><span lang="zh"> 天</span></span><span lang="zh">手握</span><span class="equation">\(c + C\)</span><span lang="zh">信用的情况下，能购买的物品的总价值的最大值的期望。</span></p><p class="text" id="doxcnYKLBofUzKuGi3mUbEkLwSe"><span lang="zh">第 </span><span lang="en">2</span><span lang="zh"> 天的最优策略是在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种不超支的，使得</span><span class="equation">\(X_2 + K_C^1(c_3)\)</span><span lang="zh">最大。</span></p><p class="text" id="doxcnv22DCMJw6gTRCohrIC569b"><span lang="zh">现在考虑第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略。</span></p><p class="text" id="doxcnpQzjCJxkT0auio8fN5WBXf"><span lang="zh">由于已知第 </span><span lang="en">2</span><span lang="zh"> 天的最优策略，假设</span><span class="equation">\(c_2 = c\)</span><span lang="zh">，</span><span class="text-color-1"><span lang="zh">遍历第 </span><span lang="en">2</span><span lang="zh"> 天所有可能的商店</span></span><span lang="zh">，按第 </span><span lang="en">2</span><span lang="zh"> 天的最优策略求出第 </span><span lang="en">2</span><span lang="zh"> 天到第 </span><span lang="en">3</span><span lang="zh"> 天能购买的物品的</span><span class="text-color-1"><span lang="zh">总价值的最大值的期望</span></span><span lang="zh">，记为</span><span class="equation">\(K_C^2(c)\)</span><span lang="zh">。即</span><span class="equation">\(K_C^2(c) = \mathbb E(X_2 + X_3 | c_2 = c) = \mathbb E (X_2 + K_C^1(c_3) | c_2 = c)\)</span></p><p class="text" id="doxcnXNSeYZywcOM6qamyS7lqug"><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略是在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种不超支的，使得</span><span class="equation">\(X_1 + K_C^2(c_2)\)</span><span lang="zh">最大。</span></p><hr id="doxcn1ykK3tdf3zxdNsQf4V67B3"></hr><p class="text" id="doxcn5X2MdTY18iaxPl0TnfHG9e"><span lang="zh">以此类推，当</span><span class="equation">\(N = m\)</span><span lang="zh">时，第 </span><span lang="en">2</span><span lang="zh"> 天的最优策略已经在</span><span class="equation">\(N = m - 1\)</span><span lang="zh">时求出。假设</span><span class="equation">\(c_2 = c\)</span><span lang="zh">，按第 </span><span lang="en">2</span><span lang="zh"> 天的最优策略求出第 </span><span lang="en">2</span><span lang="zh"> 天到第</span><span class="equation">\(m\)</span><span lang="zh">天能购买的物品的总价值的最大值的期望，记为</span><span class="equation">\(K_C^{m-1}(c)\)</span><span lang="zh">，</span><span class="equation">\(K_C^{m-1}(c) = \mathbb{E}(X_2 + \cdots + X_m | c_2 = c) = \mathbb{E}(X_2 + K_C^{m-2}(c_3) | c_2 = c)\)</span><span lang="zh">。</span></p><p class="text" id="doxcnOUQtrU5MjdRj9GsYEv88xf"><span lang="zh">此时</span><span class="equation">\(\mathbb E (X_1 + \cdots + X_m) = \mathbb E (X_1 + K_C^{m-1}(c_2))\)</span><span lang="zh">。</span></p><p class="text" id="doxcnfNh8DpfBX7lktzovE0DlRe"><span lang="zh">因此第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略是在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种，使得</span><span class="equation">\(X_1 + K_C^{m-1}(c_2)\)</span><span lang="zh">最大。</span></p><h3 class="h3 auto-numbering" id="doxcniXqoamiO7Ka5wbEY3qTiId"><span lang="zh">信用交易所最优购买策略</span></h3><p class="text" id="doxcnF16KoP1qrXeUofYRUppOif"><span lang="zh">综合上述讨论，我们把信用交易所最优购买策略完整地写出来。</span></p><ol><li class="ordered" id="doxcnO6JVf6W8He08DUM2PocyDh"><span lang="zh">“最优策略”定义为使得</span><span class="equation">\(N\)</span><span lang="zh">天内购买的物品的</span><span class="text-color-1"><span lang="zh">总价值的期望最大</span></span><span lang="zh">的</span><span class="text-color-1"><span lang="zh">可行策略</span></span><span lang="zh">。</span></li><li class="ordered" id="doxcnOKQEben4muhm7M9tHKwYxd"><span lang="zh">第</span><span class="equation">\(N\)</span><span lang="zh">天的最优策略是：在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种不超支的，使得第</span><span class="equation">\(N\)</span><span lang="zh">天购买的物品的总价值最大，即 </span><span lang="en">01</span><span lang="zh"> 背包问题。</span></li><li class="ordered" id="doxcn8Z0X7JSG6OQslr3ulCXzGV"><span lang="zh">设第</span><span class="equation">\(N-1\)</span><span lang="zh">天留给第</span><span class="equation">\(N\)</span><span lang="zh">天的信用数量为</span><span class="equation">\(c_N = c\)</span><span lang="zh">，定义</span><span class="equation">\(K_C^1(c)\)</span><span lang="zh">为第</span><span class="equation">\(N\)</span><span lang="zh">天手握</span><span class="equation">\(c+C\)</span><span lang="zh">信用的情况下，第</span><span class="equation">\(N\)</span><span lang="zh">天能购买的物品的总价值的最大值的期望（按照第</span><span class="equation">\(N\)</span><span lang="zh">天的最优策略计算）。</span></li><li class="ordered" id="doxcnUANPDz1CXijVfs5KbkjDoc"><span lang="zh">第</span><span class="equation">\(N-1\)</span><span lang="zh">天的最优策略是：在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种不超支的，使得</span><span class="text-color-6"><span lang="zh">第</span></span><span class="equation text-color-6">\(N-1\)</span><span class="text-color-6"><span lang="zh">天购买的物品的总价值</span></span><span lang="zh">与</span><span class="equation">\(K_C^1(c_N)\)</span><span lang="zh">的和最大。</span></li><li class="ordered" id="doxcnW7XuEvu9Q0y3JNVLi5dxse"><span lang="zh">假设已经求出第</span><span class="equation">\(N - n + 1\)</span><span lang="zh">天（倒数第</span><span class="equation">\(n\)</span><span lang="zh">天）的最优策略以及对应的</span><span class="equation">\(K_C^{n-1}(c)\)</span><span lang="zh">。设倒数第</span><span class="equation">\(n + 1\)</span><span lang="zh">天留给倒数第</span><span class="equation">\(n\)</span><span lang="zh">天的信用数量为</span><span class="equation">\(c_{N-n+1} = c\)</span><span lang="zh">，定义</span><span class="equation">\(K_C^n(c)\)</span><span lang="zh">为倒数第</span><span class="equation">\(n\)</span><span lang="zh">天手握</span><span class="equation">\(c+C\)</span><span lang="zh">信用的情况下，倒数第</span><span class="equation">\(n\)</span><span lang="zh">天到倒数第 </span><span lang="en">1</span><span lang="zh"> 天能购买的物品的总价值的最大值的期望。</span></li><li class="ordered" id="doxcnC6hysgnaaHWOLKSN7TXcZb"><span lang="zh">倒数第</span><span class="equation">\(n + 1\)</span><span lang="zh">天的最优策略是：在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种不超支的，使得</span><span class="text-color-6"><span lang="zh">倒数第</span></span><span class="equation text-color-6">\(n + 1\)</span><span class="text-color-6"><span lang="zh">天购买的物品的总价值</span></span><span lang="zh">与</span><span class="equation">\(K_C^n(c_{N-n+1})\)</span><span lang="zh">的和最大。</span></li><li class="ordered" id="doxcnRFg1cOvcg9Ygh8tuBjf8me"><span lang="zh">重复步骤 </span><span lang="en">5</span><span lang="zh"> 和 </span><span lang="en">6</span><span lang="zh">，求出</span><span class="equation">\(K_C^1, \cdots, K_C^{N-1}\)</span><span lang="zh">。</span></li><li class="ordered" id="doxcnUCuUtiDq9ToTmevnNneUKf"><strong><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略是：在</span></strong><span class="equation">\(2^{10}\)</span><strong><span lang="zh">种购买方案中选一种不超支的，使得</span></strong><strong><span class="text-color-6"><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天购买的物品的总价值</span></span></strong><strong><span lang="zh">与</span></strong><span class="equation">\(K_C^{N-1}(c_2)\)</span><strong><span lang="zh">的和最大。</span></strong></li></ol><div class="callout-outer" id="doxcnOkJ8uFWi1rtxFHv2vGe8Hg"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnquxk7QPH8y1lRFQRSWkNOf"><span lang="zh">回忆</span><span class="equation">\(c_2\)</span><span lang="zh">是第 </span><span lang="en">1</span><span lang="zh"> 天留给第 </span><span lang="en">2</span><span lang="zh"> 天的信用数量，即第 </span><span lang="en">1</span><span lang="zh"> 天的剩余信用与 </span><span lang="en">300</span><span lang="zh"> 的较小值。</span></p></div></div><h3 class="h3 auto-numbering" id="doxcnUJUU3treGfpmNVomX2mL8b"><span lang="zh">关于</span><span class="equation">\(K_C^n\)</span><span lang="zh">的一些补充</span></h3><ol><li class="ordered" id="doxcnJan93cQLOkEmu1jZ3LUERb"><span lang="zh">为方便起见，可以令</span><span class="equation">\(K_C^0 \equiv 0\)</span><span lang="zh">，这样最后一天的购买策略与第 </span><span lang="en">1</span><span lang="zh"> 天到第</span><span class="equation">\(N - 1\)</span><span lang="zh">天的购买策略是一致的。</span></li><li class="ordered" id="doxcn4l08PJ81V3u7LNYvbNuLyI"><span lang="zh">对于任意的</span><span class="equation">\(n\)</span><span lang="zh">，</span><span class="equation">\(K_C^n(c)\)</span><span lang="zh">关于</span><span class="equation">\(c\)</span><span lang="zh">单增。这是直观的，因为继承的信用越多，能买到的物品的总价值不可能变少。</span></li><li class="ordered" id="doxcnqvruIQtbtEAwU0zcySaxec"><span lang="zh">计算</span><span class="equation">\(K_C^n\)</span><span lang="zh">只需要用到</span><span class="equation">\(K_C^{n-1}\)</span><span lang="zh">、</span><span class="equation">\(C\)</span><span lang="zh">、商店的概率分布、以及物品的价值，不需要用到</span><span class="equation">\(N\)</span><span lang="zh">，也不需要用到</span><span class="equation">\(K_C^1, \cdots, K_C^{n-2}\)</span><span lang="zh">。</span></li></ol><h2 class="h2 auto-numbering" id="WHRfdeZPpo5fCUx66fFcebo1n9f"><span lang="zh">信用的价值</span></h2><div class="callout-outer" id="U7sddhClJoMVLhxNzDRcKSYmnee"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="SZQwdRp9NoPV4fxSuxfcpqmGnfd"><strong><span class="text-color-1"><span lang="zh">信用的价值依赖于信用交易所中售卖的物品的价值。</span></span></strong></p><p class="text" id="HryfdEp8JoOocKxw5jvcswxbnCd"><span lang="zh">在计算信用的价值之前，</span><span class="text-color-1"><span lang="zh">务必确保商店中物品的价值是准确且有意义的</span></span><span lang="zh">，否则计算出来的信用价值就会失去意义。</span></p></div></div><p class="text" id="MFnid7mjPosWYpxkYFccNQRUnOf"><span lang="zh">我们已经推导出了信用交易所最优购买策略，现在可以使用最优购买策略来计算信用的价值了。</span></p><p class="text" id="TiNddanoFo3epzxwDIncgauRnPe"><span lang="zh">不过，“信用的价值”这个短语的含义是模糊的。“信用的价值是多少？”至少可能指代 </span><span lang="en">2</span><span lang="zh"> 种不同的问题：</span></p><ol><li class="ordered" id="ZlHYdRlTxo5oJ4xkW8zc44yUnRx"><span lang="zh">博士甲每日能获得 </span><span lang="en">813</span><span lang="zh"> 信用，博士乙每日能获得 </span><span lang="en">942</span><span lang="zh"> 信用，那么博士乙比博士甲每日多获得的 </span><span lang="en">129</span><span lang="zh"> 信用的价值是多少？</span></li><li class="ordered" id="UDa0dOokhoCbgqx4hIqchwi3nH8"><span lang="zh">博士甲每日能获得 </span><span lang="en">783</span><span lang="zh"> 信用，并且博士甲几乎从不使用好友助战干员，某天博士甲使用了好友助战干员（之后不再使用），第 </span><span lang="en">2</span><span lang="zh"> 天额外获得了 </span><span lang="en">30</span><span lang="zh"> 信用，那么这额外获得的 </span><span lang="en">30</span><span lang="zh"> 信用的价值是多少？</span></li></ol><p class="text" id="XnrHdSrpLopVJ7xN4CXc46CDn5X"><span lang="zh">问题 </span><span lang="en">1</span><span lang="zh"> 讨论的是</span><span class="text-color-1"><span lang="zh">每日</span></span><span lang="zh">获得的信用的价值，问题 </span><span lang="en">2</span><span lang="zh"> 讨论的是</span><span class="text-color-1"><span lang="zh">临时</span></span><span lang="zh">获得的信用的价值。这 </span><span lang="en">2</span><span lang="zh"> 种问题不可混为一谈，我们将分开讨论。</span></p><h3 class="h3 auto-numbering" id="CRXgd1nNUoXYmnx4xUvciYeynnd"><span lang="zh">每日获得的信用的价值</span></h3><p class="text" id="Dg3JdqcQhozksCxQYz4cCvKAneu"><span lang="zh">首先讨论</span><span class="text-color-1"><span lang="zh">每日</span></span><span lang="zh">获得的信用的价值。</span></p><p class="text" id="AIFSdDyQyoPipCx9iCKcySOxnwg"><span lang="zh">必须注意，</span><span class="text-color-6"><span lang="zh">平均每日能购买的物品的总价值</span></span><span lang="zh">与</span><span class="text-color-6"><span lang="zh">每日获得的信用数量</span></span><span lang="zh">并</span><span class="text-color-1"><span lang="zh">不呈简单正比关系</span></span><span lang="zh">，而是会存在“</span><span class="text-color-1"><span lang="zh">边际收益递减</span></span><span lang="zh">”的现象。</span><a href="https://www.youtube.com/@PeterYR" target="_blank"><span lang="en">PeterYR</span></a><span lang="zh"> 在 </span><a href="https://docs.google.com/document/d/1KNvLXeAWxPvbqqrU-F7oZvNNiS7IERY-Yf8sRcDL0mY" target="_blank"><span lang="en">Calculating</span><span lang="zh"> </span><span lang="en">Friend</span><span lang="zh"> </span><span lang="en">Credits</span></a><span lang="zh"> 中用一个例子详细说明了这一点。</span></p><blockquote id="OJV0dmUSeo8x4lxgtIgc1lU8nch"><div class="grid-container" id="CTYVdFhD6oEKsUxI2KJcUMMAnZg"><div class="grid-column" id="Ot4cdMxSloohVtxI1AkcQMILnPg" style="flex: 60%;"><p class="text" id="HHnodm25MoOzHrxdY5ScOUrQnNf"><span lang="en">The</span><span lang="zh"> </span><span lang="en">simple</span><span lang="zh">-</span><span lang="en">average</span><span lang="zh"> </span><span lang="en">approach</span><span lang="zh"> </span><span lang="en">also</span><span lang="zh"> </span><span lang="en">assumes</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">player</span><span lang="zh"> </span><span lang="en">will</span><span lang="zh"> </span><span lang="en">randomly</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh"> </span><span lang="en">from</span><span lang="zh"> </span><span lang="en">their</span><span lang="zh"> </span><span lang="en">available</span><span lang="zh"> </span><span lang="en">offers</span><span lang="zh"> </span><span lang="en">every</span><span lang="zh"> </span><span lang="en">day.</span><span lang="zh"> </span><span lang="en">In</span><span lang="zh"> </span><span lang="en">reality,</span><span lang="zh"> </span><span lang="en">any</span><span lang="zh"> </span><span lang="en">sane</span><span lang="zh"> </span><span lang="en">player</span><span lang="zh"> </span><span lang="en">would</span><span lang="zh"> </span><span lang="en">prioritize</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">99%</span><span lang="zh"> </span><span lang="en">discounted</span><span lang="zh"> </span><span lang="en">pack</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">LMD</span><span lang="zh"> </span><span lang="en">over</span><span lang="zh"> </span><span lang="en">an</span><span lang="zh"> </span><span lang="en">undiscounted</span><span lang="zh"> </span><span lang="en">trio</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">Orirock</span><span lang="zh"> </span><span lang="en">Cubes.</span><span lang="zh"> </span><u><span lang="en">This</span><span lang="zh"> </span><span lang="en">results</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span></u><u><strong><span lang="en">diminishing</span><span lang="zh"> </span><span lang="en">returns</span></strong></u><u><span lang="zh"> </span><span lang="en">as</span><span lang="zh"> </span><span lang="en">your</span><span lang="zh"> </span><span lang="en">daily</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">income</span><span lang="zh"> </span><span lang="en">increases.</span><span lang="zh"> </span><span lang="en">The</span><span lang="zh"> </span><span lang="en">first</span><span lang="zh"> </span><span lang="en">few</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">you</span><span lang="zh"> </span><span lang="en">get</span><span lang="zh"> </span><span lang="en">are</span><span lang="zh"> </span><span lang="en">spent</span><span lang="zh"> </span><span lang="en">on</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">better</span><span lang="zh"> </span><span lang="en">shop</span><span lang="zh"> </span><span lang="en">offers,</span><span lang="zh"> </span><span lang="en">while</span><span lang="zh"> </span><span lang="en">subsequent</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">will</span><span lang="zh"> </span><span lang="en">be</span><span lang="zh"> </span><span lang="en">spent</span><span lang="zh"> </span><span lang="en">on</span><span lang="zh"> </span><span lang="en">worse</span><span lang="zh"> </span><span lang="en">offers.</span></u><span lang="zh"> </span><span lang="en">In</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">previous</span><span lang="zh"> </span><span lang="en">LMD</span><span lang="zh">-</span><span lang="en">and</span><span lang="zh">-</span><span lang="en">Orirocks</span><span lang="zh"> </span><span lang="en">example,</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">2</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">spent</span><span lang="zh"> </span><span lang="en">towards</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">99%</span><span lang="zh"> </span><span lang="en">discounted</span><span lang="zh"> </span><span lang="en">LMD</span><span lang="zh"> </span><span lang="en">are</span><span lang="zh"> </span><span lang="en">worth</span><span lang="zh"> </span><span lang="en">3600</span><span lang="zh"> </span><span lang="en">LMD,</span><span lang="zh"> </span><span lang="en">so</span><span lang="zh"> </span><span lang="en">each</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">worth</span><span lang="zh"> </span><span lang="en">1800</span><span lang="zh"> </span><span lang="en">LMD.</span><span lang="zh"> </span><span lang="en">Meanwhile,</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">200</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">spent</span><span lang="zh"> </span><span lang="en">towards</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">undiscounted</span><span lang="zh"> </span><span lang="en">Orirock</span><span lang="zh"> </span><span lang="en">Cubes</span><span lang="zh"> </span><span lang="en">are</span><span lang="zh"> </span><span lang="en">worth</span><span lang="zh"> </span><span lang="en">3</span><span lang="zh"> </span><span lang="en">Cubes</span><span lang="zh"> </span><span lang="en">total,</span><span lang="zh"> </span><span lang="en">so</span><span lang="zh"> </span><span lang="en">each</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">worth</span><span lang="zh"> </span><span lang="en">only</span><span lang="zh"> </span><span lang="en">1.5%</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">single</span><span lang="zh"> </span><span lang="en">Orirock</span><span lang="zh"> </span><span lang="en">Cube.</span><span lang="zh"> </span><span lang="en">This</span><span lang="zh"> </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">pretty</span><span lang="zh"> </span><span lang="en">significant</span><span lang="zh"> </span><span lang="en">difference.</span></p></div><div class="grid-column" id="YpiOdrRjboJWlRxJ7V8c8K93nIf" style="flex: 40%;"><p class="text" id="Z2jMdrSXwoFMTzxBmelcbXxknDF"><span lang="zh">简单平均法还假设玩家每天会从可购买的商品中随机购买。实际上，任何理性的玩家都会优先选择折扣为 -</span><span lang="en">99%</span><span lang="zh"> 的龙门币，而不是无折扣的固源岩×</span><span lang="en">3</span><span lang="zh">。</span><u><span lang="zh">这会导致随着你每日获得的信用数量的增加，</span></u><u><strong><span lang="zh">回报逐渐减少</span></strong></u><u><span lang="zh">。最初获得的若干信用会被用来购买更好的商店商品，而之后的信用则会被用来购买相对较差的商品。</span></u><span lang="zh">以之前的龙门币和固源岩为例，用于购买 -</span><span lang="en">99%</span><span lang="zh"> 折扣龙门币的 </span><span lang="en">2</span><span lang="zh"> 点信用价值 </span><span lang="en">3600</span><span lang="zh"> 龙门币，所以每点信用价值 </span><span lang="en">1800</span><span lang="zh"> 龙门币。与此同时，用于购买无折扣固源岩的 </span><span lang="en">200</span><span lang="zh"> 点信用总共只价值 </span><span lang="en">3</span><span lang="zh"> 固源岩，所以每点信用只价值单个固源岩的 </span><span lang="en">1.5%</span><span lang="zh">。这是一个相当显著的差别。</span></p></div></div><div class="grid-container" id="TOuSdAmUvofInXxR0ygcErAfnLf"><div class="grid-column" id="U5SKd1qtvoyGBLxwLjWcyFm5nog" style="flex: 60%;"><p class="text" id="SwNndvaUgoSC6AxzRBkcELRSneg"><u><span lang="en">As</span><span lang="zh"> </span><span lang="en">such,</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">question</span><span lang="zh"> “</span><span lang="en">How</span><span lang="zh"> </span><span lang="en">much</span><span lang="zh"> </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">friend</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">worth?</span><span lang="zh">” </span><span lang="en">heavily</span><span lang="zh"> </span><span lang="en">depends</span><span lang="zh"> </span><span lang="en">on</span><span lang="zh"> </span><span lang="en">how</span><span lang="zh"> </span><span lang="en">many</span><span lang="zh"> </span><span lang="en">other</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">have</span><span lang="zh"> </span><span lang="en">already</span><span lang="zh"> </span><span lang="en">been</span><span lang="zh"> </span><span lang="en">spent.</span><span lang="zh"> </span><span lang="en">A</span><span lang="zh"> </span><span lang="en">better</span><span lang="zh"> </span><span lang="en">question</span><span lang="zh"> </span><span lang="en">would</span><span lang="zh"> </span><span lang="en">be</span><span lang="zh"> </span><span lang="en">something</span><span lang="zh"> </span><span lang="en">like:</span><span lang="zh"> “</span><span lang="en">If</span><span lang="zh"> </span><span lang="en">Player</span><span lang="zh"> </span><span lang="en">1</span><span lang="zh"> </span><span lang="en">gets</span><span lang="zh"> </span><span lang="en">400</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">daily,</span><span lang="zh"> </span><span lang="en">and</span><span lang="zh"> </span><span lang="en">Player</span><span lang="zh"> </span><span lang="en">2</span><span lang="zh"> </span><span lang="en">gets</span><span lang="zh"> </span><span lang="en">500</span><span lang="zh"> </span><span lang="en">daily,</span><span lang="zh"> </span><span lang="en">what</span><span lang="zh">'</span><span lang="en">s</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">value</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">100</span><span lang="zh">-</span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">difference</span><span lang="zh"> </span><span lang="en">between</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">two?</span><span lang="zh">” </span><span lang="en">Due</span><span lang="zh"> </span><span lang="en">to</span><span lang="zh"> </span><span lang="en">diminishing</span><span lang="zh"> </span><span lang="en">returns,</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">100</span><span lang="zh">-</span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">difference</span><span lang="zh"> </span><span lang="en">between</span><span lang="zh"> </span><span lang="en">400</span><span lang="zh"> </span><span lang="en">and</span><span lang="zh"> </span><span lang="en">500</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">worth</span><span lang="zh"> </span><span lang="en">more</span><span lang="zh"> </span><span lang="en">than</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">difference</span><span lang="zh"> </span><span lang="en">between</span><span lang="zh"> </span><span lang="en">600</span><span lang="zh"> </span><span lang="en">and</span><span lang="zh"> </span><span lang="en">700,</span><span lang="zh"> </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">example.</span></u><span lang="zh"> </span><span lang="en">The</span><span lang="zh"> </span><span lang="en">simple</span><span lang="zh">-</span><span lang="en">average</span><span lang="zh"> </span><span lang="en">method</span><span lang="zh"> </span><span lang="en">can</span><span lang="zh">'</span><span lang="en">t</span><span lang="zh"> </span><span lang="en">account</span><span lang="zh"> </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">this.</span></p></div><div class="grid-column" id="HB7IdOZ64o8eeUxgRg5cgt8vn5b" style="flex: 40%;"><p class="text" id="LeK6djwzuor8FYxDmKZchS69n9g"><u><span lang="zh">因此，“</span><span lang="en">1</span><span lang="zh"> 信用价值多少？”这个问题很大程度上取决于已经花费了多少其他信用。一个更好的问题可能是：“如果玩家 </span><span lang="en">A</span><span lang="zh"> 每日获得 </span><span lang="en">400</span><span lang="zh"> 信用，而玩家 </span><span lang="en">B</span><span lang="zh"> 每日获得 </span><span lang="en">500</span><span lang="zh"> 信用，那么两者之间相差的 </span><span lang="en">100</span><span lang="zh"> 信用的价值是多少？”由于回报逐渐减少，</span><span lang="en">400</span><span lang="zh"> 信用到 </span><span lang="en">500</span><span lang="zh"> 信用之间的 </span><span lang="en">100</span><span lang="zh"> 信用差距比 </span><span lang="en">600</span><span lang="zh"> 信用到 </span><span lang="en">700</span><span lang="zh"> 信用之间的差距更有价值。</span></u><span lang="zh">简单平均法无法考虑到这一点。</span></p></div></div></blockquote><p class="text" id="YmRfdDTCTo0BALxVWU3c8k1NnAg"><span lang="zh">计算每日获得的信用的价值需要用到最优购买策略。</span></p><p class="text" id="GSkYdUgarod8ASxzIrXc947Vnab"><span lang="zh">仍然假设每日获得的信用数量为</span><span class="equation">\(C\)</span><span lang="zh">。如果在足够长的时间（</span><span class="equation">\(M\)</span><span lang="zh">天）使用最优策略能够购买的物品的总价值的期望为</span><span class="equation">\(V_C\)</span><span lang="zh">，</span><span class="text-color-1"><span lang="zh">那么我们把</span></span><span class="equation text-color-1">\(M \cdot C\)</span><span class="text-color-1"><span lang="zh">信用的价值与</span></span><span class="equation text-color-1">\(V_C\)</span><span class="text-color-1"><span lang="zh">等同起来，即认为每日获得的</span></span><span class="equation text-color-1">\(C\)</span><span class="text-color-1"><span lang="zh">信用的价值为</span></span><span class="equation text-color-1">\(V_C / M\)</span><span class="text-color-1"><span lang="zh">。</span></span></p><p class="text" id="LOoPdmCOQokGqcxKyaGcoL7enXd"><span lang="zh">这并不意味着 </span><span lang="en">1</span><span lang="zh"> 信用的价值为</span><span class="equation">\(V_C / (M \cdot C)\)</span><span lang="zh">。由于存在“边际收益递减”的现象，考虑信用的“边际价值”更为合理。</span></p><p class="text" id="YymadKOBco7Sm5xL95Vc5rhsnVh"><span lang="zh">我们可以通过计算“每日获得的信用的价值”曲线的“导数”，得出在特定的</span><span class="equation">\(C\)</span><span lang="zh">附近“信用的边际价值”，也可以理解成在每日获得的信用为</span><span class="equation">\(C\)</span><span lang="zh">时，每日多获得 </span><span lang="en">1</span><span lang="zh"> 信用的价值。</span></p><h3 class="h3 auto-numbering" id="Cp0RdILbCoD8YFxe2cDcePWnn7b"><span lang="zh">临时获得的信用的价值</span></h3><p class="text" id="STHfdrhXBoptVFxn7skclP6SnGc"><span lang="zh">现在来计算临时获得（或者失去）的信用的价值。</span></p><p class="text" id="R26BdeSvmo6pYsxMweocqzxJnjc"><span lang="zh">仍假设每日获得的信用数量为</span><span class="equation">\(C\)</span><span lang="zh">，并假设临时获得的信用数量为</span><span class="equation">\(c'\)</span><span lang="zh">（</span><span class="equation">\(c'\)</span><span lang="zh">可以是负数，表示临时失去信用）。</span></p><p class="text" id="LjlVdsZo1o0AH5xhiMwcJpZEnpb"><span lang="zh">分两种情况：</span></p><ol><li class="ordered" id="OpNKdrq5koKVscxaGXxcvg7FnQb"><span lang="zh">临时获得信用当天的商店和前一天继承的信用</span><span class="text-color-1"><span lang="zh">已知</span></span></li><li class="ordered" id="YgTYd44tPo3KyExysiEc55QJnIf"><span lang="zh">临时获得信用当天的商店和前一天继承的信用</span><span class="text-color-1"><span lang="zh">未知</span></span></li></ol><p class="text" id="Dgd4dKIaVo7mY5x9sZWcGCUKnBb"><span lang="zh">如果已知临时获得信用当天的商店和前一天继承的信用</span><span class="equation">\(c_1\)</span><span lang="zh">已知，则对该商店，在手握</span><span class="equation">\(c_1 + C\)</span><span lang="zh">和</span><span class="equation">\(c_1 + C + c'\)</span><span lang="zh">信用的两种情形分别计算最优购买策略，两种情形在最优策略下目标函数（</span><span class="equation">\(X_1 + K_C^{N-1}(c_2)\)</span><span lang="zh">）的差即为临时获得的</span><span class="equation">\(c'\)</span><span lang="zh">信用的价值。</span></p><p class="text" id="CEdNdNXOVop6uQxA7OOc95fNnOc"><span lang="zh">如果商店和继承的信用未知，则枚举多种可能的商店，分别计算临时获得的</span><span class="equation">\(c'\)</span><span lang="zh">信用的价值，再取平均。</span></p><h2 class="h2 auto-numbering" id="doxcnUcYAm5vgfXn4JUdLyQsLLc"><span lang="zh">最优购买策略的近似策略</span></h2><p class="text" id="doxcnp3mmflVJV8JuGDuLwlELBd"><span lang="zh">我们已经推导出了信用交易所最优购买策略，但是，计算</span><span class="equation">\(K_C^{N-1}\)</span><span lang="zh">是非常慢的。在作者的电脑上，计算</span><span class="equation">\(K_{813}^{10}\)</span><span lang="zh">大约需要 </span><span lang="en">120</span><span lang="zh"> 秒，如果想要对不同的</span><span class="equation">\(C\)</span><span lang="zh">分别计算</span><span class="equation">\(K_C^{N-1}\)</span><span lang="zh">则要花成倍的时间（虽然作者的确花了好几个小时算出来了）。而且，一旦物品的价值发生变化，或者新增了一些信用交易所的统计数据，则需要全部重新计算。</span></p><p class="text" id="doxcnHXG1zLs2pVsvP9pHfdpxEd"><span lang="zh">本节将</span><span class="text-color-1"><span lang="zh">构造</span></span><span lang="zh">一个最优购买策略的近似策略，准确来说是</span><span class="text-color-1"><span lang="zh">构造</span></span><span class="equation text-color-1">\(K_C^{N-1}\)</span><span class="text-color-1"><span lang="zh">的近似值</span></span><span lang="zh">，只需要几秒钟的时间就能对于全部的</span><span class="equation">\(C\)</span><span lang="zh">完成计算，同时这个近似策略也有着接近最优策略的表现（将会在 </span><span lang="en">6.5</span><span lang="zh">¿ </span><a href="https://h089spg07ll.feishu.cn/docx/Qerqdji9EoA43vxhbQecX5JonVg#doxcnSYcRXjzolCJ32yJCLbAb4e" target="_blank"><span lang="zh">不同购买策略的比较</span></a><span lang="zh"> 中说明）。</span></p><hr id="doxcnAIoAH2VLzBAMxS7X0KLYsh"></hr><p class="text" id="doxcnzZ96B00qwzFr6RyddoMmnc"><span lang="zh">我们使用 </span><a href="https://www.youtube.com/@PeterYR" target="_blank"><span lang="en">PeterYR</span></a><span lang="zh"> 在 </span><a href="https://docs.google.com/document/d/1KNvLXeAWxPvbqqrU-F7oZvNNiS7IERY-Yf8sRcDL0mY" target="_blank"><span lang="en">Calculating</span><span lang="zh"> </span><span lang="en">Friend</span><span lang="zh"> </span><span lang="en">Credits</span></a><span lang="zh"> 中的方法计算“</span><span class="text-color-1"><span lang="zh">信用能购买的商品碎片的价值</span></span><span lang="zh">”。</span></p><blockquote id="doxcnvbC0GJ18WBm4RK3laoIzfh"><div class="grid-container" id="doxcnVnYneSrpkAdbPmH77dqJGf"><div class="grid-column" id="doxcnHGLtV2XrvDhpKFA5xwASIg" style="flex: 60%;"><p class="text" id="doxcnHFr2A6NcAiny5T0lgZ1RRb"><span lang="en">To</span><span lang="zh"> </span><span lang="en">avoid</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">weaknesses</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">simple</span><span lang="zh">-</span><span lang="en">average</span><span lang="zh"> </span><span lang="en">method</span><span lang="zh"> </span><span lang="en">from</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">previous</span><span lang="zh"> </span><span lang="en">chapter,</span><span lang="zh"> </span><span lang="en">I</span><span lang="zh"> </span><span lang="en">decided</span><span lang="zh"> </span><span lang="en">to</span><span lang="zh"> </span><span lang="en">gather</span><span lang="zh"> </span><span lang="en">data</span><span lang="zh"> </span><span lang="en">on</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">offers</span><span lang="zh"> </span><span lang="en">that</span><span lang="zh"> </span><span lang="en">appear</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">shop,</span><span lang="zh"> </span><span lang="en">and</span><span lang="zh"> </span><span lang="en">run</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> “</span><span lang="en">purchasing</span><span lang="zh"> </span><span lang="en">algorithm</span><span lang="zh">” </span><span lang="en">on</span><span lang="zh"> </span><span lang="en">every</span><span lang="zh"> </span><span lang="en">daily</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">shop.</span><span lang="zh"> </span><u><span lang="en">The</span><span lang="zh"> </span><span lang="en">offers</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">every</span><span lang="zh"> </span><span lang="en">shop</span><span lang="zh"> </span><span lang="en">would</span><span lang="zh"> </span><span lang="en">be</span><span lang="zh"> </span><span lang="en">sorted</span><span lang="zh"> </span><span lang="en">high</span><span lang="zh">-</span><span lang="en">to</span><span lang="zh">-</span><span lang="en">low</span><span lang="zh"> </span><span lang="en">by</span><span lang="zh"> </span><span lang="en">efficiency</span><span lang="zh"> (</span><span lang="en">Sanity</span><span lang="zh"> </span><span lang="en">value</span><span lang="zh"> </span><span lang="en">obtained</span><span lang="zh"> </span><span lang="en">per</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">spent</span><span lang="zh">)</span><span lang="en">,</span><span lang="zh"> </span><span lang="en">including</span><span lang="zh"> </span><span lang="en">discounts.</span><span lang="zh"> </span><span lang="en">The</span><span lang="zh"> </span><span lang="en">algorithm</span><span lang="zh"> </span><span lang="en">would</span><span lang="zh"> </span><span lang="en">iterate</span><span lang="zh"> </span><span lang="en">through</span><span lang="zh"> </span><span lang="en">each</span><span lang="zh"> </span><span lang="en">shop,</span><span lang="zh"> </span><span lang="en">prioritizing</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">high</span><span lang="zh">-</span><span lang="en">efficiency</span><span lang="zh"> </span><span lang="en">offers</span><span lang="zh"> </span><span lang="en">over</span><span lang="zh"> </span><span lang="en">lower</span><span lang="zh">-</span><span lang="en">efficiency</span><span lang="zh"> </span><span lang="en">ones,</span><span lang="zh"> </span><span lang="en">and</span><span lang="zh"> </span><span lang="en">return</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">total</span><span lang="zh"> </span><span lang="en">value</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">everything</span><span lang="zh"> </span><span lang="en">it</span><span lang="zh"> </span><span lang="en">was</span><span lang="zh"> </span><span lang="en">able</span><span lang="zh"> </span><span lang="en">to</span><span lang="zh"> </span><span lang="en">buy.</span></u><span lang="zh"> </span><span lang="en">The</span><span lang="zh"> </span><span lang="en">algorithm</span><span lang="zh"> </span><span lang="en">would</span><span lang="zh"> </span><span lang="en">then</span><span lang="zh"> </span><span lang="en">be</span><span lang="zh"> </span><span lang="en">run</span><span lang="zh"> </span><span lang="en">again,</span><span lang="zh"> </span><span lang="en">with</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">different</span><span lang="zh"> </span><span lang="en">daily</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh"> </span><span lang="en">income.</span></p></div><div class="grid-column" id="doxcnNJsiZR8RipBbaJviQ43i41" style="flex: 40%;"><p class="text" id="doxcn77P6h6boOCj9LlrSE3U1ub"><span lang="zh">为了避免前一章中简单平均法的缺点，我决定收集信用交易所中出现的商品的数据，并对每天的信用交易所运行一个“购买算法”。</span><u><span lang="zh">每个商店中的商品将按照算上折扣后的性价比（每花费 </span><span lang="en">1</span><span lang="zh"> 点信用获得的理智价值）从高到低排序。该算法会遍历每个商店，优先选择性价比高的商品而非性价比低的，并返回它能够购买的所有物品的总价值。</span></u><span lang="zh">然后，该算法会再次运行，但使用不同的每日信用收入来进行计算。</span></p></div></div><div class="grid-container" id="doxcnSiTAuRZQ2V9t8UYpuxPEhd"><div class="grid-column" id="doxcnj4L0c5yfnrzpuUIZjbxKOb" style="flex: 60%;"><p class="text" id="doxcnLNCxc7bn34FSfyXSYHGeDY"><span lang="zh">……</span></p></div><div class="grid-column" id="doxcn352kma5xpLQBrDwUFFH3Hc" style="flex: 40%;"><p class="text" id="doxcn4lRxxlyHbLpi4Y28aQdNVf"><span lang="zh">……</span></p></div></div><div class="grid-container" id="doxcn7pWMiPLTGlO8ZoiNAOjNOd"><div class="grid-column" id="doxcnVzYLQ2XwF0JM2zO8tivhRg" style="flex: 60%;"><p class="text" id="doxcnXdItZpH6xpGdrde5BRV07f"><u><span lang="en">My</span><span lang="zh"> </span><span lang="en">calculations</span><span lang="zh"> </span><span lang="en">also</span><span lang="zh"> </span><span lang="en">ignore</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">fact</span><span lang="zh"> </span><span lang="en">that</span><span lang="zh"> </span><span lang="en">you</span><span lang="zh"> </span><span lang="en">can</span><span lang="zh">'</span><span lang="en">t</span><span lang="zh"> </span><span lang="en">purchase</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">fraction</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">an</span><span lang="zh"> </span><span lang="en">offer.</span><span lang="zh"> </span><span lang="en">If</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">algorithm</span><span lang="zh"> </span><span lang="en">runs</span><span lang="zh"> </span><span lang="en">into</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">1</span><span lang="zh">-</span><span lang="en">Device</span><span lang="zh">-</span><span lang="en">for</span><span lang="zh">-</span><span lang="en">80</span><span lang="zh">-</span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">offer</span><span lang="zh"> </span><span lang="en">with</span><span lang="zh"> </span><span lang="en">only</span><span lang="zh"> </span><span lang="en">40</span><span lang="zh"> </span><span lang="en">credits</span><span lang="zh"> </span><span lang="en">remaining,</span><span lang="zh"> </span><span lang="en">it</span><span lang="zh"> “</span><span lang="en">buys</span><span lang="zh">” </span><span lang="en">half</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">Device</span><span lang="zh"> </span><span lang="en">with</span><span lang="zh"> </span><span lang="en">all</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">its</span><span lang="zh"> </span><span lang="en">remaining</span><span lang="zh"> </span><span lang="en">credits,</span><span lang="zh"> </span><span lang="en">and</span><span lang="zh"> </span><span lang="en">reports</span><span lang="zh"> </span><span lang="en">that</span><span lang="zh"> </span><span lang="en">it</span><span lang="zh"> </span><span lang="en">acquired</span><span lang="zh"> </span><span lang="en">half</span><span lang="zh"> </span><span lang="en">a</span><span lang="zh"> </span><span lang="en">Device</span><span lang="zh">'</span><span lang="en">s</span><span lang="zh"> </span><span lang="en">worth</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">Sanity.</span></u><span lang="zh"> </span><span lang="en">This</span><span lang="zh"> </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">obviously</span><span lang="zh"> </span><span lang="en">impossible</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">reality.</span></p></div><div class="grid-column" id="doxcnBC1rJA5bu359h27CaF8nZL" style="flex: 40%;"><p class="text" id="doxcnbxXUye2D3btv9iN4v7W4jV"><u><span lang="zh">我的计算还忽略了一个事实，那就是你无法购买商品的一部分。如果算法在只剩下 </span><span lang="en">40</span><span lang="zh"> 信用的情况下遇到了“</span><span lang="en">80</span><span lang="zh"> 信用购买 </span><span lang="en">1</span><span lang="zh"> 个装置”的商品，它会用剩余的所有信用点来“购买”半个装置，并报告说它获得了半个装置的价值的理智。</span></u><span lang="zh">这实际上显然是不可能的。</span></p></div></div></blockquote><p class="text" id="doxcnLgqmLjgIzFscqC9qZHOpKb"><span lang="zh">假设有</span><span class="equation">\(c\)</span><span lang="zh">信用，固定一个商店，按性价比从高到低购买，</span><span class="text-color-1"><span lang="zh">且允许购买商品的一部分</span></span><span lang="zh">（例如半个装置），直到</span><span class="equation">\(c\)</span><span lang="zh">信用全部花完，把买到的商品的总价值作为“</span><span class="equation">\(c\)</span><span lang="zh">信用在这个商店中能购买的商品碎片的价值”。然后，对于每个商店都计算一遍这个数，取个平均，得到“</span><span class="equation">\(c\)</span><span lang="zh">信用能购买的商品碎片的价值”。</span></p><p class="text" id="doxcnSJvCla3Phkl1kNyjWfkECc"><span lang="zh">我们把“</span><span class="equation">\(c\)</span><span lang="zh">信用能购买的商品碎片的价值”曲线截取</span><span class="equation">\(C - 150 \le c \le C + 150\)</span><span lang="zh">的一段作为</span><span class="equation">\(K_C^{N-1}\)</span><span lang="zh">的近似值。比如，</span><span class="equation">\(K_{813}^{N-1}\)</span><span lang="zh">的近似值就取曲线在</span><span class="equation">\(663 \le c \le 963\)</span><span lang="zh">的一段。</span></p><p class="text" id="doxcnNZjOqB5Zlp4MmZyetxBwwh"><span lang="zh">将</span><span class="equation">\(K_C^{N-1}\)</span><span lang="zh">替换为近似值得到的购买策略称为最优购买策略的近似策略。</span></p><h2 class="h2 auto-numbering" id="doxcnDhZHykVyCS6ZrCaLGS2zHb"><span lang="zh">“按性价比从高到低购买，并设定性价比阈值”策略</span></h2><p class="text" id="doxcnDrSHiqGLX0mNmi6mMKWy1c"><span lang="zh">无论是最优购买策略，还是最优购买策略的近似策略，在实施的时候都需要枚举</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案进行比较，这在不使用计算机的情况下是比较困难的。本节将</span><span class="text-color-1"><span lang="zh">构造</span></span><span lang="zh">一个适合手动购买的简化策略，它实施起来并不复杂，同时也有着接近最优策略的表现（将会在 </span><span lang="en">6.5</span><span lang="zh"> </span><a href="https://h089spg07ll.feishu.cn/docx/Qerqdji9EoA43vxhbQecX5JonVg#doxcnSYcRXjzolCJ32yJCLbAb4e" target="_blank"><span lang="zh">不同购买策略的比较</span></a><span lang="zh"> 中说明）。</span></p><p class="text" id="doxcnUVkQeOoUxFduy2nxgPxbce"><span lang="zh">我们把这一策略称作“</span><strong><span lang="zh">按性价比从高到低购买，并设定性价比阈值</span></strong><span lang="zh">”。</span></p><p class="text" id="doxcnaLZy4ypgb5iYKWP5jldWwe"><span lang="zh">它的核心思想依然是</span><span class="text-color-1"><span lang="zh">按性价比从高到低购买</span></span><span lang="zh">，只是我们对何时中止购买做一些额外的规定，</span><span class="text-color-1"><span lang="zh">规定一般情况下仅购买性价比大于等于某个预先设定的阈值的商品</span></span><span lang="zh">。</span></p><p class="text" id="doxcnORZynop6QqVBL3yTpgEdze"><span lang="zh">当然，很有可能会遇到“性价比高的商品已经买完了，但此时剩余信用超过 </span><span lang="en">300</span><span lang="zh">”的情况，这时要不要继续购买呢？</span></p><p class="text" id="doxcn0FvSzufSMUCawb9u1DR7Mc"><span lang="zh">如果购买之后剩余信用仍大于等于 </span><span lang="en">300</span><span lang="zh">，那毫无疑问应该购买；如果购买之后剩余信用不足 </span><span lang="en">300</span><span lang="zh">，我们应该看为了购买这个商品，“实际上”需要花费多少信用。</span></p><p class="text" id="doxcnItBlOeO8R3PPYyg5iwGYQf"><span lang="zh">比如说，当前有 </span><span lang="en">399</span><span lang="zh"> 信用，信用交易所中还剩 </span><span lang="en">1</span><span lang="zh"> 份原价的碳（</span><span lang="en">100</span><span lang="zh"> 信用），要不要购买呢？如果购买，剩余 </span><span lang="en">299</span><span lang="zh"> 信用可以全部留到下一天；不购买也只能留 </span><span lang="en">300</span><span lang="zh"> 信用到下一天。因此，可以认为购买这份碳“实际上”的花费是 </span><span lang="en">1</span><span lang="zh"> 信用。此时我们应该看 </span><span lang="en">1</span><span lang="zh"> 信用购买 </span><span lang="en">1</span><span lang="zh"> 份碳是否划算（即性价比是否大于等于阈值），以此决定是否购买。</span></p><p class="text" id="doxcnNuHTL7IDNUpMpIrOoLpBUd"><span lang="zh">我们定义：</span></p><ul><li class="bullet" id="doxcn3s7STFUWMMLUcdTHiLp5vf"><span lang="zh">现价性价比 = 价值 </span><span lang="en">/</span><span lang="zh"> 现价</span></li><li class="bullet" id="doxcnXMVQBxdrjxZ2C5I1SKyv7f"><span lang="zh">当前折算价格 =</span><span class="equation">\(\begin{cases}
0 &amp; \text{ if} \quad 当前信用 \ge 300 + 现价 \\
300 - (当前信用 - 现价) &amp; \text{ if} \quad 300 \le 当前信用 \lt 300 + 现价 \\
现价 &amp; \text{ if} \quad 当前信用 \lt 300
\end{cases}\)</span></li><li class="bullet" id="doxcnMmHVpZpPABIxLcXVbR3Fjg"><span lang="zh">当前折算性价比 =</span><span class="equation">\(\begin{cases}
+ \infty &amp; \text{ if} \quad 当前折算价格 = 0 \\
\displaystyle \frac{价值}{当前折算价格} &amp; \text{ if} \quad 当前折算价格 \gt 0
\end{cases}\)</span></li></ul><p class="text" id="doxcnqtJK15E897apdVvzcul3Xb"><span lang="zh">把这一策略具体地写出来：</span></p><ol><li class="ordered" id="doxcnjaC59lOeYp7HtdkOWOn47v"><span lang="zh">把 </span><span lang="en">10</span><span lang="zh"> 个商品按</span><span class="text-color-1"><span lang="zh">现价性价比</span></span><span lang="zh">从高到低排序。</span></li><li class="ordered" id="doxcnuW24gp5YEP1PtMigXlnzHh"><span lang="zh">按现价性价比从高到低购买，直到 ① 信用不足或者已经全部售罄，或者 ② </span><span class="text-color-1"><span lang="zh">下一个</span></span><span lang="zh">要购买的物品的</span><span class="text-color-1"><span lang="zh">当前折算性价比</span></span><span lang="zh">小于阈值。</span></li></ol><h2 class="h2 auto-numbering" id="WYXLd6cpdoqf01xpLxicGB1Hnbg"><span lang="zh">不同购买策略的比较</span></h2><p class="text" id="VaYEdWjLMokvigxe7PrcPoTBneY"><span lang="zh">我们在 </span><span lang="en">4.3</span><span lang="zh">¿ 中介绍了 </span><span lang="en">5</span><span lang="zh"> 种“朴素”的购买策略，在 </span><span lang="en">5.1</span><span lang="zh">、</span><span lang="en">5.3</span><span lang="zh">、</span><span lang="en">5.4</span><span lang="zh">¿ 中分别介绍了 </span><span lang="en">3</span><span lang="zh"> 种并不朴素的购买策略。</span></p><p class="text" id="MZo2dekhioergcxphd2cMdLfnFb"><span lang="zh">如何评价购买策略的优劣？</span></p><p class="text" id="WLusdWMJeovjwwxXtyJc8Asbnke"><span lang="zh">在 </span><span lang="en">5.1.1</span><span lang="zh">¿ 中说过，</span><strong><span lang="zh">一个策略“</span></strong><strong><span class="text-color-1"><span lang="zh">优</span></span></strong><strong><span lang="zh">”指的是：按照这一策略，在未来很长一段时间内购买的物品的</span></strong><strong><span class="text-color-1"><span lang="zh">总价值高</span></span></strong><strong><span lang="zh">。</span></strong></p><p class="text" id="VgoXdxW6Roq1xSxGKN0cYKbwnrt"><span lang="zh">按照这一思想，我们把统计到的信用交易所的样本拷贝若干份，接着把这些商店</span><span class="text-color-1"><span lang="zh">随机打乱</span></span><span lang="zh">，认为在接下来的若干天中，信用交易所按随机打乱后的顺序刷新。然后使用某个购买策略来模拟购买，计算</span><span class="text-color-1"><span lang="zh">平均每日购买的物品的总价值</span></span><span lang="zh">（等于</span><span class="text-color-6"><span lang="zh">模拟购买的物品的总价值</span></span><span lang="zh">除以</span><span class="text-color-6"><span lang="zh">模拟的天数</span></span><span lang="zh">）。</span></p><p class="text" id="MJjWdxrj1ov9eBxKp3EcYt7rnzc"><span lang="zh">把</span><span class="text-color-1"><span lang="zh">平均每日购买的商品的总价值</span></span><span lang="zh">作为</span><span class="text-color-1"><span lang="zh">评价策略优劣的指标</span></span><span lang="zh">。平均每日购买的商品的总价值越大，策略越好。</span></p><h1 class="h1 auto-numbering" id="Sm47dY93To2WpkxC2t6czbQtnyd"><span lang="zh">实验</span></h1><div class="callout-outer" id="doxcnbuH08j1mKL29ZBxHTVRJOe"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcneh8Mv1xBNyl6b6RDG10Oif"><span lang="zh">代码已上传至 </span><a href="https://github.com/BiologyHazard/credit-store-optimizer" target="_blank"><span lang="en">GitHub</span><span lang="zh"> - </span><span lang="en">BiologyHazard/credit</span><span lang="zh">-</span><span lang="en">store</span><span lang="zh">-</span><span lang="en">optimizer</span></a><span lang="zh">。</span></p><p class="text" id="doxcnyZijw6JdEvTxjJl85NfNix"><span lang="zh">仓库链接：</span><a class="url" href="https://github.com/BiologyHazard/credit-store-optimizer" target="_blank"><span lang="en">https://github.com/BiologyHazard/credit</span><span lang="zh">-</span><span lang="en">store</span><span lang="zh">-</span><span lang="en">optimizer</span></a></p><p class="text" id="doxcn8zjc5tiQNt1AYhLxattwhf"><span lang="zh">本文中的所有代码、数据、图表，均可在仓库中找到。</span></p></div></div><p class="text" id="NsYCdJBKLoWfpJxDCPBc7cjMncc"><span lang="zh">本文中，物品的理智价值取自 </span><span lang="en">2024</span><span lang="zh">-</span><span lang="en">07</span><span lang="zh">-</span><span lang="en">10</span><span lang="zh"> 的 </span><a href="https://ark.yituliu.cn/material/value" target="_blank"><span lang="zh">明日方舟一图流 − 物品价值表</span></a><span lang="zh">，并且额外认为加急许可价值 </span><span lang="en">0.01</span><span lang="zh"> 理智，家具零件价值 </span><span lang="en">0.0001</span><span lang="zh"> 理智。</span></p><h2 class="h2 auto-numbering" id="doxcn0TOcXFmLZRV5zytwbXUBfc"><span lang="zh">信用交易所最优购买策略</span></h2><h3 class="h3 auto-numbering" id="doxcnk3jAigFH3c2rEfTRcpcFNa"><span lang="zh">编程计算</span><span class="equation">\(K_C^n\)</span></h3><p class="text" id="doxcnMmKCb3hu2IIgKwvenO36Ad"><span lang="zh">本节中，我们使用统计结果，计算</span><span class="equation">\(K_C^n(c)\)</span><span lang="zh">的具体值。</span></p><p class="text" id="doxcnaKMCKCMRsAXKYWSLbnymNd"><span lang="zh">把</span><span class="equation">\(K_C^n(c)\)</span><span lang="zh">的计算步骤写成代码：</span></p><pre class="code" id="MwESdByLuouUXCxx4Q9c0ZQ5nHb"><code class="code"><span class="bg-color-3"><span class="text-color-1"><span lang="zh"># 注：代码为了可读性牺牲了性能，实际运行起来非常慢。</span><br/></span></span><span class="bg-color-3"><span class="text-color-1"><span lang="zh"># 代码仓库 </span></span></span><span class="bg-color-3"><a class="url" href="https://github.com/BiologyHazard/credit-store-optimizer" target="_blank"><span class="text-color-1"><span lang="en">https://github.com/BiologyHazard/credit</span><span lang="zh">-</span><span lang="en">store</span><span lang="zh">-</span><span lang="en">optimizer</span></span></a></span><span class="bg-color-3"><span class="text-color-1"><span lang="zh"> 中有为性能优化后的代码。</span><br/></span></span><br/><span lang="en">import</span><span lang="zh"> </span><span lang="en">math</span><br/><span lang="en">from</span><span lang="zh"> </span><span lang="en">collections.abc</span><span lang="zh"> </span><span lang="en">import</span><span lang="zh"> </span><span lang="en">Sequence</span><br/><span lang="en">from</span><span lang="zh"> </span><span lang="en">itertools</span><span lang="zh"> </span><span lang="en">import</span><span lang="zh"> </span><span lang="en">product</span><br/><span lang="en">from</span><span lang="zh"> </span><span lang="en">statistics</span><span lang="zh"> </span><span lang="en">import</span><span lang="zh"> </span><span lang="en">mean</span><br/><br/><span lang="en">from</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">store</span><span lang="zh">_</span><span lang="en">models</span><span lang="zh"> </span><span lang="en">import</span><span lang="zh"> </span><span lang="en">CreditStore</span><br/><span lang="en">from</span><span lang="zh"> </span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">store</span><span lang="zh">_</span><span lang="en">stats</span><span lang="zh"> </span><span lang="en">import</span><span lang="zh"> </span><span lang="en">stats</span><br/><br/><span lang="en">def</span><span lang="zh"> </span><span lang="en">calculate</span><span lang="zh">_</span><span lang="en">total</span><span lang="zh">_</span><span lang="en">price</span><span lang="zh">(</span><span lang="en">shop:</span><span lang="zh"> </span><span lang="en">CreditStore,</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector:</span><span lang="zh"> </span><span lang="en">Sequence</span><span lang="zh">[</span><span lang="en">bool</span><span lang="zh">]) -&gt; </span><span lang="en">int:</span><br/><span lang="zh">    </span><span lang="en">return</span><span lang="zh"> </span><span lang="en">sum</span><span lang="zh">(</span><span lang="en">item.current</span><span lang="zh">_</span><span lang="en">price</span><span lang="zh"> </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">i,</span><span lang="zh"> </span><span lang="en">item</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">enumerate</span><span lang="zh">(</span><span lang="en">shop.items</span><span lang="zh">) </span><span lang="en">if</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><span lang="zh">[</span><span lang="en">i</span><span lang="zh">])</span><br/><br/><span lang="en">def</span><span lang="zh"> </span><span lang="en">calculate</span><span lang="zh">_</span><span lang="en">total</span><span lang="zh">_</span><span lang="en">value</span><span lang="zh">(</span><span lang="en">shop:</span><span lang="zh"> </span><span lang="en">CreditStore,</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector:</span><span lang="zh"> </span><span lang="en">Sequence</span><span lang="zh">[</span><span lang="en">bool</span><span lang="zh">]) -&gt; </span><span lang="en">float:</span><br/><span lang="zh">    </span><span lang="en">return</span><span lang="zh"> </span><span lang="en">sum</span><span lang="zh">(</span><span lang="en">item.value</span><span lang="zh"> </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">i,</span><span lang="zh"> </span><span lang="en">item</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">enumerate</span><span lang="zh">(</span><span lang="en">shop.items</span><span lang="zh">) </span><span lang="en">if</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><span lang="zh">[</span><span lang="en">i</span><span lang="zh">])</span><br/><br/><span lang="en">def</span><span lang="zh"> </span><span lang="en">solve</span><span lang="zh">_</span><span lang="en">single</span><span lang="zh">_</span><span lang="en">shop</span><span lang="zh">(</span><span lang="en">shop:</span><span lang="zh"> </span><span lang="en">CreditStore,</span><span lang="zh"> </span><span lang="en">current</span><span lang="zh">_</span><span lang="en">credit:</span><span lang="zh"> </span><span lang="en">int,</span><span lang="zh"> </span><span lang="en">KnC</span><span lang="zh">·</span><span lang="en">:</span><span lang="zh"> </span><span lang="en">list</span><span lang="zh">[</span><span lang="en">float</span><span lang="zh">]) -&gt; </span><span lang="en">tuple</span><span lang="zh">[</span><span lang="en">float,</span><span lang="zh"> </span><span lang="en">tuple</span><span lang="zh">[</span><span lang="en">bool,</span><span lang="zh"> </span><span lang="en">...</span><span lang="zh">]]</span><span lang="en">:</span><br/><span lang="zh">    """</span><span lang="en">Choose</span><span lang="zh"> </span><span lang="en">one</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">2</span><span lang="zh"> ** </span><span lang="en">10</span><span lang="zh"> </span><span lang="en">purchase</span><span lang="zh"> </span><span lang="en">methods</span><span lang="zh"> </span><span lang="en">that</span><span lang="zh"> </span><span lang="en">does</span><span lang="zh"> </span><span lang="en">not</span><span lang="zh"> </span><span lang="en">overspend,</span><span lang="zh"> </span><span lang="en">such</span><span lang="zh"> </span><span lang="en">that</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">total</span><span lang="zh"> </span><span lang="en">value</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">the</span><span lang="zh"> </span><span lang="en">items</span><span lang="zh"> </span><span lang="en">purchased</span><span lang="zh">  + </span><span lang="en">KnC</span><span lang="zh">·[</span><span lang="en">carriable</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">] </span><span lang="en">is</span><span lang="zh"> </span><span lang="en">maximized</span><span lang="zh">"""</span><br/><span lang="zh">    </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><span lang="zh">_</span><span lang="en">max:</span><span lang="zh"> </span><span lang="en">float</span><span lang="zh"> = -</span><span lang="en">math.inf</span><br/><span lang="zh">    </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">product</span><span lang="zh">((</span><span lang="en">False,</span><span lang="zh"> </span><span lang="en">True</span><span lang="zh">)</span><span lang="en">,</span><span lang="zh"> </span><span lang="en">repeat</span><span lang="zh">=</span><span lang="en">len</span><span lang="zh">(</span><span lang="en">shop.items</span><span lang="zh">))</span><span lang="en">:</span><span lang="zh">  # </span><span lang="en">enumerate</span><span lang="zh"> </span><span lang="en">2</span><span lang="zh"> ** </span><span lang="en">10</span><span lang="zh"> </span><span lang="en">purchase</span><span lang="zh"> </span><span lang="en">methods</span><br/><span lang="zh">        </span><span lang="en">total</span><span lang="zh">_</span><span lang="en">price:</span><span lang="zh"> </span><span lang="en">int</span><span lang="zh"> = </span><span lang="en">calculate</span><span lang="zh">_</span><span lang="en">total</span><span lang="zh">_</span><span lang="en">price</span><span lang="zh">(</span><span lang="en">shop,</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><span lang="zh">)</span><br/><span lang="zh">        </span><span lang="en">total</span><span lang="zh">_</span><span lang="en">value:</span><span lang="zh"> </span><span lang="en">float</span><span lang="zh"> = </span><span lang="en">calculate</span><span lang="zh">_</span><span lang="en">total</span><span lang="zh">_</span><span lang="en">value</span><span lang="zh">(</span><span lang="en">shop,</span><span lang="zh"> </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><span lang="zh">)</span><br/><span lang="zh">        </span><span lang="en">if</span><span lang="zh"> </span><span lang="en">total</span><span lang="zh">_</span><span lang="en">price</span><span lang="zh"> &lt;= </span><span lang="en">current</span><span lang="zh">_</span><span lang="en">credit:</span><br/><span lang="zh">            </span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">left:</span><span lang="zh"> </span><span lang="en">int</span><span lang="zh"> = </span><span lang="en">current</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh"> - </span><span lang="en">total</span><span lang="zh">_</span><span lang="en">price</span><br/><span lang="zh">            </span><span lang="en">carriable</span><span lang="zh">_</span><span lang="en">credit:</span><span lang="zh"> </span><span lang="en">int</span><span lang="zh"> = </span><span lang="en">min</span><span lang="zh">(</span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">left,</span><span lang="zh"> </span><span lang="en">300</span><span lang="zh">)</span><br/><span lang="zh">            </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function:</span><span lang="zh"> </span><span lang="en">float</span><span lang="zh"> = </span><span lang="en">total</span><span lang="zh">_</span><span lang="en">value</span><span lang="zh"> + </span><span lang="en">KnC</span><span lang="zh">·[</span><span lang="en">carriable</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">]</span><br/><span lang="zh">            </span><span lang="en">if</span><span lang="zh"> </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><span lang="zh"> &gt; </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><span lang="zh">_</span><span lang="en">max:</span><br/><span lang="zh">                </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><span lang="zh">_</span><span lang="en">max</span><span lang="zh"> = </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><br/><span lang="zh">                </span><span lang="en">best</span><span lang="zh">_</span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><span lang="zh"> = </span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><br/><br/><span lang="zh">    </span><span lang="en">return</span><span lang="zh"> </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><span lang="zh">_</span><span lang="en">max,</span><span lang="zh"> </span><span lang="en">best</span><span lang="zh">_</span><span lang="en">buy</span><span lang="zh">_</span><span lang="en">index</span><span lang="zh">_</span><span lang="en">vector</span><br/><br/><span lang="en">if</span><span lang="zh"> __</span><span lang="en">name</span><span lang="zh">__ == '__</span><span lang="en">main</span><span lang="zh">__'</span><span lang="en">:</span><br/><span lang="zh">    </span><span lang="en">daily</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">income</span><span lang="zh">_</span><span lang="en">C</span><span lang="zh"> = </span><span lang="en">813</span><br/><span lang="zh">    </span><span lang="en">time</span><span lang="zh">_</span><span lang="en">span</span><span lang="zh">_</span><span lang="en">N</span><span lang="zh"> = </span><span lang="en">11</span><br/><br/><span lang="zh">    </span><span lang="en">K0C</span><span lang="zh">·</span><span lang="en">:</span><span lang="zh"> </span><span lang="en">list</span><span lang="zh">[</span><span lang="en">float</span><span lang="zh">] = [</span><span lang="en">0</span><span lang="zh"> </span><span lang="en">for</span><span lang="zh"> _ </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">range</span><span lang="zh">(</span><span lang="en">301</span><span lang="zh">)]</span><br/><span lang="zh">    </span><span lang="en">K</span><span lang="zh">·</span><span lang="en">C</span><span lang="zh">·</span><span lang="en">:</span><span lang="zh"> </span><span lang="en">list</span><span lang="zh">[</span><span lang="en">list</span><span lang="zh">[</span><span lang="en">float</span><span lang="zh">]] = [</span><span lang="en">K0C</span><span lang="zh">·]</span><br/><br/><span lang="zh">    </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">n</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">range</span><span lang="zh">(</span><span lang="en">1,</span><span lang="zh"> </span><span lang="en">time</span><span lang="zh">_</span><span lang="en">span</span><span lang="zh">_</span><span lang="en">N</span><span lang="zh">)</span><span lang="en">:</span><br/><span lang="zh">        </span><span lang="en">K</span><span lang="zh">_</span><span lang="en">n</span><span lang="zh">_</span><span lang="en">minus</span><span lang="zh">_</span><span lang="en">1</span><span lang="zh">_</span><span lang="en">C</span><span lang="zh">_·</span><span lang="en">:</span><span lang="zh"> </span><span lang="en">list</span><span lang="zh">[</span><span lang="en">float</span><span lang="zh">] = </span><span lang="en">K</span><span lang="zh">·</span><span lang="en">C</span><span lang="zh">·[-</span><span lang="en">1</span><span lang="zh">]</span><br/><span lang="zh">        </span><span lang="en">KnC</span><span lang="zh">·</span><span lang="en">:</span><span lang="zh"> </span><span lang="en">list</span><span lang="zh">[</span><span lang="en">float</span><span lang="zh">] = [</span><span lang="en">0</span><span lang="zh"> </span><span lang="en">for</span><span lang="zh"> _ </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">range</span><span lang="zh">(</span><span lang="en">301</span><span lang="zh">)]</span><br/><span lang="zh">        </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">carried</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">c</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">range</span><span lang="zh">(</span><span lang="en">301</span><span lang="zh">)</span><span lang="en">:</span><br/><span lang="zh">            </span><span lang="en">samples</span><span lang="zh">_</span><span lang="en">of</span><span lang="zh">_</span><span lang="en">KnCc:</span><span lang="zh"> </span><span lang="en">list</span><span lang="zh">[</span><span lang="en">float</span><span lang="zh">] = []</span><br/><span lang="zh">            </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">shop</span><span lang="zh"> </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">stats:</span><br/><span lang="zh">                </span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><span lang="zh">_</span><span lang="en">max,</span><span lang="zh"> _ = </span><span lang="en">solve</span><span lang="zh">_</span><span lang="en">single</span><span lang="zh">_</span><span lang="en">shop</span><span lang="zh">(</span><span lang="en">shop,</span><span lang="zh"> </span><span lang="en">carried</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">c</span><span lang="zh"> + </span><span lang="en">daily</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">income</span><span lang="zh">_</span><span lang="en">C,</span><span lang="zh"> </span><span lang="en">K</span><span lang="zh">_</span><span lang="en">n</span><span lang="zh">_</span><span lang="en">minus</span><span lang="zh">_</span><span lang="en">1</span><span lang="zh">_</span><span lang="en">C</span><span lang="zh">_·)</span><br/><span lang="zh">                </span><span lang="en">samples</span><span lang="zh">_</span><span lang="en">of</span><span lang="zh">_</span><span lang="en">KnCc.append</span><span lang="zh">(</span><span lang="en">target</span><span lang="zh">_</span><span lang="en">function</span><span lang="zh">_</span><span lang="en">max</span><span lang="zh">)</span><br/><span lang="zh">            </span><span lang="en">KnC</span><span lang="zh">·[</span><span lang="en">carried</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">c</span><span lang="zh">] = </span><span lang="en">mean</span><span lang="zh">(</span><span lang="en">samples</span><span lang="zh">_</span><span lang="en">of</span><span lang="zh">_</span><span lang="en">KnCc</span><span lang="zh">)  # </span><span lang="en">use</span><span lang="zh"> </span><span lang="en">mean</span><span lang="zh"> </span><span lang="en">as</span><span lang="zh"> </span><span lang="en">an</span><span lang="zh"> </span><span lang="en">estimate</span><span lang="zh"> </span><span lang="en">of</span><span lang="zh"> </span><span lang="en">expectation</span><br/><span lang="zh">        </span><span lang="en">K</span><span lang="zh">·</span><span lang="en">C</span><span lang="zh">·</span><span lang="en">.append</span><span lang="zh">(</span><span lang="en">KnC</span><span lang="zh">·)</span><br/><br/><span lang="zh">    </span><span lang="en">for</span><span lang="zh"> </span><span lang="en">n,</span><span lang="zh"> </span><span lang="en">KnC</span><span lang="zh">· </span><span lang="en">in</span><span lang="zh"> </span><span lang="en">enumerate</span><span lang="zh">(</span><span lang="en">K</span><span lang="zh">·</span><span lang="en">C</span><span lang="zh">·)</span><span lang="en">:</span><br/><span lang="zh">        </span><span lang="en">print</span><span lang="zh">(</span><span lang="en">f</span><span lang="zh">'</span><span lang="en">K</span><span lang="zh">_{</span><span lang="en">n</span><span lang="zh">}_{</span><span lang="en">daily</span><span lang="zh">_</span><span lang="en">credit</span><span lang="zh">_</span><span lang="en">income</span><span lang="zh">_</span><span lang="en">C</span><span lang="zh">}_·</span><span lang="en">:</span><span lang="zh"> {</span><span lang="en">KnC</span><span lang="zh">·}')</span><br/></code></pre><p class="text" id="doxcndUBY2otwj7SZXzQxQaGvDf"><span class="equation">\(C = 813\)</span><span lang="zh">时，运行代码，绘制出</span><span class="equation">\(K_{813}^n\)</span><span lang="zh">的曲线：</span></p><div class="callout-outer" id="B0hkdS6Cyo6A9cxuiqWcl4XfnDh"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="HNdkdrD5LoXvFax1mL9ck0Zvndb"><span lang="en">2</span><span lang="zh"> 发电站布局的基建，每日能获得大约 </span><span lang="en">813</span><span lang="zh"> 信用，见 </span><a href="https://h089spg07ll.feishu.cn/docx/ANxmdPK88oWxipxqJTOcKimwnoe#SWfRdtls0oBHsxxhkw6cTEONn0c" target="_blank"><span class="doc-logo"><svg data-icon="FileLinkWordOutlined" fill="none" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 3h12.595c.93 0 1.806.355 2.439.96A3.07 3.07 0 0 1 20 6.176V21H7.405a3.53 3.53 0 0 1-2.439-.96A3.068 3.068 0 0 1 4 17.823V3ZM3 1a1 1 0 0 0-1 1v15.823c0 1.373.57 2.69 1.583 3.66A5.529 5.529 0 0 0 7.405 23H21a1 1 0 0 0 1-1V6.176a5.07 5.07 0 0 0-1.583-3.66A5.53 5.53 0 0 0 16.595 1H3Z" fill="currentColor"></path><path d="M6.75 8a1 1 0 0 1 1-1h8.5a1 1 0 1 1 0 2h-8.5a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h8.5a1 1 0 1 1 0 2h-8.5a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h4.5a1 1 0 1 1 0 2h-4.5a1 1 0 0 1-1-1Z" fill="currentColor"></path></svg></span><span lang="zh">基建最大收益混合排班方案</span></a><span lang="zh">。</span></p></div></div><figure class="figure-image" id="NJa6d6VwGobPSNxoe3UcI5FUn4p" image-token="Dxqhb86GpoKGGmxnW01cC2Otnwh"><img alt="图 9.　" class="image" image-token="Dxqhb86GpoKGGmxnW01cC2Otnwh" src="images/Dxqhb86GpoKGGmxnW01cC2Otnwh.png"></img><figcaption><span lang="zh">图 </span><span lang="en">9.</span><span lang="zh">　</span></figcaption></figure><p class="text" id="doxcnNDCucabShu8mhhBJFanZrb"><span lang="zh">这看起来有点挤，单独看一下</span><span class="equation">\(K_{813}^{10}\)</span><span lang="zh">：</span></p><figure class="figure-image" id="EkFpdqSrpoFeGUxj87DctNAgnTc" image-token="T9FybwKfAoWkjdxSWsvc56XbnMe"><img alt="图 10.　K_10_813_·" class="image" image-token="T9FybwKfAoWkjdxSWsvc56XbnMe" src="images/T9FybwKfAoWkjdxSWsvc56XbnMe.png"></img><figcaption><span lang="zh">图 </span><span lang="en">10.</span><span lang="zh">　</span><span lang="en">K</span><span lang="zh">_</span><span lang="en">10</span><span lang="zh">_</span><span lang="en">813</span><span lang="zh">_·</span></figcaption></figure><p class="text" id="doxcnji7oEnfARKzFQK85i7lsqh"><span lang="zh">例如，</span><span class="equation">\(K_{813}^{10}(100) = 846.1936\)</span><span lang="zh">，含义是：每日获得的信用数量为 </span><span lang="en">813</span><span lang="zh"> 时，若前一天继承了 </span><span lang="en">100</span><span lang="zh"> 信用到今天，则在接下来的 </span><span lang="en">10</span><span lang="zh"> 天内，按照最优策略来购买，购买到的物品的总价值的期望为 </span><span lang="en">846.1936</span><span lang="zh">。</span></p><hr id="doxcnU8BlX6AM8uCyeM0nfAzsRc"></hr><h3 class="h3 auto-numbering" id="Hdo7d0o5WogpDzxfkMvc37pgnth"><span lang="zh">使用最优策略进行购买</span></h3><p class="text" id="CdRJdqnxTovVqixsmUScIxoYnMY"><span lang="zh">考虑这样一个例子：</span></p><p class="text" id="NIKHdoagjoxQ45x0iBocx4AAnTT"><span lang="zh">博士甲每日获得的信用数量为 </span><span lang="en">700</span><span lang="zh">。某天博士甲遇到了如下图所示的商店，已知前一天继承了 </span><span lang="en">75</span><span lang="zh"> 信用，请问博士甲应该购买信用交易所中的那些商品？</span></p><figure class="figure-image" id="WS3pdQSssoqO9WxV4YacLpgUntb" image-token="XCgNbQKzToPjy1xfAsrc8g7Onz8"><img alt="图 11.　信用交易所截图，当前有 775 信用" class="image" image-token="XCgNbQKzToPjy1xfAsrc8g7Onz8" src="images/XCgNbQKzToPjy1xfAsrc8g7Onz8.png"></img><figcaption><span lang="zh">图 </span><span lang="en">11.</span><span lang="zh">　信用交易所截图，当前有 </span><span lang="en">775</span><span lang="zh"> 信用</span></figcaption></figure><p class="text" id="CQZhdauPfoLjkRxCoGvcM10xnod"><span lang="zh">使用</span><span class="equation">\(N-1 = 10\)</span><span lang="zh">，</span><span class="equation">\(C = 700\)</span><span lang="zh">时的最优购买策略，计算得出应当购买的商品为：</span></p><p class="text" id="MepGd8qMbosQHQxqt28cjZ7Xnaf"><span class="text-color-5"><span lang="zh">破损装置×</span><span lang="en">2</span><span lang="zh">、赤金×</span><span lang="en">6</span><span lang="zh">、糖×</span><span lang="en">2</span><span lang="zh">、源岩×</span><span lang="en">2</span><span lang="zh">、酮凝集×</span><span lang="en">2</span><span lang="zh">、龙门币×</span><span lang="en">3600</span><span lang="zh">、招聘许可×</span><span lang="en">160</span><span lang="zh">。</span></span></p><p class="text" id="A2Ogd4LlEowZCyxAU90cwrnunDe"><span lang="zh">购买这些商品需要 </span><span lang="en">700</span><span lang="zh"> 信用。购买完毕后，剩余 </span><span lang="en">75</span><span lang="zh"> 信用。</span></p><figure class="figure-image" id="DUbsdcHsDo1JyjxrzCBcA5Umn8b" image-token="Ib7qbr3tSoc6LgxHoAPca28bn38"><img alt="图 12.　购买完毕后，剩余 75 信用" class="image" image-token="Ib7qbr3tSoc6LgxHoAPca28bn38" src="images/Ib7qbr3tSoc6LgxHoAPca28bn38.png"></img><figcaption><span lang="zh">图 </span><span lang="en">12.</span><span lang="zh">　购买完毕后，剩余 </span><span lang="en">75</span><span lang="zh"> 信用</span></figcaption></figure><h3 class="h3 auto-numbering" id="ZDKcdlAAhopJeWxN4xMcisCxnXe"><span lang="zh">平均每日能够购买的物品数量</span></h3><p class="text" id="UPJ8dtndPoG0EcxMyvHcYQ40nTe"><span lang="zh">把 </span><span lang="en">3977</span><span lang="zh"> 个信用交易所的样本拷贝为 </span><span lang="en">5</span><span lang="zh"> 份，接着把这 </span><span lang="en">3977</span><span lang="zh"> * </span><span lang="en">5</span><span lang="zh"> 个商店</span><span class="text-color-1"><span lang="zh">随机打乱</span></span><span lang="zh">，认为接下来的 </span><span lang="en">3977</span><span lang="zh"> * </span><span lang="en">5</span><span lang="zh"> 天，信用交易所按随机打乱后的顺序刷新。然后使用最优购买策略来模拟购买，对于每种商品，分别计算</span><span class="text-color-1"><span lang="zh">平均每日购买的商品数量</span></span><span lang="zh">（等于</span><span class="text-color-6"><span lang="zh">模拟购买的该商品的总数量</span></span><span lang="zh">除以</span><span class="text-color-6"><span lang="zh">模拟的天数</span></span><span lang="zh">）。</span></p><p class="text" id="SHo0doMapo3wmXxEsJKc0suBnHf"><span lang="zh">取</span><span class="equation">\(N - 1 = 10\)</span><span lang="zh">。</span></p><p class="text" id="Vtr3dTQNjoolqDxmonpcgiIyn6g"><span class="equation">\(C = 813\)</span><span lang="zh">时，平均每日能够购买的物品数量见下表。</span></p><table class="sheet" id="RUAhd7rYio1hezxCrcpc4Euin0e" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_2sJvjh"><tr><td colspan="2"><span lang="zh">商品</span></td><td><span lang="zh">平均每日能购买的商品数量</span></td><td><span lang="zh">平均每 </span><span lang="en">365</span><span lang="zh"> 天能购买的商品数量</span></td><td colspan="2"><span lang="zh">物品</span></td><td><span lang="zh">数量</span></td><td><span lang="zh">平均每日能购买的物品数量</span></td><td><span lang="zh">平均每 </span><span lang="en">365</span><span lang="zh"> 天能购买的物品数量</span></td></tr><tr><td></td><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td><span lang="en">0.12099573</span></td><td><span lang="en">44.16343978</span></td><td rowspan="2"></td><td rowspan="2"><span lang="zh">龙门币</span></td><td><span lang="en">1800</span></td><td rowspan="2"><span lang="en">2889.95725421</span></td><td rowspan="2"><span lang="en">1054834.39778728</span></td></tr><tr><td></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="en">0.74226804</span></td><td><span lang="en">270.92783505</span></td><td><span lang="en">3600</span></td></tr><tr><td></td><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td><span lang="en">0.00000000</span></td><td><span lang="en">0.00000000</span></td><td rowspan="2"></td><td rowspan="2"><span lang="zh">家具零件</span></td><td><span lang="en">20</span></td><td rowspan="2"><span lang="en">0.01005783</span></td><td rowspan="2"><span lang="en">3.67110888</span></td></tr><tr><td></td><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td><span lang="en">0.00040231</span></td><td><span lang="en">0.14684436</span></td><td><span lang="en">25</span></td></tr><tr><td></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td><td><span lang="en">0.95825999</span></td><td><span lang="en">349.76489816</span></td><td></td><td><span lang="zh">招聘许可</span></td><td><span lang="en">1</span></td><td><span lang="en">0.95825999</span></td><td><span lang="en">349.76489816</span></td></tr><tr><td></td><td><span lang="zh">加急许可×</span><span lang="en">1</span></td><td><span lang="en">0.01669600</span></td><td><span lang="en">6.09404073</span></td><td></td><td><span lang="zh">加急许可</span></td><td><span lang="en">1</span></td><td><span lang="en">0.01669600</span></td><td><span lang="en">6.09404073</span></td></tr><tr><td></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td><td><span lang="en">0.48951471</span></td><td><span lang="en">178.67286900</span></td><td></td><td><span lang="zh">赤金</span></td><td><span lang="en">6</span></td><td><span lang="en">2.93708826</span></td><td><span lang="en">1072.03721398</span></td></tr><tr><td></td><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td><span lang="en">0.05828514</span></td><td><span lang="en">21.27407594</span></td><td></td><td><span lang="zh">基础作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">0.52456626</span></td><td><span lang="en">191.46668343</span></td></tr><tr><td></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="en">0.40311793</span></td><td><span lang="en">147.13804375</span></td><td></td><td><span lang="zh">初级作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">3.62806135</span></td><td><span lang="en">1324.24239376</span></td></tr><tr><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td><span lang="en">0.04219261</span></td><td><span lang="en">15.40030173</span></td><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span></td><td><span lang="en">5</span></td><td><span lang="en">0.21096304</span></td><td><span lang="en">77.00150867</span></td></tr><tr><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td><span lang="en">0.54221775</span></td><td><span lang="en">197.90947951</span></td><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span></td><td><span lang="en">3</span></td><td><span lang="en">1.62665326</span></td><td><span lang="en">593.72843852</span></td></tr><tr><td></td><td><span lang="zh">碳×</span><span lang="en">5</span></td><td><span lang="en">0.03143073</span></td><td><span lang="en">11.47221524</span></td><td></td><td><span lang="zh">碳</span></td><td><span lang="en">5</span></td><td><span lang="en">0.15715363</span></td><td><span lang="en">57.36107619</span></td></tr><tr><td></td><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td><span lang="en">0.18989188</span></td><td><span lang="en">69.31053558</span></td><td></td><td><span lang="zh">碳素</span></td><td><span lang="en">3</span></td><td><span lang="en">0.56967563</span></td><td><span lang="en">207.93160674</span></td></tr><tr><td></td><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="en">0.06834297</span></td><td><span lang="en">24.94518481</span></td><td></td><td><span lang="zh">源岩</span></td><td><span lang="en">2</span></td><td><span lang="en">0.13668594</span></td><td><span lang="en">49.89036963</span></td></tr><tr><td></td><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td><span lang="en">0.05798340</span></td><td><span lang="en">21.16394267</span></td><td></td><td><span lang="zh">代糖</span></td><td><span lang="en">2</span></td><td><span lang="en">0.11596681</span></td><td><span lang="en">42.32788534</span></td></tr><tr><td></td><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td><span lang="en">0.06074931</span></td><td><span lang="en">22.17349761</span></td><td></td><td><span lang="zh">酯原料</span></td><td><span lang="en">2</span></td><td><span lang="en">0.12149862</span></td><td><span lang="en">44.34699522</span></td></tr><tr><td></td><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td><span lang="en">0.05778225</span></td><td><span lang="en">21.09052049</span></td><td></td><td><span lang="zh">异铁碎片</span></td><td><span lang="en">2</span></td><td><span lang="en">0.11556450</span></td><td><span lang="en">42.18104099</span></td></tr><tr><td></td><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td><span lang="en">0.04973598</span></td><td><span lang="en">18.15363339</span></td><td></td><td><span lang="zh">双酮</span></td><td><span lang="en">2</span></td><td><span lang="en">0.09947196</span></td><td><span lang="en">36.30726678</span></td></tr><tr><td></td><td><span lang="zh">破损装置×</span><span lang="en">1</span></td><td><span lang="en">0.04239376</span></td><td><span lang="en">15.47372391</span></td><td></td><td><span lang="zh">破损装置</span></td><td><span lang="en">1</span></td><td><span lang="en">0.04239376</span></td><td><span lang="en">15.47372391</span></td></tr><tr><td></td><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td><span lang="en">0.49102338</span></td><td><span lang="en">179.22353533</span></td><td></td><td><span lang="zh">固源岩</span></td><td><span lang="en">3</span></td><td><span lang="en">1.47307015</span></td><td><span lang="en">537.67060598</span></td></tr><tr><td></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="en">0.50248931</span></td><td><span lang="en">183.40859945</span></td><td></td><td><span lang="zh">糖</span></td><td><span lang="en">2</span></td><td><span lang="en">1.00497863</span></td><td><span lang="en">366.81719889</span></td></tr><tr><td></td><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td><span lang="en">0.52180035</span></td><td><span lang="en">190.45712849</span></td><td></td><td><span lang="zh">聚酸酯</span></td><td><span lang="en">2</span></td><td><span lang="en">1.04360070</span></td><td><span lang="en">380.91425698</span></td></tr><tr><td></td><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td><span lang="en">0.43143073</span></td><td><span lang="en">157.47221524</span></td><td></td><td><span lang="zh">异铁</span></td><td><span lang="en">2</span></td><td><span lang="en">0.86286145</span></td><td><span lang="en">314.94443048</span></td></tr><tr><td></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td><span lang="en">0.47598692</span></td><td><span lang="en">173.73522756</span></td><td></td><td><span lang="zh">酮凝集</span></td><td><span lang="en">2</span></td><td><span lang="en">0.95197385</span></td><td><span lang="en">347.47045512</span></td></tr><tr><td></td><td><span lang="zh">装置×</span><span lang="en">1</span></td><td><span lang="en">0.72783505</span></td><td><span lang="en">265.65979381</span></td><td></td><td><span lang="zh">装置</span></td><td><span lang="en">1</span></td><td><span lang="en">0.72783505</span></td><td><span lang="en">265.65979381</span></td></tr></table><p class="text" id="UF2TdaBbFoOwbJxdMfYcsZ0tnye"><span class="equation">\(C = 942\)</span><span lang="zh">时，平均每日能够购买的物品数量见下表。</span></p><table class="sheet" id="EQFhd7mosoJQdexBiqcctSB7nfh" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_onMJnU"><tr><td colspan="2"><span lang="zh">商品</span></td><td><span lang="zh">平均每日能购买的商品数量</span></td><td><span lang="zh">平均每 </span><span lang="en">365</span><span lang="zh"> 天能购买的商品数量</span></td><td colspan="2"><span lang="zh">物品</span></td><td><span lang="zh">数量</span></td><td><span lang="zh">平均每日能购买的物品数量</span></td><td><span lang="zh">平均每 </span><span lang="en">365</span><span lang="zh"> 天能购买的物品数量</span></td></tr><tr><td></td><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td><span lang="en">0.12119688</span></td><td><span lang="en">44.23686196</span></td><td rowspan="2"></td><td rowspan="2"><span lang="zh">龙门币</span></td><td><span lang="en">1800</span></td><td rowspan="2"><span lang="en">2920.19109882</span></td><td rowspan="2"><span lang="en">1065869.75106864</span></td></tr><tr><td></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="en">0.75056575</span></td><td><span lang="en">273.95649987</span></td><td><span lang="en">3600</span></td></tr><tr><td></td><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td><span lang="en">0.00070405</span></td><td><span lang="en">0.25697762</span></td><td rowspan="2"></td><td rowspan="2"><span lang="zh">家具零件</span></td><td><span lang="en">20</span></td><td rowspan="2"><span lang="en">0.15489062</span></td><td rowspan="2"><span lang="en">56.53507669</span></td></tr><tr><td></td><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td><span lang="en">0.00563239</span></td><td><span lang="en">2.05582097</span></td><td><span lang="en">25</span></td></tr><tr><td></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td><td><span lang="en">0.95825999</span></td><td><span lang="en">349.76489816</span></td><td></td><td><span lang="zh">招聘许可</span></td><td><span lang="en">1</span></td><td><span lang="en">0.95825999</span></td><td><span lang="en">349.76489816</span></td></tr><tr><td></td><td><span lang="zh">加急许可×</span><span lang="en">1</span></td><td><span lang="en">0.07784762</span></td><td><span lang="en">28.41438270</span></td><td></td><td><span lang="zh">加急许可</span></td><td><span lang="en">1</span></td><td><span lang="en">0.07784762</span></td><td><span lang="en">28.41438270</span></td></tr><tr><td></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td><td><span lang="en">0.57586120</span></td><td><span lang="en">210.18933870</span></td><td></td><td><span lang="zh">赤金</span></td><td><span lang="en">6</span></td><td><span lang="en">3.45516721</span></td><td><span lang="en">1261.13603219</span></td></tr><tr><td></td><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td><span lang="en">0.07327131</span></td><td><span lang="en">26.74402816</span></td><td></td><td><span lang="zh">基础作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">0.65944179</span></td><td><span lang="en">240.69625346</span></td></tr><tr><td></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="en">0.50515464</span></td><td><span lang="en">184.38144330</span></td><td></td><td><span lang="zh">初级作战记录</span></td><td><span lang="en">9</span></td><td><span lang="en">4.54639175</span></td><td><span lang="en">1659.43298969</span></td></tr><tr><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td><span lang="en">0.04586372</span></td><td><span lang="en">16.74025647</span></td><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span></td><td><span lang="en">5</span></td><td><span lang="en">0.22931858</span></td><td><span lang="en">83.70128237</span></td></tr><tr><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td><span lang="en">0.55101836</span></td><td><span lang="en">201.12169977</span></td><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span></td><td><span lang="en">3</span></td><td><span lang="en">1.65305507</span></td><td><span lang="en">603.36509932</span></td></tr><tr><td></td><td><span lang="zh">碳×</span><span lang="en">5</span></td><td><span lang="en">0.03827005</span></td><td><span lang="en">13.96856927</span></td><td></td><td><span lang="zh">碳</span></td><td><span lang="en">5</span></td><td><span lang="en">0.19135026</span></td><td><span lang="en">69.84284637</span></td></tr><tr><td></td><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td><span lang="en">0.38606990</span></td><td><span lang="en">140.91551421</span></td><td></td><td><span lang="zh">碳素</span></td><td><span lang="en">3</span></td><td><span lang="en">1.15820971</span></td><td><span lang="en">422.74654262</span></td></tr><tr><td></td><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="en">0.07930601</span></td><td><span lang="en">28.94669349</span></td><td></td><td><span lang="zh">源岩</span></td><td><span lang="en">2</span></td><td><span lang="en">0.15861202</span></td><td><span lang="en">57.89338698</span></td></tr><tr><td></td><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td><span lang="en">0.06668343</span></td><td><span lang="en">24.33945185</span></td><td></td><td><span lang="zh">代糖</span></td><td><span lang="en">2</span></td><td><span lang="en">0.13336686</span></td><td><span lang="en">48.67890370</span></td></tr><tr><td></td><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td><span lang="en">0.08428464</span></td><td><span lang="en">30.76389238</span></td><td></td><td><span lang="zh">酯原料</span></td><td><span lang="en">2</span></td><td><span lang="en">0.16856927</span></td><td><span lang="en">61.52778476</span></td></tr><tr><td></td><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td><span lang="en">0.07930601</span></td><td><span lang="en">28.94669349</span></td><td></td><td><span lang="zh">异铁碎片</span></td><td><span lang="en">2</span></td><td><span lang="en">0.15861202</span></td><td><span lang="en">57.89338698</span></td></tr><tr><td></td><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td><span lang="en">0.06306261</span></td><td><span lang="en">23.01785265</span></td><td></td><td><span lang="zh">双酮</span></td><td><span lang="en">2</span></td><td><span lang="en">0.12612522</span></td><td><span lang="en">46.03570531</span></td></tr><tr><td></td><td><span lang="zh">破损装置×</span><span lang="en">1</span></td><td><span lang="en">0.05748051</span></td><td><span lang="en">20.98038723</span></td><td></td><td><span lang="zh">破损装置</span></td><td><span lang="en">1</span></td><td><span lang="en">0.05748051</span></td><td><span lang="en">20.98038723</span></td></tr><tr><td></td><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td><span lang="en">0.53532814</span></td><td><span lang="en">195.39476993</span></td><td></td><td><span lang="zh">固源岩</span></td><td><span lang="en">3</span></td><td><span lang="en">1.60598441</span></td><td><span lang="en">586.18430978</span></td></tr><tr><td></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="en">0.55670103</span></td><td><span lang="en">203.19587629</span></td><td></td><td><span lang="zh">糖</span></td><td><span lang="en">2</span></td><td><span lang="en">1.11340206</span></td><td><span lang="en">406.39175258</span></td></tr><tr><td></td><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td><span lang="en">0.56303747</span></td><td><span lang="en">205.50867488</span></td><td></td><td><span lang="zh">聚酸酯</span></td><td><span lang="en">2</span></td><td><span lang="en">1.12607493</span></td><td><span lang="en">411.01734976</span></td></tr><tr><td></td><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td><span lang="en">0.45471461</span></td><td><span lang="en">165.97083229</span></td><td></td><td><span lang="zh">异铁</span></td><td><span lang="en">2</span></td><td><span lang="en">0.90942922</span></td><td><span lang="en">331.94166457</span></td></tr><tr><td></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td><span lang="en">0.49735982</span></td><td><span lang="en">181.53633392</span></td><td></td><td><span lang="zh">酮凝集</span></td><td><span lang="en">2</span></td><td><span lang="en">0.99471964</span></td><td><span lang="en">363.07266784</span></td></tr><tr><td></td><td><span lang="zh">装置×</span><span lang="en">1</span></td><td><span lang="en">0.75951722</span></td><td><span lang="en">277.22378677</span></td><td></td><td><span lang="zh">装置</span></td><td><span lang="en">1</span></td><td><span lang="en">0.75951722</span></td><td><span lang="en">277.22378677</span></td></tr></table><h3 class="h3 auto-numbering" id="doxcnLqwsRsSJ50j7kbif2L1efh"><span lang="zh">最优策略的稳定性</span></h3><p class="text" id="doxcnXccDsTsEBDiD9SOHnmdTMc"><span lang="zh">上面定义的“最优策略”是针对特定的</span><span class="equation">\(N\)</span><span lang="zh">的，因此有一个自然的问题：当</span><span class="equation">\(N\)</span><span lang="zh">变化时，相应的第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略会不会有很大的不同？</span></p><p class="text" id="doxcn7iA92WYKUZkWvFIq6vEtQc"><span lang="zh">答案是：使用统计数据得到的计算结果表明，</span><span class="text-color-1"><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天的最优购买策略是稳定的</span></span><span lang="zh">。</span></p><p class="text" id="doxcnqZfyEsMuVAUU6z1K7C94Fe"><span lang="zh">回忆第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略是：在</span><span class="equation">\(2^{10}\)</span><span lang="zh">种购买方案中选一种不超支的，使得</span><span class="text-color-6"><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天购买的物品的总价值</span></span><span lang="zh">与</span><span class="equation">\(K_C^{N-1}(c_2)\)</span><span lang="zh">的和最大。</span></p><p class="text" id="doxcnyOql1QjC1XJj5Nn8rPvhzf"><span lang="zh">很显然，</span><span class="text-color-1"><span lang="zh">对曲线</span></span><span class="equation text-color-1">\(K_C^{N-1}\)</span><span class="text-color-1"><span lang="zh">进行上下平移不会改变第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略</span></span><span lang="zh">，因此我们可以不妨向下平移</span><span class="equation">\(K_C^n\)</span><span lang="zh">，使得</span><span class="text-color-1"><span lang="zh">平移之后曲线经过原点</span></span><span lang="zh">。平移之后的曲线称作“标准化的</span><span class="equation">\(K_C^n\)</span><span lang="zh">”，记作</span><span class="equation">\(\widetilde{K_C^n}\)</span><span lang="zh">。</span></p><p class="text" id="doxcnjwNAmbxWeEB7GnRnYA7kic"><span lang="zh">如果</span><span class="equation">\(\widetilde{K_C^n}\)</span><span lang="zh">随着</span><span class="equation">\(n\)</span><span lang="zh">增加具有收敛性，则第 </span><span lang="en">1</span><span lang="zh"> 天的最优购买策略是稳定的。</span></p><p class="text" id="doxcnIqODAz7zzfcCk8Cm7p5mWd"><span lang="zh">我们把</span><span class="equation">\(C=813\)</span><span lang="zh">时的</span><span class="equation">\(\widetilde{K_{813}^0}\)</span><span lang="zh">到</span><span class="equation">\(\widetilde{K_{813}^{10}}\)</span><span lang="zh">画出来，感受曲线的收敛性。</span></p><figure class="figure-image" id="POMudVLNWoU4FZxmdPzcwONWnPf" image-token="LrsVbKpmvo6kYRxmsXrc3yZ3nXe"><img alt="图 13.　标准化的 K_n_813_·" class="image" image-token="LrsVbKpmvo6kYRxmsXrc3yZ3nXe" src="images/LrsVbKpmvo6kYRxmsXrc3yZ3nXe.png"></img><figcaption><span lang="zh">图 </span><span lang="en">13.</span><span lang="zh">　标准化的 </span><span lang="en">K</span><span lang="zh">_</span><span lang="en">n</span><span lang="zh">_</span><span lang="en">813</span><span lang="zh">_·</span></figcaption></figure><p class="text" id="doxcn5u0bApSPXQJsDtA2VoU9Ed"><span lang="zh">从图中直观看出，</span><span class="equation">\(\widetilde{K_{813}^n}\)</span><span lang="zh">的收敛性是比较好的。因此最优策略是稳定的。我们可以取一个比较大的</span><span class="equation">\(N\)</span><span lang="zh">来近似替代</span><span class="equation">\(N\)</span><span lang="zh">趋于无穷的情形。</span></p><div class="grid-container" id="doxcnDfRwI4TK1j9m9lpWFHDdSf"><div class="grid-column" id="doxcnEzdg6nDmQh3Jps2nhyodfh" style="flex: 50%;"><div class="callout-outer" id="doxcnxaIETzM0meLFhNdpXb6hke"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnQvCPu23lGPOnpVqavSNdMB"><span class="equation">\(\widetilde{K_C^n}\)</span><span lang="zh">的收敛性是从图中直观看出来的，没有经过证明。</span></p><p class="text" id="doxcnf5VcTp4Gl8cwnrSGCpy4Gd"><span lang="zh">事实上，</span><span class="equation">\(\widetilde{K_C^n}\)</span><span lang="zh">的收敛性严重依赖统计数据。</span></p><p class="text" id="doxcnQUf39c7jHWCz56qvQbRIjb"><span lang="zh">保持</span><span class="equation">\(C=813\)</span><span lang="zh">不变，</span><span class="text-color-1"><span lang="zh">假设信用交易所每天刷新都只可能刷新出右图所示的商店</span></span><span lang="zh">，此时绘制出</span><span class="equation">\(\widetilde{K_{813}^0}\)</span><span lang="zh">到</span><span class="equation">\(\widetilde{K_{813}^{40}}\)</span><span lang="zh">如下图所示，看不出收敛性。</span></p></div></div></div><div class="grid-column" id="doxcnWDKLvqYDV0hC4jrAeyFrib" style="flex: 50%;"><figure class="figure-image" id="doxcnMyWZ2li6JRr1wGv7kbVe8e" image-token="DcIEbTBewo8XbVxiELTct2Cenlb"><img alt="图 14.　假设信用交易所每次刷新只有这一种可能" class="image" image-token="DcIEbTBewo8XbVxiELTct2Cenlb" src="images/DcIEbTBewo8XbVxiELTct2Cenlb.png"></img><figcaption><span lang="zh">图 </span><span lang="en">14.</span><span lang="zh">　假设信用交易所每次刷新只有这一种可能</span></figcaption></figure></div></div><figure class="figure-image" id="doxcnFD7Jb9oHFoNLxH6WmwI7Mh" image-token="PL9VbUiwwobI05xAUZxc4GxFn2w"><img alt="图 15.　最优策略不稳定的例子" class="image" image-token="PL9VbUiwwobI05xAUZxc4GxFn2w" src="images/PL9VbUiwwobI05xAUZxc4GxFn2w.png"></img><figcaption><span lang="zh">图 </span><span lang="en">15.</span><span lang="zh">　最优策略不稳定的例子</span></figcaption></figure><h2 class="h2 auto-numbering" id="doxcnMDMXIOfmgMe9JdqDmi2b9b"><span lang="zh">信用的价值</span></h2><h3 class="h3 auto-numbering" id="doxcnT86rAnI16iCxBTrcWkSlqc"><span lang="zh">每日获得的信用的价值</span></h3><p class="text" id="doxcnEUNmWnGfi5myzNQrI4Yfn7"><span lang="zh">在计算时，由于共有 </span><span lang="en">3977</span><span lang="zh"> 条有效的统计数据，取</span><span class="equation">\(M = 3977 \cdot 5\)</span><span lang="zh">，并且把统计到的 </span><span lang="en">3977</span><span lang="zh"> 个商店拷贝为 </span><span lang="en">5</span><span lang="zh"> 份，然后</span><span class="text-color-1"><span lang="zh">随机打乱</span></span><span lang="zh">，认为接下来的 </span><span lang="en">3977</span><span lang="zh"> * </span><span lang="en">5</span><span lang="zh"> 天，信用交易所按随机打乱后的顺序刷新。</span></p><p class="text" id="doxcn5DH2TMTf059lvJ02YcIGog"><span lang="zh">然后，对于每一个</span><span class="equation">\(C\)</span><span lang="zh">，按照</span><span lang="zh">对应的最优策略</span><span lang="zh">进行 </span><span lang="en">3977</span><span lang="zh"> * </span><span lang="en">5</span><span lang="zh"> 天的模拟，把模拟购买的物品的总价值作为</span><span class="equation">\(V\)</span><span lang="zh">的估计。</span></p><p class="text" id="doxcnMf30Lvm6ejmcXwU5yMFn1d"><span lang="zh">最终，经过计算，得到每日获得的信用的价值与每日获得的信用的关系。</span></p><figure class="figure-image" id="Lr4GdQyNmo5XvBxShzEcVCJWnWI" image-token="Mq9nbFShKoVem3xbP0NcNNMknLc"><img alt="图 16.　每日获得的信用的价值与每日获得的信用的关系" class="image" image-token="Mq9nbFShKoVem3xbP0NcNNMknLc" src="images/Mq9nbFShKoVem3xbP0NcNNMknLc.png"></img><figcaption><span lang="zh">图 </span><span lang="en">16.</span><span lang="zh">　每日获得的信用的价值与每日获得的信用的关系</span></figcaption></figure><div class="callout-outer" id="doxcnVXSuxoeLdUBPOqSsUWExmh"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnP9WPMqT542LxLvBP7lplah"><span lang="zh">曲线是凹的，体现了“边际收益递减”。</span></p><p class="text" id="doxcnbQ6HImTkwzspzmPSkKeLHc"><span lang="zh">完整的结果在代码仓库 </span><a href="https://github.com/BiologyHazard/credit-store-optimizer" target="_blank"><span lang="en">GitHub</span><span lang="zh"> - </span><span lang="en">BiologyHazard/credit</span><span lang="zh">-</span><span lang="en">store</span><span lang="zh">-</span><span lang="en">optimizer</span></a><span lang="zh"> 中。</span></p></div></div><p class="text" id="doxcntZD2ENCe0yUZFjfIR2bqTd"><span lang="zh">关注几个特殊值。</span></p><ul><li class="bullet" id="doxcnrPibFWFfckUM8BBMvFE1Mf"><span lang="en">2</span><span lang="zh"> 发电站基建布局下，每日能获得大约 </span><span lang="en">813</span><span lang="zh"> 信用，此时平均每日能购买的物品的总价值为 </span><span lang="en">84.5921</span><span lang="zh"> 理智。</span></li><li class="bullet" id="doxcn5f4MPgiXGenWbZM5qLU7Ir"><span lang="en">3</span><span lang="zh"> 发电站基建布局下，每日能获得大约 </span><span lang="en">942</span><span lang="zh"> 信用，此时平均每日能购买的物品的总价值为 </span><span lang="en">89.8127</span><span lang="zh"> 理智。</span></li></ul><p class="text" id="doxcniR0BcpyK6W004qvaeUrHTh"><span class="text-color-1"><span lang="zh">因此，</span><span lang="en">3</span><span lang="zh"> 发电站基建布局比 </span><span lang="en">2</span><span lang="zh"> 发电站基建布局每日多获得的 </span><span lang="en">129</span><span lang="zh"> 信用的价值为 </span><span lang="en">5.2206</span><span lang="zh"> 理智。</span></span></p><hr id="doxcnpoBshlw1AlNfS71leBA36e"></hr><p class="text" id="doxcnznV5hG29t3MXcyWts9svMP"><span lang="zh">通过计算上图中曲线的“导数”，得出在特定的</span><span class="equation">\(C\)</span><span lang="zh">附近“信用的边际价值”。</span></p><figure class="figure-image" id="GphId4D54ou9UJxtm6sc7vwOnkc" image-token="OGafbldx8oUFIyx7QClcYTN5nVf"><img alt="图 17.　信用的边际价值" class="image" image-token="OGafbldx8oUFIyx7QClcYTN5nVf" src="images/OGafbldx8oUFIyx7QClcYTN5nVf.png"></img><figcaption><span lang="zh">图 </span><span lang="en">17.</span><span lang="zh">　信用的边际价值</span></figcaption></figure><h2 class="h2 auto-numbering" id="HksXduUBTo6jqixDkI8czOXjnvd"><span lang="zh">最优购买策略的近似策略</span></h2><p class="text" id="GRD6dnkOBo5QbgxtDlXcPlXrn9r"><span lang="zh">我们把信用能购买的商品碎片的价值曲线画出来。</span></p><figure class="figure-image" id="Tl2rd9X60oVaZFx2cf4cberSnJb" image-token="BRKJbv1mMoGpiJxO4FKcPXNCnIc"><img alt="图 18.　信用能购买的商品碎片的价值" class="image" image-token="BRKJbv1mMoGpiJxO4FKcPXNCnIc" src="images/BRKJbv1mMoGpiJxO4FKcPXNCnIc.png"></img><figcaption><span lang="zh">图 </span><span lang="en">18.</span><span lang="zh">　信用能购买的商品碎片的价值</span></figcaption></figure><p class="text" id="J2LZdfxLRosTuMx9o3VcXkPynYb"><span lang="zh">我们把这条曲线截取</span><span class="equation">\(C - 150 \le c \le C + 150\)</span><span lang="zh">的一段作为</span><span class="equation">\(K_C^{N-1}\)</span><span lang="zh">的近似值。比如，</span><span class="equation">\(K_{813}^{N-1}\)</span><span lang="zh">的近似值就取这条曲线在</span><span class="equation">\(663 \le c \le 963\)</span><span lang="zh">的一段。</span></p><p class="text" id="JlQodg5yeoM4gzxCRYqcfcxknFf"><span lang="zh">我们把</span><span class="equation">\(K_C^{10}\)</span><span lang="zh">的真实值与近似值画出来。</span></p><figure class="figure-image" id="A22gdTiWcot0dnxbt3kcld53n4d" image-token="FaW6bS0TJouDhHxNfzDcp7eKnec"><img alt="图 19.　K_10_·_· 的真实值与近似值" class="image" image-token="FaW6bS0TJouDhHxNfzDcp7eKnec" src="images/FaW6bS0TJouDhHxNfzDcp7eKnec.png"></img><figcaption><span lang="zh">图 </span><span lang="en">19.</span><span lang="zh">　</span><span lang="en">K</span><span lang="zh">_</span><span lang="en">10</span><span lang="zh">_·_· 的真实值与近似值</span></figcaption></figure><p class="text" id="KSf6dgBuFoExmExDxbIc5j07nrg"><span lang="zh">可以看到，在每日获得的信用</span><span class="equation">\(C\)</span><span lang="zh">比较大的时候，真实值与近似值是比较接近的。</span></p><p class="text" id="Qoead6gSXo04jyxxOuVcdyBZnub"><span lang="zh">将</span><span class="equation">\(K_C^{N-1}\)</span><span lang="zh">替换为近似值得到的购买策略称为最优购买策略的近似策略。</span></p><hr id="SKEedwHAgozufnx5KuacrdKxneg"></hr><p class="text" id="ArCIdXTh7otWagxMzVjcWjRBnVh"><a href="https://www.youtube.com/@PeterYR" target="_blank"><span lang="en">PeterYR</span></a><span lang="zh"> 直接使用“信用能购买的商品碎片的价值”作为每日获得的信用的价值，这和本文中定义的每日获得的信用的价值有多大的区别呢？</span></p><figure class="figure-image" id="Pvq5dcT92o6sGoxQRYocprQBnxh" image-token="A7gCb1XDfo0MLhxEuxnc6SYRnIb"><img alt="图 20.　信用能购买的商品碎片的价值和每日获得的信用的价值" class="image" image-token="A7gCb1XDfo0MLhxEuxnc6SYRnIb" src="images/A7gCb1XDfo0MLhxEuxnc6SYRnIb.png"></img><figcaption><span lang="zh">图 </span><span lang="en">20.</span><span lang="zh">　信用能购买的商品碎片的价值和每日获得的信用的价值</span></figcaption></figure><p class="text" id="RVQod3D6Co4CEgxmyNpcUSKInHb"><span lang="zh">从图中可以看出，本文中定义的每日获得的信用的价值始终高于 </span><a href="https://www.youtube.com/@PeterYR" target="_blank"><span lang="en">PeterYR</span></a><span lang="zh"> 使用的“信用能购买的商品碎片的价值”。这是因为，本文中定义的价值是使用最优购买策略计算得到的，考虑了留信用到第二天；而“信用能购买的商品碎片的价值”在计算时始终把信用花完，没考虑留信用，因此算出来购买的商品的总价值自然比较低。</span></p><h2 class="h2 auto-numbering" id="GjubdG4hloUr4axCXl2c8ahqnQh"><span lang="zh">“按性价比从高到低购买，并设定性价比阈值”策略</span></h2><p class="text" id="AGQxdN0dqobqY9xLZbuc2m0snpe"><span lang="zh">性价比阈值的取法不唯一。一个合理的取法是</span><span class="text-color-1"><span lang="zh">取阈值</span></span><span class="equation text-color-1">\(\theta = \dfrac{K_C^{N-1}(300) - K_C^{N-1}(0)}{300}\)</span><span lang="zh">，但是这需要花比较长的时间来计算；另一个合理的取法是取阈值</span><span class="equation">\(\theta\)</span><span lang="zh">为“信用能购买的商品碎片的价值”在</span><span class="equation">\(c = C\)</span><span lang="zh">处的“导数”。这 </span><span lang="en">2</span><span lang="zh"> 种取法几乎没有什么差别。</span></p><figure class="figure-image" id="TrqkdfWiUo9mwrxOwPJc4QR0nhf" image-token="M1DUbTPl7oqVmpxHTofcNR3FnWb"><img alt="图 21.　性价比阈值的取法" class="image" image-token="M1DUbTPl7oqVmpxHTofcNR3FnWb" src="images/M1DUbTPl7oqVmpxHTofcNR3FnWb.png"></img><figcaption><span lang="zh">图 </span><span lang="en">21.</span><span lang="zh">　性价比阈值的取法</span></figcaption></figure><p class="text" id="HqIsdUD4NoPBrjxNhricTsQbnLd"><span lang="zh">比如，如果每日获得的信用数量</span><span class="equation">\(C = 813\)</span><span lang="zh">，那么阈值的一个合理取法是 </span><span lang="en">0.0465</span><span lang="zh">（理智 </span><span lang="en">/</span><span lang="zh"> 信用）；如果</span><span class="equation">\(C = 942\)</span><span lang="zh">，阈值可以取 </span><span lang="en">0.0349</span><span lang="zh">。</span></p><p class="text" id="QDB7dYOuloacjZx9VkvcNtOfn2e"><span lang="zh">在 </span><span lang="en">0.0465</span><span lang="zh"> 和 </span><span lang="en">0.0349</span><span lang="zh"> 的阈值下，哪些商品的性价比超过了阈值，哪些商品的性价比不到阈值呢？使用 </span><span lang="en">2024</span><span lang="zh">-</span><span lang="en">07</span><span lang="zh">-</span><span lang="en">10</span><span lang="zh"> 的 </span><a href="https://ark.yituliu.cn/material/value" target="_blank"><span lang="zh">明日方舟一图流 − 物品价值表</span></a><span lang="zh"> 数据绘制出表格，其中打“✓”表示性价比大于等于 </span><span lang="en">0.0465</span><span lang="zh">，打“×”表示性价比小于 </span><span lang="en">0.0349</span><span lang="zh">，标“!”表示性价比介于 </span><span lang="en">0.0349</span><span lang="zh"> 和 </span><span lang="en">0.0465</span><span lang="zh"> 之间。</span></p><table class="sheet" id="UoNVdN7D6oDOupxmsghcW4sbnEb" spreadsheet-token_sheet-id="MhkrsfINvhyMEEtZPDGcgrOXnPg_ir9cge"><tr><td colspan="2" rowspan="2"><span lang="zh">不同折扣下</span><br/><span lang="zh">商品的性价比</span></td><td colspan="5"><span lang="zh">折扣</span></td></tr><tr><td><span lang="zh">无折扣</span></td><td><span lang="zh">-</span><span lang="en">50%</span></td><td><span lang="zh">-</span><span lang="en">75%</span></td><td><span lang="zh">-</span><span lang="en">95%</span></td><td><span lang="zh">-</span><span lang="en">99%</span></td></tr><tr><td></td><td><span lang="zh">龙门币×</span><span lang="en">1800</span></td><td><span lang="en">0.0648</span></td><td><span lang="en">0.1296</span></td><td><span lang="en">0.2592</span></td><td><span lang="en">1.2960</span></td><td></td></tr><tr><td></td><td><span lang="zh">龙门币×</span><span lang="en">3600</span></td><td><span lang="en">0.0648</span></td><td><span lang="en">0.1296</span></td><td><span lang="en">0.2592</span></td><td></td><td><span lang="en">6.4800</span></td></tr><tr><td></td><td><span lang="zh">家具零件×</span><span lang="en">20</span></td><td><span lang="en">0.0000</span></td><td><span lang="en">0.0000</span></td><td><span lang="en">0.0001</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">家具零件×</span><span lang="en">25</span></td><td><span lang="en">0.0000</span></td><td><span lang="en">0.0000</span></td><td><span lang="en">0.0001</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">招聘许可×</span><span lang="en">1</span></td><td><span lang="en">0.1504</span></td><td><span lang="en">0.3009</span></td><td><span lang="en">0.6017</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">加急许可×</span><span lang="en">1</span></td><td><span lang="en">0.0001</span></td><td><span lang="en">0.0001</span></td><td><span lang="en">0.0003</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">赤金×</span><span lang="en">6</span></td><td><span lang="en">0.0333</span></td><td><span lang="en">0.0666</span></td><td><span lang="en">0.1332</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">基础作战记录×</span><span lang="en">9</span></td><td><span lang="en">0.0405</span></td><td><span lang="en">0.0810</span></td><td><span lang="en">0.1620</span></td><td><span lang="en">0.8100</span></td><td></td></tr><tr><td></td><td><span lang="zh">初级作战记录×</span><span lang="en">9</span></td><td><span lang="en">0.0405</span></td><td><span lang="en">0.0810</span></td><td><span lang="en">0.1620</span></td><td></td><td><span lang="en">4.0500</span></td></tr><tr><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">1</span><span lang="zh">×</span><span lang="en">5</span></td><td><span lang="en">0.0512</span></td><td><span lang="en">0.1023</span></td><td><span lang="en">0.2047</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">技巧概要·卷</span><span lang="en">2</span><span lang="zh">×</span><span lang="en">3</span></td><td><span lang="en">0.0624</span></td><td><span lang="en">0.1249</span></td><td><span lang="en">0.2498</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">碳×</span><span lang="en">5</span></td><td><span lang="en">0.0273</span></td><td><span lang="en">0.0545</span></td><td><span lang="en">0.1090</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">碳素×</span><span lang="en">3</span></td><td><span lang="en">0.0205</span></td><td><span lang="en">0.0410</span></td><td><span lang="en">0.0821</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">源岩×</span><span lang="en">2</span></td><td><span lang="en">0.0298</span></td><td><span lang="en">0.0596</span></td><td><span lang="en">0.1192</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">代糖×</span><span lang="en">2</span></td><td><span lang="en">0.0341</span></td><td><span lang="en">0.0682</span></td><td><span lang="en">0.1363</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">酯原料×</span><span lang="en">2</span></td><td><span lang="en">0.0379</span></td><td><span lang="en">0.0757</span></td><td><span lang="en">0.1515</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">异铁碎片×</span><span lang="en">2</span></td><td><span lang="en">0.0387</span></td><td><span lang="en">0.0774</span></td><td><span lang="en">0.1548</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">双酮×</span><span lang="en">2</span></td><td><span lang="en">0.0396</span></td><td><span lang="en">0.0793</span></td><td><span lang="en">0.1586</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">破损装置×</span><span lang="en">2</span></td><td><span lang="en">0.0384</span></td><td><span lang="en">0.0768</span></td><td><span lang="en">0.1537</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">固源岩×</span><span lang="en">3</span></td><td><span lang="en">0.0533</span></td><td><span lang="en">0.1065</span></td><td><span lang="en">0.2131</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">糖×</span><span lang="en">2</span></td><td><span lang="en">0.0509</span></td><td><span lang="en">0.1017</span></td><td><span lang="en">0.2035</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">聚酸酯×</span><span lang="en">2</span></td><td><span lang="en">0.0566</span></td><td><span lang="en">0.1131</span></td><td><span lang="en">0.2262</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">异铁×</span><span lang="en">2</span></td><td><span lang="en">0.0578</span></td><td><span lang="en">0.1157</span></td><td><span lang="en">0.2313</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">酮凝集×</span><span lang="en">2</span></td><td><span lang="en">0.0593</span></td><td><span lang="en">0.1185</span></td><td><span lang="en">0.2370</span></td><td></td><td></td></tr><tr><td></td><td><span lang="zh">装置×</span><span lang="en">1</span></td><td><span lang="en">0.0575</span></td><td><span lang="en">0.1150</span></td><td><span lang="en">0.2299</span></td><td></td><td></td></tr></table><div class="callout-outer" id="BSledGhdKo339XxWE2acPBnOnPf"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="GVn1divOYozMZXxrny5crJPpnKh"><span lang="zh">手动购买时并不需要真的计算性价比，只需要提前记住商品大致的性价比排序，并且记住哪些商品的性价比超过阈值，哪些不到。只有在遇到剩余信用超过 </span><span lang="en">300</span><span lang="zh"> 且剩余商品的现价性价比都小于阈值的情形时才可能需要做一些简单的、粗略的计算。</span></p><p class="text" id="ZTvGdlfNKolOAdxrFAmcMYi2nme"><span lang="zh">虽然策略本身写出来看上去好像很复杂，实际上熟练应用之后操作起来是很简单的。</span></p></div></div><h2 class="h2 auto-numbering" id="doxcnSYcRXjzolCJ32yJCLbAb4e"><span lang="zh">不同购买策略的比较</span></h2><p class="text" id="doxcnGDLPqRHoM8yGMrGcZTObOk"><span lang="zh">我们把 </span><span lang="en">8</span><span lang="zh"> 种购买策略罗列出来。</span></p><ol><li class="ordered" id="doxcnbGTnWKBGM30h02hBPWpric"><span lang="zh">啥都不买策略</span></li><li class="ordered" id="doxcnq0sVVKIxLXqN18251J228d"><span lang="zh">随机购买策略</span></li><li class="ordered" id="doxcna9we3yaRqEqlQjIDksQLTf"><span lang="zh">从左到右购买</span></li><li class="ordered" id="doxcnWqGiolKIBJWoSabgiC5ozc"><span lang="zh">设定黑白名单，先购买白名单中的物品，再从左到右购买，不购买黑名单中的物品</span></li><li class="ordered" id="doxcnTh07TYpKQBX4OZmWBNUjwf"><span lang="zh">按性价比从高到低购买</span></li><li class="ordered" id="doxcnNTt2KVdzBOhPgezZeNsxRg"><span lang="zh">考虑天数为</span><span class="equation">\(N\)</span><span lang="zh">时的信用交易所最优购买策略</span></li><li class="ordered" id="doxcnmSzl4mWTzMTHdRbhSBKcdc"><span lang="zh">最优购买策略的近似策略</span></li><li class="ordered" id="doxcn6OmKAPrRv2y3yZemE6XwsX"><span lang="zh">按性价比从高到低购买，并设定性价比阈值</span></li></ol><h3 class="h3 auto-numbering" id="doxcns7q0UiGSM0Qcp6d0bacCfb"><span lang="zh">全部购买策略的比较</span></h3><p class="text" id="Vy5vdks6So7hHSxDvOmczszBnDe"><span lang="zh">我们使用 </span><span lang="en">5.5</span><span lang="zh">¿ 中的方法来比较这 </span><span lang="en">8</span><span lang="zh"> 种购买策略的优劣。</span></p><p class="text" id="doxcn5Z62O1UQ58dqOPFZou3lxh"><span lang="zh">具体的做法是：把 </span><span lang="en">3977</span><span lang="zh"> 个信用交易所的样本拷贝为 </span><span lang="en">5</span><span lang="zh"> 份，接着把这 </span><span lang="en">3977</span><span lang="zh"> * </span><span lang="en">5</span><span lang="zh"> 个商店</span><span class="text-color-1"><span lang="zh">随机打乱</span></span><span lang="zh">，认为接下来的 </span><span lang="en">3977</span><span lang="zh"> * </span><span lang="en">5</span><span lang="zh"> 天，信用交易所按随机打乱后的顺序刷新。然后运行某个购买策略进行 </span><span lang="en">3977</span><span lang="zh"> * </span><span lang="en">5</span><span lang="zh"> 天的模拟，计算</span><span class="text-color-1"><span lang="zh">平均每日购买的商品的总价值</span></span><span lang="zh">。</span></p><p class="text" id="doxcn8JyozdxphBSQtUZPtFX7xg"><span lang="zh">对于不同的</span><span class="equation">\(C\)</span><span lang="zh">以及不同的购买策略，分别计算平均每日购买的商品的总价值，得到如下结果。</span></p><figure class="figure-image" id="Jmy9dRcdaob6hlx1GYdc5MPTn0g" image-token="O0tKbJXXLotyiaxR08ScBDZSnRb"><img alt="图 22.　不同购买策略的比较" class="image" image-token="O0tKbJXXLotyiaxR08ScBDZSnRb" src="images/O0tKbJXXLotyiaxR08ScBDZSnRb.png"></img><figcaption><span lang="zh">图 </span><span lang="en">22.</span><span lang="zh">　不同购买策略的比较</span></figcaption></figure><p class="text" id="doxcnOjnzVfFh2OnZOjuqSlJbhb"><span lang="zh">从图中直观地看出，从最差的“啥都不买策略”，到“随机购买策略”，再到“从左到右购买策略”，然后是“按性价比购买策略”，最后是“信用交易所最优购买策略”，一个比一个更优，这与我们的预期是相符的。</span></p><p class="text" id="doxcn5sYJ9f807V4IyI23Vf96lg"><span lang="zh">另外，值得注意的是，即使已经用很细的线绘图了，“最优策略”、“近似策略”和“性价比 + 阈值策略”的 </span><span lang="en">3</span><span lang="zh"> 条曲线依然重合在了一起，这说明“</span><span class="text-color-1"><span lang="zh">近似策略</span></span><span lang="zh">”和“</span><span class="text-color-1"><span lang="zh">性价比 + 阈值策略</span></span><span lang="zh">”这两种策略</span><span class="text-color-1"><span lang="zh">都十分接近最优策略的表现</span></span><span lang="zh">。</span></p><p class="text" id="doxcnxkp9daQtaGw5Hv1tf8ecMc"><span lang="zh">对于我们最关心的</span><span class="equation">\(700 \le C \le 950\)</span><span lang="zh">的情形，具体看一下这些策略的优劣。</span></p><figure class="figure-image" id="Aa7OdMgZyoSqllxzgFVcL8TPnHc" image-token="WNSCbXmvIoQJMTxd8Y2cQqP9nLb"><img alt="图 23.　不同购买策略的比较" class="image" image-token="WNSCbXmvIoQJMTxd8Y2cQqP9nLb" src="images/WNSCbXmvIoQJMTxd8Y2cQqP9nLb.png"></img><figcaption><span lang="zh">图 </span><span lang="en">23.</span><span lang="zh">　不同购买策略的比较</span></figcaption></figure><p class="text" id="doxcnrrrFW38EAoqsck5OaEWDge"><span lang="zh">最优的 </span><span lang="en">3</span><span lang="zh"> 种策略的曲线依然重合在了一起，需要进一步把图放大到</span><span class="equation">\(800 \le C \le 850\)</span><span lang="zh">，才能看出看出这 </span><span lang="en">3</span><span lang="zh"> 种策略之间细微的优劣之分。</span></p><figure class="figure-image" id="MUB0dS7SVoLrFKxVRRTccNB3nje" image-token="VJRubLn5cosBpSxmEi5cohq5nnc"><img alt="图 24.　不同购买策略的比较" class="image" image-token="VJRubLn5cosBpSxmEi5cohq5nnc" src="images/VJRubLn5cosBpSxmEi5cohq5nnc.png"></img><figcaption><span lang="zh">图 </span><span lang="en">24.</span><span lang="zh">　不同购买策略的比较</span></figcaption></figure><p class="text" id="doxcn3wexGDQHbC2aGEQAs8BSWg"><span lang="zh">可以看出，“最优策略”优于“近似策略”优于“性价比 + 阈值策略”，看来还是策略越复杂效果越好。</span></p><h3 class="h3 auto-numbering" id="doxcnlgWi0QndiJX8TmKEsqkBLe"><span lang="zh">停止购买时机的选择</span></h3><p class="text" id="doxcnmUvWVw0IxM97eVajD0dQgd"><span lang="zh">如果一定要使用“从左到右购买策略”或者“按性价比从高到低购买策略”，那么，是每天都花完信用比较好，还是买到小于等于 </span><span lang="en">300</span><span lang="zh"> 信用就停止比较好呢？</span></p><p class="text" id="doxcn27uu4QouH7t3yMsFan63Ua"><span lang="zh">直接看图比较。</span></p><figure class="figure-image" id="LsBPd1juoouCThxt1iMc7tiwn1f" image-token="As4ebZKrfoTda7xaeZicmRd3nig"><img alt="图 25.　不同购买策略的比较" class="image" image-token="As4ebZKrfoTda7xaeZicmRd3nig" src="images/As4ebZKrfoTda7xaeZicmRd3nig.png"></img><figcaption><span lang="zh">图 </span><span lang="en">25.</span><span lang="zh">　不同购买策略的比较</span></figcaption></figure><p class="text" id="doxcnUeLz04n2TQKYNDPtPuxxQb"><span lang="zh">可以认为基本上差不太多，各有优劣。</span></p><h3 class="h3 auto-numbering" id="doxcnpgOhLvutwFJvZ8PxzwmcTe"><span lang="zh">信用溢出时是否无视黑名单的选择</span></h3><p class="text" id="doxcnJEC6rBL60ldJSjxFztE9tf"><span lang="zh">如果一定要使用“从左到右 + 黑白名单策略”，那么，要不要勾选信用溢出时无视黑名单呢？看图比较。</span></p><figure class="figure-image" id="Rd7HdBRFboABJTxdqAwcQheynsf" image-token="RXB8bzN74ofuPrxB5a9cKz6innb"><img alt="图 26.　不同购买策略的比较" class="image" image-token="RXB8bzN74ofuPrxB5a9cKz6innb" src="images/RXB8bzN74ofuPrxB5a9cKz6innb.png"></img><figcaption><span lang="zh">图 </span><span lang="en">26.</span><span lang="zh">　不同购买策略的比较</span></figcaption></figure><p class="text" id="doxcniEM9p9bauBJby116pmwUzd"><span lang="zh">可以看到，除非每日获得的信用特别多，否则几乎没有区别。</span></p><h3 class="h3 auto-numbering" id="doxcn4H05Z5eVeyQVeRsWyjKwof"><span lang="zh">使用 </span><a href="https://maa.plus/" target="_blank"><span lang="en">MAA</span></a><span lang="zh"> 购买时的最佳设置</span></h3><p class="text" id="doxcncZ2LxFfeu9NJfQDpRawSLg"><a href="https://maa.plus/" target="_blank"><span lang="en">MAA</span></a><span lang="zh"> 的购买策略是“从左到右 + 黑白名单策略”，如果一定要使用这一策略，黑白名单如何设置最好呢？</span></p><p class="text" id="doxcnHSFQKDqipNIDrf0365pCBe"><span lang="zh">经过多次枚举和尝试，发现无论每日获得的信用是 </span><span lang="en">813</span><span lang="zh"> 还是 </span><span lang="en">942</span><span lang="zh">，黑白名单的最佳填写方式都是：</span></p><ul><li class="bullet" id="doxcn9JfDy5Jx44JbBlm7taq1Cd"><strong><span lang="zh">优先购买：招聘许可；龙门币；技巧概要·卷</span><span lang="en">2</span></strong></li><li class="bullet" id="doxcnAbQdVg3CmiHfnKneRBNq0g"><strong><span lang="zh">黑名单：加急许可；家具零件；碳；碳素</span></strong></li></ul><p class="text" id="doxcn0sPoYDnEufMkPOKnsiMm6t"><span lang="zh">并且，</span><strong><span lang="zh">不勾选</span></strong><span lang="zh">“只购买打折的信用商品”，</span><strong><span lang="zh">不勾选</span></strong><span lang="zh">“信用点低于 </span><span lang="en">300</span><span lang="zh"> 时停止购买商品”，每日获得 </span><span lang="en">813</span><span lang="zh"> 信用时，</span><strong><span lang="zh">不勾选</span></strong><span lang="zh">“信用溢出时无视黑名单”；每日获得 </span><span lang="en">942</span><span lang="zh"> 信用时，</span><strong><span lang="zh">勾选</span></strong><span lang="zh">“信用溢出时无视黑名单”。</span></p><p class="text" id="doxcnRtAuOSSgtDyzMGyPb2zoqd"><a href="https://maa.plus/" target="_blank"><span lang="en">MAA</span></a><span lang="zh"> 可以考虑把信用交易所的购买策略升级为“性价比 + 阈值策略”。在每日获得的信用</span><span class="equation">\(C = 813\)</span><span lang="zh">的情况下，“性价比 + 阈值策略”比“从左到右 + 黑白名单策略”平均每天能购买的商品的总价值多 </span><span lang="en">1.3680</span><span lang="zh"> 理智，虽然一天的差距不大，但是积少成多。</span></p><div class="callout-outer" id="doxcnam3d7qrLC5yJWqTbhBKI9f"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnIhVU47q7Ek9b9FKYR2cykc"><span lang="zh">这里结论的前提是采用 </span><a href="https://ark.yituliu.cn/material/value" target="_blank"><span lang="zh">明日方舟一图流 − 物品价值表</span></a><span lang="zh"> 中的物品价值。</span></p><p class="text" id="doxcn51flKi3WT1fLSBG5VrBLRc"><span lang="zh">并且，这里只是枚举了若干种方案进行比较，并不保证一定不存在更优的黑白名单填写方式。</span></p></div></div><h1 class="h1 auto-numbering" id="doxcnjROECITepP1g0ktBtyx2od"><span lang="zh">结论</span></h1><p class="text" id="doxcnal3E0G76GJavd7LFQxL7Sd"><span lang="zh">在本文提出的 </span><span lang="en">8</span><span lang="zh"> 种信用交易所购买策略中，作者最推荐的是“</span><strong><span lang="zh">按性价比从高到低购买，并设定性价比阈值</span></strong><span lang="zh">”的策略。</span></p><p class="text" id="doxcn4Y7uFTzRCeGYq7j2CrZsZf"><span lang="zh">首先，</span><span class="equation">\(C = 813\)</span><span lang="zh">时，这一策略平均每日购买的物品的总价值是最优策略的 </span><span lang="en">99.9383%</span><span lang="zh">，几乎相差无几。</span></p><p class="text" id="doxcnvs1L3Ir4mKEuOrv1lOnW0b"><span lang="zh">另外一点，就是这个策略可以应对“买完后又获得了信用”的情况。比如说，博士甲中午已经完成了信用交易所的购买了，晚上的时候线索交流完成了，博士甲又获得了 </span><span lang="en">210</span><span lang="zh"> 信用，此时他只需要按照这个策略继续购买即可。</span></p><p class="text" id="doxcnEaAX0h8BXCqWCNttjCgLOc"><span lang="zh">而最优策略则不具有这个性质。最优策略在实施的时候要求已经获得了当天的全部信用，这是一个比较大的限制。</span></p><p class="text" id="OWFxdqsfroN3NNx9Aw2comXznsd"><span lang="zh">我们费了很大功夫推导最优策略，最后却没有推荐最优策略。实际上，最优策略的意义不在于玩家一定要使用最优策略来购买，而在于它能让我们知道信用交易所购物的“上限”在哪里。只有先计算出了最优策略，然后发现“性价比 + 阈值”的策略能达到最优策略的 </span><span lang="en">99.9383%</span><span lang="zh">，才能有底气地推荐“性价比 + 阈值”的策略。</span></p><h1 class="h1 auto-numbering" id="doxcnVjLvrQStG9SK8bhX8hphIh"><span lang="zh">进一步的讨论</span></h1><h2 class="h2 auto-numbering" id="JwoJdwc8JoJWCHxM03RcIWZin3c"><span lang="zh">考虑存线索时的最优购买策略和近似策略</span></h2><h3 class="h3 auto-numbering" id="doxcnnl8XzaYWRtq0ssB2exaE2f"><span lang="zh">问题描述</span></h3><p class="text" id="doxcnJo4WFUHm1rYjbdYo2FsK6d"><span lang="en">5.1</span><span lang="zh">¿ </span><a href="https://h089spg07ll.feishu.cn/docx/Qerqdji9EoA43vxhbQecX5JonVg#doxcnOTzUBWJHHZp3bFKo162M3d" target="_blank"><span lang="zh">信用交易所最优购买策略</span></a><span lang="zh"> 中我们提出了 </span><span lang="en">3</span><span lang="zh"> 条假设，这里回顾一下。</span></p><ol><li class="ordered" id="doxcnwTUBkfwNUlWb2UXcxGKRYg"><span lang="zh">假设每日生成商店的时候，是从若干种可能性中按照固定的概率抽取一个；</span></li><li class="ordered" id="doxcn7VUcb5gMiv5gTQy4UhwvEe"><span lang="zh">假设</span><span class="text-color-1"><span lang="zh">每日获得的信用数量固定</span></span><span lang="zh">，为</span><span class="equation">\(C\)</span><span lang="zh">；</span></li><li class="ordered" id="doxcn00HamdtqSnkUDUwzupntXc"><span lang="zh">假设</span><span class="text-color-1"><span lang="zh">每种物品被赋予了一个固定的价值</span></span><span lang="zh">。</span></li></ol><p class="text" id="doxcnhwfPhqUmTjRi1MrJBtfOrf"><span lang="zh">其中假设 </span><span lang="en">2</span><span lang="zh"> 可能显得有点太强了。这是因为，游戏中</span><span class="text-color-1"><span lang="zh">可以把搜集到的线索暂时存放起来</span></span><span lang="zh">，不一定要立即赠送出去。比如，可以在信用不足时把库存的线索赠送出去来获取信用，也可以在信用溢出或者即将溢出时多囤积一些线索之后再使用。</span></p><p class="text" id="doxcn3MX6aHiU6jQpaGSN6bM9Mh"><span lang="zh">总之，实际情况下，每日获得的信用数量一般不是一个固定的数。本节中，我们删去假设 </span><span lang="en">2</span><span lang="zh">，增加假设 </span><span lang="en">4</span><span lang="zh">、</span><span lang="en">5</span><span lang="zh">、</span><span lang="en">6</span><span lang="zh">，并寻找此时的最优购买策略。</span></p><ol><li class="ordered" id="doxcnDTK4iz1JwlHs5OUgnWI4Ct"><span lang="zh">假设</span><span class="text-color-1"><span lang="zh">除传递线索获得的信用外，每日获得的信用数量固定</span></span><span lang="zh">，为</span><span class="equation">\(D\)</span><span lang="zh">；</span></li><li class="ordered" id="doxcnbD6nwvO5L9bEDAH8gGnwTb"><span lang="zh">假设</span><span class="text-color-1"><span lang="zh">每日获得的线索数量固定</span></span><span lang="zh">，为</span><span class="equation">\(E\)</span><span lang="zh">（含每日固定赠送的线索）；</span></li><li class="ordered" id="doxcndNKr3UkEpRWrfz1s1tm1vB"><span lang="zh">假设</span><span class="text-color-1"><span lang="zh">全部搜集的线索都传递给好友。</span></span></li></ol><p class="text" id="doxcnREJcQ5L1mMFnEUr4SXJWBd"><span lang="zh">为了便于计算，</span><span class="text-color-1"><span lang="zh">额外假设线索的数量是一个连续量</span></span><span lang="zh">，也就是认为线索的搜集和赠送不是“一份一份”进行的，而是“一点一点”进行的。</span></p><div class="callout-outer" id="doxcnW8rGSVPJR6CJwwoTXUrFic"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcntDa5OoPQBnkfyxMIb7dn0f"><span lang="zh">补充一些基础信息：</span></p><ul><li class="bullet" id="doxcnCviaOEr5SnN7qC9mjeE5se"><span lang="zh">传递 </span><span lang="en">1</span><span lang="zh"> 份线索可以获得 </span><span lang="en">20</span><span lang="zh"> 信用。</span></li><li class="bullet" id="doxcnNKyT66llnsbLnWBPTEVzmc"><span lang="zh">线索自有库的容量为 </span><span lang="en">10</span><span lang="zh">，但是其实可以看作 </span><span lang="en">12</span><span lang="zh">。</span><p class="text" id="EbYydudMwoqNYbx06fkc0cConne"><span lang="zh">一方面，会客室每日 </span><span lang="en">04:00</span><span lang="zh"> 获得的线索不会自动进入线索自有库，而是可以在当天的任何时候收取；</span></p><p class="text" id="TJNhdqVTeoftUhxT3wLc9RohnSe"><span lang="zh">另一方面，线索自有库满了之后，线索搜集不会立即停止，而是会等到第 </span><span lang="en">11</span><span lang="zh"> 份线索搜集完成后再停止。</span></p><p class="text" id="KN7NdYEAyoq55hxKQnlcEipOnid"><span class="text-color-1"><span lang="zh">后面始终把线索自有库的容量视为 </span><span lang="en">12</span><span lang="zh">。</span></span></p></li></ul></div></div><p class="text" id="doxcnxSEOwxhnwTOuL58SbNsAVg"><span lang="zh">关于线索的使用，有一些比较基本的原则。我猜想，想要最大程度利用线索，这些原则应当是要满足的，虽然我并没有给出证明。</span></p><ol><li class="ordered" id="doxcn9xFqBnAlAS26I2GQxBEVdh"><span lang="zh">一旦因线索自有库满了导致线索搜集停止，立即传递线索。</span></li><li class="ordered" id="doxcnrBJf8oo0TP8eyqAakQXCL2"><span lang="zh">在希望购买某商品但现有的信用不足的情况下，传递线索直到刚好足够购买该商品。</span></li><li class="ordered" id="doxcnterQeAADp5itCxBmqYPofh"><span lang="zh">其他情况下，不传递线索。</span></li></ol><p class="text" id="doxcniIAdx4mCB9NyPAL9dcBvhT"><span class="text-color-1"><span lang="zh">之后始终假设线索的传递是按照这 </span><span lang="en">3</span><span lang="zh"> 条原则自动进行的。</span></span></p><h3 class="h3 auto-numbering" id="doxcnlRFwhVvMmswUCuizyWIFlb"><span lang="zh">推导最优策略</span></h3><p class="text" id="doxcnbdorm54OSFEWdy81BLe9Ec"><span lang="zh">现在我们正式开始讨论考虑存线索时的最优购买策略。</span></p><p class="text" id="doxcnYP13Ss9Cy78vpS5a4mUlUe"><span lang="zh">仍然假设考虑的时间跨度是</span><span class="equation">\(N\)</span><span lang="zh">天。仍然设第</span><span class="equation">\(n-1\)</span><span lang="zh">天留给第</span><span class="equation">\(n\)</span><span lang="zh">天的信用数量为</span><span class="equation">\(c_n (0 \le c_n \le 300)\)</span><span lang="zh">。</span></p><p class="text" id="doxcn8L1KgfTCPuOcB5DXE6fCob"><span lang="zh">新设第</span><span class="equation">\(n-1\)</span><span lang="zh">天留给第</span><span class="equation">\(n\)</span><span lang="zh">天的线索数量为</span><span class="equation">\(e_n (0 \le e_n \le 12)\)</span><span lang="zh">。</span></p><p class="text" id="doxcnv6FOFS5spT6LKC2TGyachc"><span class="equation">\(N = 1\)</span><span lang="zh">时，仍然是“竭泽而渔”即可。把</span><span class="equation">\(e_1 + E\)</span><span lang="zh">线索全部传递出去之后，拥有的信用数量为</span><span class="equation">\(c_1 + D + 20 \cdot (e_1 + E)\)</span><span lang="zh">。只需要在</span><span class="equation">\(2^{10}\)</span><span lang="zh">中购买方案中选一种不超支的，使得购买的物品总价值最大。</span></p><p class="text" id="doxcnbzhPVvVIn1SEbtwOpTt9Rg"><span class="equation">\(N = 2\)</span><span lang="zh">时，第 </span><span lang="en">2</span><span lang="zh"> 天仍然是“竭泽而渔”，第 </span><span lang="en">1</span><span lang="zh"> 天则复杂一点。</span></p><p class="text" id="doxcnH2ONxPM8revl70ZF80GMEh"><span lang="zh">假设</span><span class="equation">\(c_2 = c\)</span><span lang="zh">，</span><span class="equation">\(e_2 = e\)</span><span lang="zh">，则第 </span><span lang="en">2</span><span lang="zh"> 天有</span><span class="equation">\(c + D\)</span><span lang="zh">信用、</span><span class="equation">\(e + E\)</span><span lang="zh">线索。仍然是遍历第 </span><span lang="en">2</span><span lang="zh"> 天所有可能的商店，按 </span><span lang="en">01</span><span lang="zh"> 背包问题求出第 </span><span lang="en">2</span><span lang="zh"> 天手握</span><span class="equation">\(c + D\)</span><span lang="zh">信用、</span><span class="equation">\(e + E\)</span><span lang="zh">线索的情况下，能购买的物品的总价值的最大值的期望，记为</span><span class="equation">\(L_{D, E}^1(c, e)\)</span><span lang="zh">。</span></p><p class="text" id="doxcnfc5jU6VtUifCADbjmMh38b"><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天的最优策略是在</span><span class="equation">\(2^{10}\)</span><span lang="zh">中购买方案中选一种不超支的，使得</span><span class="text-color-5"><span lang="zh">第 </span><span lang="en">1</span><span lang="zh"> 天购买的物品的总价值</span></span><span lang="zh">与</span><span class="equation">\(L_{D, E}^1(c_2, e_2)\)</span><span lang="zh">的和最大。</span></p><div class="callout-outer" id="doxcnxpxnDmx3e9JfZ8xRzz0ZMd"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnDNcOC8MlaGHGfdLmTviZSd"><span lang="zh">不超支的意思是：总价格小于等于</span><span class="equation">\(c_1 + D + 20 \cdot (e_1 + E)\)</span><span lang="zh">。</span></p></div></div><p class="text" id="doxcnz02EASqqphKZJUKvqGny23"><span lang="zh">对于一般的</span><span class="equation">\(N\)</span><span lang="zh">，其实考虑和不考虑存线索时的最优购买策略几乎没什么区别，仅有的区别是原来的</span><span class="equation">\(K_D^n(c)\)</span><span lang="zh">换成了现在的</span><span class="equation">\(L_{D, E}^n(c, e)\)</span><span lang="zh">，从 </span><span lang="en">1</span><span lang="zh"> 元函数升维变成了 </span><span lang="en">2</span><span lang="zh"> 元函数。</span></p><p class="text" id="doxcnvSkijCGNGWXnukaoqSnBQf"><span lang="zh">相信各位博士有能力补全推导过程，这里就不再赘述了。</span></p><h3 class="h3 auto-numbering" id="doxcnGrRq82y2e60kOpQ6Itwc8b"><span lang="zh">编程求解</span></h3><p class="text" id="doxcnHEAQvzgk7SkjeiITSkzOSh"><span lang="zh">对于固定的</span><span class="equation">\(D\)</span><span lang="zh">和</span><span class="equation">\(E\)</span><span lang="zh">，计算</span><span class="equation">\(L_{D, E}^{N - 1}(c, e)\)</span><span lang="zh">的时间复杂度大概为</span><span class="equation">\((N - 1) \cdot 301 \cdot 241 \cdot 3977 \cdot 2^{10}\)</span><span lang="zh">，如果要对不同的</span><span class="equation">\(D\)</span><span lang="zh">和</span><span class="equation">\(E\)</span><span lang="zh">都计算则需要成倍的时间。很遗憾，这就是最优策略需要的代价，而作者的电脑并没有这么强大的算力。</span></p><p class="text" id="doxcnnZITE8z8kpepT5RyCQh7db"><span lang="zh">代码已经放在仓库里了，有多余算力的博士可以尝试。</span></p><h3 class="h3 auto-numbering" id="doxcnF44gUId79QNGh1DReXRqgh"><span lang="zh">近似策略</span></h3><p class="text" id="doxcnqoYgwTKbRMmjA9munwZhGe"><span lang="zh">假设“</span><span class="equation">\(c\)</span><span lang="zh">信用能购买的商品碎片的价值”为</span><span class="equation">\(G(c)\)</span><span lang="zh">，则一个合理的近似是</span><span class="equation">\(L_{D, E}^{N - 1}(c, e) \approx G(D + 20E - 150 - 120 + c + 20e)\)</span><span lang="zh">。</span></p><p class="text" id="doxcnEmBHh4wkiFfBYhNZZ1rRSg"><span lang="zh">当</span><span class="equation">\(D = 737, E = 3.8\)</span><span lang="zh">时（此时</span><span class="equation">\(D + 20E = 813\)</span><span lang="zh">），采用这一近似，平均每日购买的商品的总价值为 </span><span lang="en">84.9149</span><span lang="zh">，而</span><span class="equation">\(C = 813\)</span><span lang="zh">时，不考虑存线索时的最优购买策略平均每日购买的商品的总价值为 </span><span lang="en">84.5921</span><span lang="zh">。也就是说，考虑存线索之后平均每日能多购买价值 </span><span lang="en">0.3228</span><span lang="zh"> 理智的商品。</span></p><div class="callout-outer" id="doxcnxsJP73q6qK2g21sGwdVLtc"><div class="callout-icon"><svg p-id="11531" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" version="1.1" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 4.12672c280.49408 0 507.87328 227.3792 507.87328 507.87328 0 280.49408-227.3792 507.87328-507.87328 507.87328C231.50592 1019.87328 4.12672 792.49408 4.12672 512 4.12672 231.50592 231.50592 4.12672 512 4.12672zM512 685.96736c-42.47552 0-76.91264 34.42688-76.91264 76.91264 0 42.47552 34.43712 76.91264 76.91264 76.91264 42.47552 0 76.91264-34.43712 76.91264-76.91264C588.91264 720.39424 554.47552 685.96736 512 685.96736zM509.78816 625.83808c36.58752 0 66.24256-29.66528 66.24256-66.24256l0-309.1456c0-36.58752-29.65504-66.24256-66.24256-66.24256-36.58752 0-66.24256 29.66528-66.24256 66.24256l0 309.1456C443.5456 596.18304 473.20064 625.83808 509.78816 625.83808z"></path></svg></div><div class="callout-inner"><p class="text" id="doxcnkVklIuaQytxb5wNWx3A6Ke"><span lang="zh">这一近似并不好。</span></p><p class="text" id="doxcn21vhS4YAREiosdj7T1eMhc"><span lang="zh">用这一近似得到的“考虑存线索时的近似策略”甚至还不如“允许存线索时性价比 + 阈值的策略”。</span></p><p class="text" id="doxcnUNzNjxnLwiunWgxsbpkK9b"><span lang="zh">因为</span><span class="equation">\(D = 737, E = 3.8\)</span><span lang="zh">时，“允许存线索时的性价比 + 阈值策略”平均每日购买的商品的总价值为 </span><span lang="en">84.9766</span><span lang="zh">，还更高一点。</span></p></div></div><h2 class="h2 auto-numbering" id="OSckd6lkDoIa0ux5STCcbRhJnth"><span lang="zh">「相见欢」版本后的信用交易所购买策略</span></h2><p class="text" id="C0dmdsgSlojAWlxc59ycCJkQnkb"><span lang="zh">「相见欢」版本新增了一个信用的获取途径：通过会客室信息板获取信用。由于信息板上的信用可以在本周或者下周的任何时候领取，故“每日获得的信用数量固定”的假设不再成立。</span></p><p class="text" id="ACqBdmSJ8oskRVxfW2dcOhaVnUf"><span lang="zh">需要注意：打开信息板时会自动领取上周未领取的全部信用，且对于本周的访客信用，只能选择不收取或者收取全部。因此不同的博士通过信息板获取信用的情况不同，例如：</span></p><ol><li class="ordered" id="A9UbdrUvBoMqfixNnCDcE3gun8e"><span lang="zh">博士甲有 </span><span lang="en">10</span><span lang="zh"> 个小号作为好友。当博士甲需要信用时，博士甲会使用小号访问大号的基建，然后在大号的信息板上领取信用。博士甲可以完全控制通过信息板获取信用的时间和数量。</span></li><li class="ordered" id="JuYcddCtGoktq4xr4sQcMMJfnpd"><span lang="zh">博士乙有许多好友，且非常积极。在博士乙每周一首次上线之前，总有至少 </span><span lang="en">10</span><span lang="zh"> 个好友访问博士乙的基建。博士乙总是只能选择收取 </span><span lang="en">0</span><span lang="zh"> 或 </span><span lang="en">300</span><span lang="zh"> 信用。</span></li><li class="ordered" id="J2vGdhG6soeeQaxHsJucIMBcnqT"><span lang="zh">博士丙有若干好友，且没有小号。博士丙的好友会不定期地访问博士丙的基建，博士丙难以准确预测未来信息板上信用的数量。</span></li></ol><p class="text" id="CdPqd7gsBoldmTx5Hhhc67QXnLd"><span lang="zh">在「相见欢」版本及以后，对于不同情况的博士，如何考虑信用交易所的购买策略？留给读者思考。</span></p><h1 class="h1 auto-numbering" id="doxcntk6bapToKfgJxvs5qPulnb"><span lang="zh">名词解释、概念约定</span></h1><ul><li class="bullet" id="doxcnqyygIDFaSH6HknhSiirlQe"><span lang="zh">从左到右：先第 </span><span lang="en">1</span><span lang="zh"> 行从左到右，再第 </span><span lang="en">2</span><span lang="zh"> 行从左到右</span></li><li class="bullet" id="doxcnTGGiBsZwXc8VsAuKEpcs6b"><span lang="en">MAA</span><span lang="zh">：</span><span lang="en">MaaAssistantArknights</span><span lang="zh">，</span><a class="url" href="https://maa.plus/" target="_blank"><span lang="en">https://maa.plus/</span></a></li><li class="bullet" id="doxcnZWZ2qLYG82HoD7mqe7pz3f"><span lang="en">01</span><span lang="zh">背包问题：见维基百科“</span><span lang="en">Knapsack</span><span lang="zh"> </span><span lang="en">problem</span><span lang="zh">”</span><br/><a class="url" href="https://en.wikipedia.org/wiki/Knapsack_problem#0-1_knapsack_problem" target="_blank"><span lang="en">https://en.wikipedia.org/wiki/Knapsack</span><span lang="zh">_</span><span lang="en">problem</span><span lang="zh">#</span><span lang="en">0</span><span lang="zh">-</span><span lang="en">1</span><span lang="zh">_</span><span lang="en">knapsack</span><span lang="zh">_</span><span lang="en">problem</span></a></li><li class="bullet" id="doxcn0KEHLYaOtotEMg2i5Vzv3b"><span lang="zh">单增：单调递增</span><br/><span lang="zh">“单调递增”不要求“严格单调递增”。</span></li><li class="bullet" id="doxcnVX9Zbx1eNYBqpMvYUPsAkd"><span lang="zh">边际收益递减：见维基百科“</span><span lang="en">Diminishing</span><span lang="zh"> </span><span lang="en">returns</span><span lang="zh">"</span><br/><a class="url" href="https://en.wikipedia.org/wiki/Diminishing_returns" target="_blank"><span lang="en">https://en.wikipedia.org/wiki/Diminishing</span><span lang="zh">_</span><span lang="en">returns</span></a></li></ul><h1 class="h1 auto-numbering" id="doxcnaoDQHarxVgeM8q76TDPStc"><span lang="zh">引用、致谢</span></h1><ol><li class="ordered" id="doxcnmdzA20Ll7YfXg8rlXOVokh"><span lang="en">BioHazard</span><span lang="zh">，</span><span lang="en">credit</span><span lang="zh">-</span><span lang="en">store</span><span lang="zh">-</span><span lang="en">optimizer</span><span lang="zh">，</span><a class="url" href="https://github.com/BiologyHazard/credit-store-optimizer" target="_blank"><span lang="en">https://github.com/BiologyHazard/credit</span><span lang="zh">-</span><span lang="en">store</span><span lang="zh">-</span><span lang="en">optimizer</span></a></li><li class="ordered" id="doxcnwSKvfWvrMOB8Veqar0Bdaf"><span lang="zh">明日方舟一图流，</span><a class="url" href="https://ark.yituliu.cn" target="_blank"><span lang="en">https://ark.yituliu.cn</span></a></li><li class="ordered" id="doxcnOdRHcPjLZr1HqCFov49DYe"><span lang="en">PRTS</span><span lang="zh"> </span><span lang="en">Wiki</span><span lang="zh">，</span><a class="url" href="https://prts.wiki/w/%E9%87%87%E8%B4%AD%E4%B8%AD%E5%BF%83#%E4%BF%A1%E7%94%A8%E4%BA%A4%E6%98%93%E6%89%80" target="_blank"><span lang="en">https://prts.wiki/w/</span><span lang="zh">采购中心#信用交易所</span></a></li><li class="ordered" id="doxcnq0DkvmsKs9WEuU4zX9sJgc"><span lang="en">PeterYR</span><span lang="zh">，</span><span lang="en">Calculating</span><span lang="zh"> </span><span lang="en">Friend</span><span lang="zh"> </span><span lang="en">Credits</span><span lang="zh">，</span><a class="url" href="https://docs.google.com/document/d/1KNvLXeAWxPvbqqrU-F7oZvNNiS7IERY-Yf8sRcDL0mY" target="_blank"><span lang="en">https://docs.google.com/document/d/1KNvLXeAWxPvbqqrU</span><span lang="zh">-</span><span lang="en">F7oZvNNiS7IERY</span><span lang="zh">-</span><span lang="en">Yf8sRcDL0mY</span></a></li><li class="ordered" id="doxcnexmFnTw287sP1wI1g549Uf"><span lang="en">BioHazard</span><span lang="zh">，信用商店统计，</span><a class="url" href="https://h089spg07ll.feishu.cn/sheets/PrFgsuzMzhUbQkt25kncDWW9nZb?sheet=3VEhf6" target="_blank"><span lang="en">https://h089spg07ll.feishu.cn/sheets/PrFgsuzMzhUbQkt25kncDWW9nZb?sheet</span><span lang="zh">=</span><span lang="en">3VEhf6</span></a></li><li class="ordered" id="doxcn3m9rgM8mKu40nwmLofyplg"><span lang="en">BioHazard</span><span lang="zh">，基建最大收益混合排班方案，</span><a class="url" href="https://h089spg07ll.feishu.cn/docx/ANxmdPK88oWxipxqJTOcKimwnoe" target="_blank"><span lang="en">https://h089spg07ll.feishu.cn/docx/ANxmdPK88oWxipxqJTOcKimwnoe</span></a></li></ol><ul><li class="bullet" id="HwDQdK5xKotkmbxt9Yjcg1KDnPc"><span lang="zh">本文使用的游戏图片、文本原文，仅用于更好地表现游戏资料，其版权属于 </span><span lang="en">Arknights/</span><span lang="zh">上海鹰角网络科技有限公司。</span></li><li class="bullet" id="doxcnNoX2nyFf8OIKb7LHmr8Vo6"><span lang="zh">感谢 </span><a href="https://space.bilibili.com/2268014" target="_blank"><span lang="zh">教捐</span></a><span lang="zh">、</span><a href="https://space.bilibili.com/456135037" target="_blank"><span lang="zh">一个资深的烧饼</span></a><span lang="zh">、</span><a href="https://space.bilibili.com/97133244" target="_blank"><span lang="en">MisakaVan</span><span lang="zh">昊</span></a></li><li class="bullet" id="doxcnBwrogIUnH8rMfOq4IKebKg"><span lang="zh">感谢 </span><a href="https://space.bilibili.com/10057492" target="_blank"><span lang="en">Zirunwang</span></a><span lang="zh"> 等所有提供账号以及信用交易所截图的博士</span></li></ul><p class="text" id="doxcnzbcpVLiurcRr6YtYSZRQQh"></p></main></body>
</html>
